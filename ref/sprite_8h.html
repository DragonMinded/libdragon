<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: sprite.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sprite.h File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__display.html">Display Subsystem</a> &raquo; <a class="el" href="group__graphics.html">2D Graphics</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>2D Graphics  
<a href="#details">More...</a></p>

<p><a href="sprite_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structsprite__t" id="r_structsprite__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a></td></tr>
<tr class="memdesc:structsprite__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sprite structure.  <a href="sprite_8h.html#structsprite__t">More...</a><br /></td></tr>
<tr class="separator:structsprite__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structsprite__detail__t" id="r_structsprite__detail__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#structsprite__detail__t">sprite_detail_t</a></td></tr>
<tr class="memdesc:structsprite__detail__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sprite detail texture information structure.  <a href="sprite_8h.html#structsprite__detail__t">More...</a><br /></td></tr>
<tr class="separator:structsprite__detail__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:unionsprite__t_8____unnamed40____" id="r_unionsprite__t_8____unnamed40____"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#unionsprite__t_8____unnamed40____">sprite_t.__unnamed40__</a></td></tr>
<tr class="separator:unionsprite__t_8____unnamed40____"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a765ba7d5d9b35c6c60d958d2b35e81f7" id="r_a765ba7d5d9b35c6c60d958d2b35e81f7"><td class="memItemLeft" align="right" valign="top"><a id="a765ba7d5d9b35c6c60d958d2b35e81f7" name="a765ba7d5d9b35c6c60d958d2b35e81f7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPRITE_FLAGS_TEXFORMAT</b>&#160;&#160;&#160;0x1F</td></tr>
<tr class="memdesc:a765ba7d5d9b35c6c60d958d2b35e81f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pixel format of the sprite. <br /></td></tr>
<tr class="separator:a765ba7d5d9b35c6c60d958d2b35e81f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ef3442b2f9f95efbe25ccf07da49c0" id="r_a33ef3442b2f9f95efbe25ccf07da49c0"><td class="memItemLeft" align="right" valign="top"><a id="a33ef3442b2f9f95efbe25ccf07da49c0" name="a33ef3442b2f9f95efbe25ccf07da49c0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPRITE_FLAGS_OWNEDBUFFER</b>&#160;&#160;&#160;0x20</td></tr>
<tr class="memdesc:a33ef3442b2f9f95efbe25ccf07da49c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag specifying that the sprite buffer must be freed by sprite_free. <br /></td></tr>
<tr class="separator:a33ef3442b2f9f95efbe25ccf07da49c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9563f809bb96ffd9f64a3619142daa74" id="r_a9563f809bb96ffd9f64a3619142daa74"><td class="memItemLeft" align="right" valign="top"><a id="a9563f809bb96ffd9f64a3619142daa74" name="a9563f809bb96ffd9f64a3619142daa74"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPRITE_FLAGS_EXT</b>&#160;&#160;&#160;0x80</td></tr>
<tr class="memdesc:a9563f809bb96ffd9f64a3619142daa74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sprite contains extended information (new format) <br /></td></tr>
<tr class="separator:a9563f809bb96ffd9f64a3619142daa74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a746970338ac3f8db984b4f08fc6e9a21" id="r_a746970338ac3f8db984b4f08fc6e9a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a746970338ac3f8db984b4f08fc6e9a21">sprite_load</a> (const char *fn)</td></tr>
<tr class="memdesc:a746970338ac3f8db984b4f08fc6e9a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a sprite from a filesystem (eg: ROM)  <br /></td></tr>
<tr class="separator:a746970338ac3f8db984b4f08fc6e9a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73fe062e6e5b91224190aece57a9d5d4" id="r_a73fe062e6e5b91224190aece57a9d5d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a73fe062e6e5b91224190aece57a9d5d4">sprite_load_buf</a> (void *buf, int sz)</td></tr>
<tr class="memdesc:a73fe062e6e5b91224190aece57a9d5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a sprite from a buffer.  <br /></td></tr>
<tr class="separator:a73fe062e6e5b91224190aece57a9d5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fce7f826a4a6aff92ed3f4e280abdf9" id="r_a9fce7f826a4a6aff92ed3f4e280abdf9"><td class="memItemLeft" align="right" valign="top"><a id="a9fce7f826a4a6aff92ed3f4e280abdf9" name="a9fce7f826a4a6aff92ed3f4e280abdf9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sprite_free</b> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:a9fce7f826a4a6aff92ed3f4e280abdf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate a sprite. <br /></td></tr>
<tr class="separator:a9fce7f826a4a6aff92ed3f4e280abdf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768f8dbfba277e7b3cb84fc0198307ed" id="r_a768f8dbfba277e7b3cb84fc0198307ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a768f8dbfba277e7b3cb84fc0198307ed">sprite_get_format</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:a768f8dbfba277e7b3cb84fc0198307ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the sprite texture format.  <br /></td></tr>
<tr class="separator:a768f8dbfba277e7b3cb84fc0198307ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53a943109546503af068fc0d1c46252d" id="r_a53a943109546503af068fc0d1c46252d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a53a943109546503af068fc0d1c46252d">sprite_get_pixels</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:a53a943109546503af068fc0d1c46252d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the full sprite contents.  <br /></td></tr>
<tr class="separator:a53a943109546503af068fc0d1c46252d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b27ea3c16dcd2b151b44d2ce616fec6" id="r_a1b27ea3c16dcd2b151b44d2ce616fec6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a1b27ea3c16dcd2b151b44d2ce616fec6">sprite_get_lod_pixels</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite, int num_level)</td></tr>
<tr class="memdesc:a1b27ea3c16dcd2b151b44d2ce616fec6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the contents of a LOD level.  <br /></td></tr>
<tr class="separator:a1b27ea3c16dcd2b151b44d2ce616fec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a867668cd0119fe7182e992698d1193" id="r_a3a867668cd0119fe7182e992698d1193"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a3a867668cd0119fe7182e992698d1193">sprite_get_detail_pixels</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite, <a class="el" href="sprite_8h.html#structsprite__detail__t">sprite_detail_t</a> *info, <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *infoparms)</td></tr>
<tr class="memdesc:a3a867668cd0119fe7182e992698d1193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the contents of a detail texture.  <br /></td></tr>
<tr class="separator:a3a867668cd0119fe7182e992698d1193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2569c0dd2df7c58ebe684f4d21de550" id="r_ac2569c0dd2df7c58ebe684f4d21de550"><td class="memItemLeft" align="right" valign="top"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#ac2569c0dd2df7c58ebe684f4d21de550">sprite_get_tile</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite, int h, int v)</td></tr>
<tr class="memdesc:ac2569c0dd2df7c58ebe684f4d21de550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to a specific tile of the spritemap.  <br /></td></tr>
<tr class="separator:ac2569c0dd2df7c58ebe684f4d21de550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc7bf5e68991099a3ec86ae05d4aca9" id="r_adfc7bf5e68991099a3ec86ae05d4aca9"><td class="memItemLeft" align="right" valign="top">uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#adfc7bf5e68991099a3ec86ae05d4aca9">sprite_get_palette</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:adfc7bf5e68991099a3ec86ae05d4aca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the sprite palette (if any)  <br /></td></tr>
<tr class="separator:adfc7bf5e68991099a3ec86ae05d4aca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafae923dfd53e64c533e40b68dfb012" id="r_aeafae923dfd53e64c533e40b68dfb012"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#aeafae923dfd53e64c533e40b68dfb012">sprite_get_texparms</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite, <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *parms)</td></tr>
<tr class="memdesc:aeafae923dfd53e64c533e40b68dfb012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a copy of the RDP texparms, optionally stored within the sprite.  <br /></td></tr>
<tr class="separator:aeafae923dfd53e64c533e40b68dfb012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f3cd068455a50b3f53306c5ba985a8" id="r_a39f3cd068455a50b3f53306c5ba985a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a39f3cd068455a50b3f53306c5ba985a8">sprite_get_lod_count</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:a39f3cd068455a50b3f53306c5ba985a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of LOD levels stored within the sprite (including the main image).  <br /></td></tr>
<tr class="separator:a39f3cd068455a50b3f53306c5ba985a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540e860f84fff6a665b296d6956e80d3" id="r_a540e860f84fff6a665b296d6956e80d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sprite_8h.html#a540e860f84fff6a665b296d6956e80d3">sprite_fits_tmem</a> (<a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *sprite)</td></tr>
<tr class="memdesc:a540e860f84fff6a665b296d6956e80d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the sprite fits in TMEM without splitting.  <br /></td></tr>
<tr class="separator:a540e860f84fff6a665b296d6956e80d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>2D Graphics </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structsprite__t" id="structsprite__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structsprite__t">&#9670;&#160;</a></span>sprite_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sprite_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Sprite structure. </p>
<p>A "sprite" (as saved in a <code>.sprite</code> file) is a 2D image with metadata attached to them to facilitate drawing it onto N64.</p>
<p>Despite the name, a libdragon sprite is basically the basic format to handle assets for images. It is commonly used for handling textures, full screen images like splash screens, tile maps, font pictures, and even "real" 2D sprites.</p>
<p>If the sprite uses a color-indexed format like <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae7c884ef15b16d8bb1fe78d46aa209c4" title="Format CI4: color index 4-bit (paletted, 2 indices per byte)">FMT_CI4</a> or <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a1d1f3cf5eb79947c79274c2a353e86aa" title="Format CI8: color index 8-bit (paletted, 1 index per byte)">FMT_CI8</a>, the sprite contains also the corresponding palette.</p>
<p>To convert an image file to libdragon's sprite format, use the mksprite tool. To load a sprite into memory, use sprite_load. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a8d0f5ca9dc069850fc604107eb0f085d" name="a8d0f5ca9dc069850fc604107eb0f085d"></a>uint16_t</td>
<td class="fieldname">
width</td>
<td class="fielddoc">
Width in pixels. </td></tr>
<tr><td class="fieldtype">
<a id="a0ac6b5fe9c9aba02b62e2f1fb873dfeb" name="a0ac6b5fe9c9aba02b62e2f1fb873dfeb"></a>uint16_t</td>
<td class="fieldname">
height</td>
<td class="fielddoc">
Height in pixels. </td></tr>
<tr><td class="fieldtype">
<a id="ab7b4e3437f6005a3fdc6003d7f852502" name="ab7b4e3437f6005a3fdc6003d7f852502"></a>uint8_t</td>
<td class="fieldname">
bitdepth</td>
<td class="fielddoc">
DEPRECATED: do not use this field. Use TEX_FORMAT_BITDEPTH(sprite-&gt;format) instead. <br  />
 </td></tr>
<tr><td class="fieldtype">
<a id="a76735a6b9f1d4851817ad2262de075ba" name="a76735a6b9f1d4851817ad2262de075ba"></a>union <a class="el" href="sprite_8h.html#unionsprite__t_8____unnamed40____">sprite_t.__unnamed40__</a></td>
<td class="fieldname">
__unnamed__</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a87ec0bd7363d4cb727e3b2b72f19313f" name="a87ec0bd7363d4cb727e3b2b72f19313f"></a>uint8_t</td>
<td class="fieldname">
hslices</td>
<td class="fielddoc">
Number of horizontal sub-tiles <br  />
 </td></tr>
<tr><td class="fieldtype">
<a id="a3b1f4d3f9dd51d45993bda45a6d474d3" name="a3b1f4d3f9dd51d45993bda45a6d474d3"></a>uint8_t</td>
<td class="fieldname">
vslices</td>
<td class="fielddoc">
Number of vertical sub-tiles. </td></tr>
<tr><td class="fieldtype">
<a id="afdba8565120d2719452a1c5c30c9ecdd" name="afdba8565120d2719452a1c5c30c9ecdd"></a>uint32_t</td>
<td class="fieldname">
data[0]</td>
<td class="fielddoc">
Start of graphics data. </td></tr>
</table>

</div>
</div>
<a name="structsprite__detail__t" id="structsprite__detail__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structsprite__detail__t">&#9670;&#160;</a></span>sprite_detail_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sprite_detail_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Sprite detail texture information structure. </p>
<p>A "detail texture" is a 2D image with metadata attached to it to increase the perceived resolution of the main sprite when rendering with little to no additional TMEM usage.</p>
<p>If the sprite uses a detail texture, its information can be retreived using the sprite_get_detail_pixels function.</p>
<p>To include a detail texture to libdragon's sprite format, use the mksprite tool with &ndash;detail argument.</p>
<p><a class="el" href="rdpq__sprite_8c.html#a4455ad310d3a18a04c2ffee53dd0f944" title="Upload a sprite to TMEM, making it ready for drawing.">rdpq_sprite_upload</a> automatically uploads detail textures associated with the sprite. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aa64a020b664e48963668b8cf8a440e49" name="aa64a020b664e48963668b8cf8a440e49"></a>bool</td>
<td class="fieldname">
use_main_tex</td>
<td class="fielddoc">
Is the detail texture the same as the main surface of the sprite, used for fractal detailing. </td></tr>
<tr><td class="fieldtype">
<a id="a4f483687c8b170b6c1832f514b7f0dc7" name="a4f483687c8b170b6c1832f514b7f0dc7"></a>float</td>
<td class="fieldname">
blend_factor</td>
<td class="fielddoc">
Blend factor of the detail texture in range of 0 to 1. </td></tr>
</table>

</div>
</div>
<a name="unionsprite__t_8____unnamed40____" id="unionsprite__t_8____unnamed40____"></a>
<h2 class="memtitle"><span class="permalink"><a href="#unionsprite__t_8____unnamed40____">&#9670;&#160;</a></span>sprite_t.__unnamed40__</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union sprite_t.__unnamed40__</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a1ddcb92ade31c8fbd370001f9b29a7d9" name="a1ddcb92ade31c8fbd370001f9b29a7d9"></a>uint8_t</td>
<td class="fieldname">
format</td>
<td class="fielddoc">
DEPRECATED: do not use this field. Use sprite_get_format(sprite) instead. <br  />
 </td></tr>
<tr><td class="fieldtype">
<a id="a4e5868d676cb634aa75b125a0f741abf" name="a4e5868d676cb634aa75b125a0f741abf"></a>uint8_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
Various flags, including texture format. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a746970338ac3f8db984b4f08fc6e9a21" name="a746970338ac3f8db984b4f08fc6e9a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a746970338ac3f8db984b4f08fc6e9a21">&#9670;&#160;</a></span>sprite_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> * sprite_load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a sprite from a filesystem (eg: ROM) </p>
<p>This function loads a full sprite from a filesystem. Notice that there is no streaming support, so the file is fully loaded into RDRAM, in its final uncompressed format.</p>
<p>sprite_load internally uses the asset API (asset_load), so the sprite file is transparently uncompressed if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Filename of the sprite, including filesystem specifier. For instance: "rom:/hero.sprite" to load from DFS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sprite_t* The loaded sprite </dd></dl>

</div>
</div>
<a id="a73fe062e6e5b91224190aece57a9d5d4" name="a73fe062e6e5b91224190aece57a9d5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73fe062e6e5b91224190aece57a9d5d4">&#9670;&#160;</a></span>sprite_load_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> * sprite_load_buf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a sprite from a buffer. </p>
<p>This function loads a sprite from a buffer corresponding to sprite file data in memory. The function also performs any necessary processing to load the sprite file data.</p>
<p>sprite_load_buf functions in-place which means it does not allocate another buffer for the loaded sprite. So, sprite_free will not remove the sprite data from memory. This means that the input buffer must be freed manually after sprite_free is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the sprite file data </td></tr>
    <tr><td class="paramname">sz</td><td>Size of the sprite file buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sprite_t* The loaded sprite </dd></dl>

</div>
</div>
<a id="a768f8dbfba277e7b3cb84fc0198307ed" name="a768f8dbfba277e7b3cb84fc0198307ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768f8dbfba277e7b3cb84fc0198307ed">&#9670;&#160;</a></span>sprite_get_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a> sprite_get_format </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the sprite texture format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The texture format </dd></dl>

</div>
</div>
<a id="a53a943109546503af068fc0d1c46252d" name="a53a943109546503af068fc0d1c46252d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53a943109546503af068fc0d1c46252d">&#9670;&#160;</a></span>sprite_get_pixels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a> sprite_get_pixels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the full sprite contents. </p>
<p>This function can be used to pass a full sprite to functions accepting a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a>.</p>
<p>Notice that no memory allocations or copies are performed: the returned surface will point to the sprite contents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The surface pointing to the sprite </dd></dl>

</div>
</div>
<a id="a1b27ea3c16dcd2b151b44d2ce616fec6" name="a1b27ea3c16dcd2b151b44d2ce616fec6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b27ea3c16dcd2b151b44d2ce616fec6">&#9670;&#160;</a></span>sprite_get_lod_pixels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a> sprite_get_lod_pixels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the contents of a LOD level. </p>
<p>This function can be used to access LOD images within a sprite file. It is useful for sprites created by mksprite containing multiple mipmap levels.</p>
<p>LOD levels are indexed from 1 upward. 0 refers to the main sprite, so calling <code>sprite_get_lod_pixels(s, 0)</code> is equivalent to <code>sprite_get_pixels(s)</code>.</p>
<p>Notice that no memory allocations or copies are performed: the returned surface will point to the sprite contents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
    <tr><td class="paramname">num_level</td><td>The number of LOD level. 0 is the main sprite. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> The surface containing the data. </dd></dl>

</div>
</div>
<a id="a3a867668cd0119fe7182e992698d1193" name="a3a867668cd0119fe7182e992698d1193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a867668cd0119fe7182e992698d1193">&#9670;&#160;</a></span>sprite_get_detail_pixels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a> sprite_get_detail_pixels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__detail__t">sprite_detail_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>infoparms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to the contents of a detail texture. </p>
<p>This function can be used to access detail texture within a sprite file. It is useful for sprites created by mksprite containing one.</p>
<p>If there isn't a detail texture, the returned surface is 0.</p>
<p>Additional detail information such as factor or texparms are accessible through the filled <a class="el" href="sprite_8h.html#structsprite__detail__t" title="Sprite detail texture information structure.">sprite_detail_t</a> and <a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t" title="Texture sampling parameters for rdpq_tex_upload.">rdpq_texparms_t</a> structure. If you don't wish to use this information, pass NULL to the info argument(s).</p>
<p>Notice that no memory allocations or copies are performed: the returned surface will point to the sprite contents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
    <tr><td class="paramname">info</td><td>The detail information struct to fill if needed </td></tr>
    <tr><td class="paramname">infoparms</td><td>The detail texture sampling struct to fill if needed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> The surface containing the data. </dd></dl>

</div>
</div>
<a id="ac2569c0dd2df7c58ebe684f4d21de550" name="ac2569c0dd2df7c58ebe684f4d21de550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2569c0dd2df7c58ebe684f4d21de550">&#9670;&#160;</a></span>sprite_get_tile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="surface_8h.html#structsurface__t">surface_t</a> sprite_get_tile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> pointing to a specific tile of the spritemap. </p>
<p>A sprite can be used as a spritemap, that is a collection of multiple smaller images of equal size, called "tiles". In this case, the number of tiles is stored in the members <code>hslices</code> and <code>vslices</code> of the sprite structure.</p>
<p>This function allows to get a surface that points to the specific sub-tile, so that it can accessed directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite used as spritemap </td></tr>
    <tr><td class="paramname">h</td><td>Horizontal index of the tile to access </td></tr>
    <tr><td class="paramname">v</td><td>Vertical index of the tile to access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A surface pointing to the tile </dd></dl>

</div>
</div>
<a id="adfc7bf5e68991099a3ec86ae05d4aca9" name="adfc7bf5e68991099a3ec86ae05d4aca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc7bf5e68991099a3ec86ae05d4aca9">&#9670;&#160;</a></span>sprite_get_palette()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t * sprite_get_palette </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the sprite palette (if any) </p>
<p>A sprite can also contain a palette, in case the sprite data is color-indexed (that is, the format is either <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae7c884ef15b16d8bb1fe78d46aa209c4" title="Format CI4: color index 4-bit (paletted, 2 indices per byte)">FMT_CI4</a> or <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a1d1f3cf5eb79947c79274c2a353e86aa" title="Format CI8: color index 8-bit (paletted, 1 index per byte)">FMT_CI8</a>).</p>
<p>This function returns a pointer to the raw palette data contained in the sprite.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the palette data, or NULL if the sprite does not have a palette </dd></dl>

</div>
</div>
<a id="aeafae923dfd53e64c533e40b68dfb012" name="aeafae923dfd53e64c533e40b68dfb012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafae923dfd53e64c533e40b68dfb012">&#9670;&#160;</a></span>sprite_get_texparms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sprite_get_texparms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rdpq__tex_8h.html#structrdpq__texparms__t">rdpq_texparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a copy of the RDP texparms, optionally stored within the sprite. </p>
<p>This function allows to obtain the RDP texparms structure stored within the sprite, if any. This structure is used by the RDP to set texture properties such as wrapping, mirroring, etc. It can be added to the sprite via the mksprite tool, using the <code>--texparms</code> option.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
    <tr><td class="paramname">parms</td><td>The texparms structure to fill </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the sprite contain RDP texparms, false otherwise </dd></dl>

</div>
</div>
<a id="a39f3cd068455a50b3f53306c5ba985a8" name="a39f3cd068455a50b3f53306c5ba985a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f3cd068455a50b3f53306c5ba985a8">&#9670;&#160;</a></span>sprite_get_lod_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sprite_get_lod_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of LOD levels stored within the sprite (including the main image). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of LOD levels </dd></dl>

</div>
</div>
<a id="a540e860f84fff6a665b296d6956e80d3" name="a540e860f84fff6a665b296d6956e80d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a540e860f84fff6a665b296d6956e80d3">&#9670;&#160;</a></span>sprite_fits_tmem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sprite_fits_tmem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sprite_8h.html#structsprite__t">sprite_t</a> *&#160;</td>
          <td class="paramname"><em>sprite</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if the sprite fits in TMEM without splitting. </p>
<p>This function returns true if the sprite can be fully uploaded in TMEM (including all its LODs, detail texture and palettes).</p>
<p>When working on 3D graphics, each texture must fit into RDP TMEM (4 KiB), otherwise it cannot be used. All sprites that are meant to be used as textures should fit in TMEM.</p>
<p>In case of 2D graphics, it is more common to have images of arbitrary size. They can be drawn with <a class="el" href="rdpq__sprite_8c.html#ab9e9585ca159243d7ccae04c7ca38837" title="Blit a sprite to the active framebuffer.">rdpq_sprite_blit</a> (accelerated) or <a class="el" href="group__graphics.html#ga60d3b47bfec29bb6b9bacf84fe7bf1d6" title="Draw a sprite to a display context.">graphics_draw_sprite</a> (CPU) without specific limits (the RDP accelerated version does internally need to split the sprite in multiple parts, but that is indeed possible).</p>
<p>This function is mostly for debugging purposes, as it can help validating whether a sprite can be used as a texture or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sprite</td><td>The sprite to access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the sprite fits TMEM, false otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 13 2024 18:46:35 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
