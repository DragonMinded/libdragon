<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: DragonFS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">DragonFS<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__asset.html">Asset Subsystem</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>DragonFS filesystem implementation and newlib hooks.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:dragonfs_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8c.html">dragonfs.c</a></td></tr>
<tr class="memdesc:dragonfs_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">DragonFS. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dfsinternal_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsinternal_8h.html">dfsinternal.h</a></td></tr>
<tr class="memdesc:dfsinternal_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal DFS Definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dragonfs_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dragonfs_8h.html">dragonfs.h</a></td></tr>
<tr class="memdesc:dragonfs_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">DragonFS. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structdirectory__entry"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#structdirectory__entry">directory_entry_t</a></td></tr>
<tr class="memdesc:structdirectory__entry"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a directory entry.  <a href="group__dfs.html#structdirectory__entry">More...</a><br /></td></tr>
<tr class="separator:structdirectory__entry"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structopen__file__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#structopen__file__t">open_file_t</a></td></tr>
<tr class="memdesc:structopen__file__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open file handle structure.  <a href="group__dfs.html#structopen__file__t">More...</a><br /></td></tr>
<tr class="separator:structopen__file__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8fa12767c574a2f58b937bf32ca0f180"><td class="memItemLeft" align="right" valign="top"><a id="ga8fa12767c574a2f58b937bf32ca0f180" name="ga8fa12767c574a2f58b937bf32ca0f180"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROOT_FLAGS</b>&#160;&#160;&#160;0xFFFFFFFF</td></tr>
<tr class="memdesc:ga8fa12767c574a2f58b937bf32ca0f180"><td class="mdescLeft">&#160;</td><td class="mdescRight">The special ID value in <a class="el" href="group__dfs.html#a57e42046242d6298d88a50a15614f6f9" title="File size and flags. See FLAGS_FILE, FLAGS_DIR and FLAGS_EOF.">directory_entry::flags</a> defining the root sector. <br /></td></tr>
<tr class="separator:ga8fa12767c574a2f58b937bf32ca0f180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5edd0bfe529d35c9c2b9405f170a861f"><td class="memItemLeft" align="right" valign="top"><a id="ga5edd0bfe529d35c9c2b9405f170a861f" name="ga5edd0bfe529d35c9c2b9405f170a861f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROOT_NEXT_ENTRY</b>&#160;&#160;&#160;0xDEADBEEF</td></tr>
<tr class="memdesc:ga5edd0bfe529d35c9c2b9405f170a861f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The special ID value in <a class="el" href="group__dfs.html#a72bcf7e7400afd36488dbe14e50d2cde" title="Offset to next directory entry.">directory_entry::next_entry</a> defining the root sector. <br /></td></tr>
<tr class="separator:ga5edd0bfe529d35c9c2b9405f170a861f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad001da02ced4ad61e2f7e152fd33a5b8"><td class="memItemLeft" align="right" valign="top"><a id="gad001da02ced4ad61e2f7e152fd33a5b8" name="gad001da02ced4ad61e2f7e152fd33a5b8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROOT_PATH</b>&#160;&#160;&#160;&quot;DragonFS 2.0&quot;</td></tr>
<tr class="memdesc:gad001da02ced4ad61e2f7e152fd33a5b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special path value in <a class="el" href="group__dfs.html#ada5908f5c2a33e7ab5ff1d10a0e088d6" title="The file or directory name.">directory_entry::path</a> defining the root sector. <br /></td></tr>
<tr class="separator:gad001da02ced4ad61e2f7e152fd33a5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa35bad1e92008da628f27b2f6bb270aa"><td class="memItemLeft" align="right" valign="top"><a id="gaa35bad1e92008da628f27b2f6bb270aa" name="gaa35bad1e92008da628f27b2f6bb270aa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SECTOR_SIZE</b>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:gaa35bad1e92008da628f27b2f6bb270aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of a sector. <br /></td></tr>
<tr class="separator:gaa35bad1e92008da628f27b2f6bb270aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5b4142139985c33ebf12f4dacf6f61f"><td class="memItemLeft" align="right" valign="top"><a id="gaa5b4142139985c33ebf12f4dacf6f61f" name="gaa5b4142139985c33ebf12f4dacf6f61f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SECTOR_PAYLOAD</b>&#160;&#160;&#160;252</td></tr>
<tr class="memdesc:gaa5b4142139985c33ebf12f4dacf6f61f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of a sector payload. <br /></td></tr>
<tr class="separator:gaa5b4142139985c33ebf12f4dacf6f61f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d81e04e879a844f4d733a3982bf85ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga1d81e04e879a844f4d733a3982bf85ee">DFS_DEFAULT_LOCATION</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga1d81e04e879a844f4d733a3982bf85ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default filesystem location.  <a href="group__dfs.html#ga1d81e04e879a844f4d733a3982bf85ee">More...</a><br /></td></tr>
<tr class="separator:ga1d81e04e879a844f4d733a3982bf85ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4777ede3ed2173c78fab7798ad6eddb"><td class="memItemLeft" align="right" valign="top"><a id="gae4777ede3ed2173c78fab7798ad6eddb" name="gae4777ede3ed2173c78fab7798ad6eddb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OPEN_FILES</b>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:gae4777ede3ed2173c78fab7798ad6eddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum open files in DragonFS. <br /></td></tr>
<tr class="separator:gae4777ede3ed2173c78fab7798ad6eddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc9794f655f61a3246ba3fd5c9c67e14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#gacc9794f655f61a3246ba3fd5c9c67e14">MAX_FILENAME_LEN</a>&#160;&#160;&#160;243</td></tr>
<tr class="memdesc:gacc9794f655f61a3246ba3fd5c9c67e14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum filename length.  <a href="group__dfs.html#gacc9794f655f61a3246ba3fd5c9c67e14">More...</a><br /></td></tr>
<tr class="separator:gacc9794f655f61a3246ba3fd5c9c67e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae77323fbbbedb3ec4f495c7156b0344f"><td class="memItemLeft" align="right" valign="top"><a id="gae77323fbbbedb3ec4f495c7156b0344f" name="gae77323fbbbedb3ec4f495c7156b0344f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DIRECTORY_DEPTH</b>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:gae77323fbbbedb3ec4f495c7156b0344f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum depth of directories supported. <br /></td></tr>
<tr class="separator:gae77323fbbbedb3ec4f495c7156b0344f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga935cf104eafb75f357c5469f0e2e4c95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga935cf104eafb75f357c5469f0e2e4c95">FILETYPE</a>(x)&#160;&#160;&#160;((x) &amp; 3)</td></tr>
<tr class="memdesc:ga935cf104eafb75f357c5469f0e2e4c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to extract the file type from a DragonFS file flag.  <a href="group__dfs.html#ga935cf104eafb75f357c5469f0e2e4c95">More...</a><br /></td></tr>
<tr class="separator:ga935cf104eafb75f357c5469f0e2e4c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gadf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__dfs.html#ggadf764cbdea00d65edcd07bb9953ad2b7aa30e5e88c091325c9384d853412526f7">WALK_CHDIR</a>
, <a class="el" href="group__dfs.html#ggadf764cbdea00d65edcd07bb9953ad2b7a15241e0f0717e074c00737e79e411351">WALK_OPEN</a>
 }</td></tr>
<tr class="memdesc:gadf764cbdea00d65edcd07bb9953ad2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory walking flags.  <a href="group__dfs.html#gadf764cbdea00d65edcd07bb9953ad2b7">More...</a><br /></td></tr>
<tr class="separator:gadf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__dfs.html#gga99fb83031ce9923c84392b4e92f956b5af173f42b16daa16262e56c2e12fb11b3">TYPE_ANY</a>
, <a class="el" href="group__dfs.html#gga99fb83031ce9923c84392b4e92f956b5a30351c278162a6e7dbdb10570ae8782e">TYPE_FILE</a>
, <a class="el" href="group__dfs.html#gga99fb83031ce9923c84392b4e92f956b5a5b5f3036729530d8011e6f1ea2207aac">TYPE_DIR</a>
 }</td></tr>
<tr class="memdesc:ga99fb83031ce9923c84392b4e92f956b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory walking return flags.  <a href="group__dfs.html#ga99fb83031ce9923c84392b4e92f956b5">More...</a><br /></td></tr>
<tr class="separator:ga99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4acea40a2214dee556c7491e5c24e0dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga4acea40a2214dee556c7491e5c24e0dc">dfs_chdir</a> (const char *const path)</td></tr>
<tr class="memdesc:ga4acea40a2214dee556c7491e5c24e0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change directories to the specified path. <br  />
  <a href="group__dfs.html#ga4acea40a2214dee556c7491e5c24e0dc">More...</a><br /></td></tr>
<tr class="separator:ga4acea40a2214dee556c7491e5c24e0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga33dacb81cbf0f03a8588ffa8d9ee86ac">dfs_dir_findfirst</a> (const char *const path, char *buf)</td></tr>
<tr class="memdesc:ga33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the first file or directory in a directory listing.  <a href="group__dfs.html#ga33dacb81cbf0f03a8588ffa8d9ee86ac">More...</a><br /></td></tr>
<tr class="separator:ga33dacb81cbf0f03a8588ffa8d9ee86ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#gaaf2eb04e1d1e8e9ed8733b88e41dc7e3">dfs_dir_findnext</a> (char *buf)</td></tr>
<tr class="memdesc:gaaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the next file or directory in a directory listing.  <a href="group__dfs.html#gaaf2eb04e1d1e8e9ed8733b88e41dc7e3">More...</a><br /></td></tr>
<tr class="separator:gaaf2eb04e1d1e8e9ed8733b88e41dc7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b32978567d57be77b43b6ce537cf620"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620">dfs_open</a> (const char *const path)</td></tr>
<tr class="memdesc:ga5b32978567d57be77b43b6ce537cf620"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file given a path.  <a href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620">More...</a><br /></td></tr>
<tr class="separator:ga5b32978567d57be77b43b6ce537cf620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac645811e9856f35930238d945dc48e9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#gac645811e9856f35930238d945dc48e9f">dfs_close</a> (uint32_t handle)</td></tr>
<tr class="memdesc:gac645811e9856f35930238d945dc48e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an already open file handle.  <a href="group__dfs.html#gac645811e9856f35930238d945dc48e9f">More...</a><br /></td></tr>
<tr class="separator:gac645811e9856f35930238d945dc48e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11e474fe0dcd37e0061ad6853c7f996d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga11e474fe0dcd37e0061ad6853c7f996d">dfs_seek</a> (uint32_t handle, int offset, int origin)</td></tr>
<tr class="memdesc:ga11e474fe0dcd37e0061ad6853c7f996d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seek to an offset in the file.  <a href="group__dfs.html#ga11e474fe0dcd37e0061ad6853c7f996d">More...</a><br /></td></tr>
<tr class="separator:ga11e474fe0dcd37e0061ad6853c7f996d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3350daf670c94a8ea241bafe2c9b6b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#gab3350daf670c94a8ea241bafe2c9b6b5">dfs_tell</a> (uint32_t handle)</td></tr>
<tr class="memdesc:gab3350daf670c94a8ea241bafe2c9b6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current offset into a file.  <a href="group__dfs.html#gab3350daf670c94a8ea241bafe2c9b6b5">More...</a><br /></td></tr>
<tr class="separator:gab3350daf670c94a8ea241bafe2c9b6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c0acaa1af10520da638633ab73b9287"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga7c0acaa1af10520da638633ab73b9287">dfs_read</a> (void *const buf, int size, int count, uint32_t handle)</td></tr>
<tr class="memdesc:ga7c0acaa1af10520da638633ab73b9287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a file.  <a href="group__dfs.html#ga7c0acaa1af10520da638633ab73b9287">More...</a><br /></td></tr>
<tr class="separator:ga7c0acaa1af10520da638633ab73b9287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16adfb1647241b51f362517c3992f05e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga16adfb1647241b51f362517c3992f05e">dfs_size</a> (uint32_t handle)</td></tr>
<tr class="memdesc:ga16adfb1647241b51f362517c3992f05e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file size of an open file.  <a href="group__dfs.html#ga16adfb1647241b51f362517c3992f05e">More...</a><br /></td></tr>
<tr class="separator:ga16adfb1647241b51f362517c3992f05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b526624aebcf3d93a825edeb1ae4e63"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga8b526624aebcf3d93a825edeb1ae4e63">dfs_rom_addr</a> (const char *path)</td></tr>
<tr class="memdesc:ga8b526624aebcf3d93a825edeb1ae4e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the physical address of a file (in ROM space)  <a href="group__dfs.html#ga8b526624aebcf3d93a825edeb1ae4e63">More...</a><br /></td></tr>
<tr class="separator:ga8b526624aebcf3d93a825edeb1ae4e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf21f4f45f32308ee7769f71224a10616"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#gaf21f4f45f32308ee7769f71224a10616">dfs_eof</a> (uint32_t handle)</td></tr>
<tr class="memdesc:gaf21f4f45f32308ee7769f71224a10616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether the end of file has been reached.  <a href="group__dfs.html#gaf21f4f45f32308ee7769f71224a10616">More...</a><br /></td></tr>
<tr class="separator:gaf21f4f45f32308ee7769f71224a10616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ca0762367965bd8a6dbbe07b7ad3022"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfs.html#ga7ca0762367965bd8a6dbbe07b7ad3022">dfs_init</a> (uint32_t base_fs_loc)</td></tr>
<tr class="memdesc:ga7ca0762367965bd8a6dbbe07b7ad3022"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the filesystem.  <a href="group__dfs.html#ga7ca0762367965bd8a6dbbe07b7ad3022">More...</a><br /></td></tr>
<tr class="separator:ga7ca0762367965bd8a6dbbe07b7ad3022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab45d1919e34900b565922ca14b12088d"><td class="memItemLeft" align="right" valign="top"><a id="gab45d1919e34900b565922ca14b12088d" name="gab45d1919e34900b565922ca14b12088d"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>dfs_strerror</b> (int error)</td></tr>
<tr class="memdesc:gab45d1919e34900b565922ca14b12088d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert DFS error code into an error string. <br /></td></tr>
<tr class="separator:gab45d1919e34900b565922ca14b12088d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">DragonFS Return values</h2></td></tr>
<tr class="memitem:ga22544ba337d1670f3269157e43519c0b"><td class="memItemLeft" align="right" valign="top"><a id="ga22544ba337d1670f3269157e43519c0b" name="ga22544ba337d1670f3269157e43519c0b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_ESUCCESS</b>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga22544ba337d1670f3269157e43519c0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Success. <br /></td></tr>
<tr class="separator:ga22544ba337d1670f3269157e43519c0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab00a5df0dfaae4393622e700b4e2ceae"><td class="memItemLeft" align="right" valign="top"><a id="gab00a5df0dfaae4393622e700b4e2ceae" name="gab00a5df0dfaae4393622e700b4e2ceae"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_EBADINPUT</b>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:gab00a5df0dfaae4393622e700b4e2ceae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input parameters invalid. <br /></td></tr>
<tr class="separator:gab00a5df0dfaae4393622e700b4e2ceae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8274880106fc107997c77d260c41f529"><td class="memItemLeft" align="right" valign="top"><a id="ga8274880106fc107997c77d260c41f529" name="ga8274880106fc107997c77d260c41f529"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_ENOFILE</b>&#160;&#160;&#160;-2</td></tr>
<tr class="memdesc:ga8274880106fc107997c77d260c41f529"><td class="mdescLeft">&#160;</td><td class="mdescRight">File does not exist. <br /></td></tr>
<tr class="separator:ga8274880106fc107997c77d260c41f529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga536bec7130d9388a356c133a497f33c9"><td class="memItemLeft" align="right" valign="top"><a id="ga536bec7130d9388a356c133a497f33c9" name="ga536bec7130d9388a356c133a497f33c9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_EBADFS</b>&#160;&#160;&#160;-3</td></tr>
<tr class="memdesc:ga536bec7130d9388a356c133a497f33c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bad filesystem. <br /></td></tr>
<tr class="separator:ga536bec7130d9388a356c133a497f33c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46a37c8e682a4f9b9c379a86e404cb65"><td class="memItemLeft" align="right" valign="top"><a id="ga46a37c8e682a4f9b9c379a86e404cb65" name="ga46a37c8e682a4f9b9c379a86e404cb65"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_ENFILE</b>&#160;&#160;&#160;-4</td></tr>
<tr class="memdesc:ga46a37c8e682a4f9b9c379a86e404cb65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Too many open files. <br /></td></tr>
<tr class="separator:ga46a37c8e682a4f9b9c379a86e404cb65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04d1fa223eec6ec3a9ae0c30b0196589"><td class="memItemLeft" align="right" valign="top"><a id="ga04d1fa223eec6ec3a9ae0c30b0196589" name="ga04d1fa223eec6ec3a9ae0c30b0196589"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DFS_EBADHANDLE</b>&#160;&#160;&#160;-5</td></tr>
<tr class="memdesc:ga04d1fa223eec6ec3a9ae0c30b0196589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalid file handle. <br /></td></tr>
<tr class="separator:ga04d1fa223eec6ec3a9ae0c30b0196589"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">DragonFS file type flags</h2></td></tr>
<tr class="memitem:ga40f46638c929774a7c8867451487239f"><td class="memItemLeft" align="right" valign="top"><a id="ga40f46638c929774a7c8867451487239f" name="ga40f46638c929774a7c8867451487239f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FLAGS_FILE</b>&#160;&#160;&#160;0x0</td></tr>
<tr class="memdesc:ga40f46638c929774a7c8867451487239f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a file entry. <br /></td></tr>
<tr class="separator:ga40f46638c929774a7c8867451487239f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72132c67f7a158fce46a1113c0b0e7eb"><td class="memItemLeft" align="right" valign="top"><a id="ga72132c67f7a158fce46a1113c0b0e7eb" name="ga72132c67f7a158fce46a1113c0b0e7eb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FLAGS_DIR</b>&#160;&#160;&#160;0x1</td></tr>
<tr class="memdesc:ga72132c67f7a158fce46a1113c0b0e7eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a directory entry. <br /></td></tr>
<tr class="separator:ga72132c67f7a158fce46a1113c0b0e7eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b6222e558984bbd372129daf4d0f6ee"><td class="memItemLeft" align="right" valign="top"><a id="ga4b6222e558984bbd372129daf4d0f6ee" name="ga4b6222e558984bbd372129daf4d0f6ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FLAGS_EOF</b>&#160;&#160;&#160;0x2</td></tr>
<tr class="memdesc:ga4b6222e558984bbd372129daf4d0f6ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the end of a directory list. <br /></td></tr>
<tr class="separator:ga4b6222e558984bbd372129daf4d0f6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >DragonFS filesystem implementation and newlib hooks. </p>
<p >DragonFS is a read only ROM filesystem for the N64. It provides an interface that homebrew developers can use to load resources from cartridge space that were not available at compile time. This can mean sprites or other game assets, or the filesystem can be appended at a later time if the homebrew developer wishes end users to be able to insert custom levels, music or other assets. It is loosely based off of FAT with consideration into application and limitations of the N64.</p>
<p >The filesystem can be generated using 'mkdfs' which is included in the 'tools' directory of libdragon. Due to the read-only nature, DFS does not support empty files or empty directories. Attempting to create a filesystem with either of these using 'mkdfs' will result in an error. If a filesystem contains either empty files or empty directories, the result of manipulating the filesystem is undefined.</p>
<p >DragonFS does not support writing, renaming or symlinking of files. It supports only file and directory types.</p>
<p >DFS files have a maximum size of 256 MiB. Directories can have an unlimited number of files in them. Each token (separated by a / in the path) can be 243 characters maximum. Directories can be 100 levels deep at maximum. There can be 4 files open simultaneously.</p>
<p >When DFS is initialized, it will register itself with newlib using 'rom:/' as a prefix. Files can be accessed either with standard POSIX functions (open, fopen) using the 'rom:/' prefix or the lower-level DFS API calls without prefix. In most cases, it is not necessary to use the DFS API directly, given that the standard C functions are more comprehensive. Files can be opened using both sets of API calls simultaneously as long as no more than four files are open at any one time.</p>
<p >DragonFS does not support file compression; if you want to compress your assets, use the asset API (<a class="el" href="asset_8h.html#abfc5939446d9920b884df034e89428a9" title="Load an asset file (possibly uncompressing it)">asset_load</a> / <a class="el" href="asset_8h.html#ac731b2beb346c99f36fa8f355fb84509" title="Open an asset file for reading (with transparent decompression)">asset_fopen</a>). </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structdirectory__entry" id="structdirectory__entry"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structdirectory__entry">&#9670;&nbsp;</a></span>directory_entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct directory_entry</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Representation of a directory entry. </p>
<p >Type definition. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a72bcf7e7400afd36488dbe14e50d2cde" name="a72bcf7e7400afd36488dbe14e50d2cde"></a>uint32_t</td>
<td class="fieldname">
next_entry</td>
<td class="fielddoc">
Offset to next directory entry. </td></tr>
<tr><td class="fieldtype">
<a id="a57e42046242d6298d88a50a15614f6f9" name="a57e42046242d6298d88a50a15614f6f9"></a>uint32_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
File size and flags. See <a class="el" href="group__dfs.html#ga40f46638c929774a7c8867451487239f" title="This is a file entry.">FLAGS_FILE</a>, <a class="el" href="group__dfs.html#ga72132c67f7a158fce46a1113c0b0e7eb" title="This is a directory entry.">FLAGS_DIR</a> and <a class="el" href="group__dfs.html#ga4b6222e558984bbd372129daf4d0f6ee" title="This is the end of a directory list.">FLAGS_EOF</a>. </td></tr>
<tr><td class="fieldtype">
<a id="ada5908f5c2a33e7ab5ff1d10a0e088d6" name="ada5908f5c2a33e7ab5ff1d10a0e088d6"></a>char</td>
<td class="fieldname">
path[<a class="el" href="group__dfs.html#gacc9794f655f61a3246ba3fd5c9c67e14">MAX_FILENAME_LEN</a>+1]</td>
<td class="fielddoc">
The file or directory name. </td></tr>
<tr><td class="fieldtype">
<a id="a747d34ff6a7415f9d56a9cf2cc354503" name="a747d34ff6a7415f9d56a9cf2cc354503"></a>uint32_t</td>
<td class="fieldname">
file_pointer</td>
<td class="fielddoc">
Offset to start sector of the file. </td></tr>
</table>

</div>
</div>
<a name="structopen__file__t" id="structopen__file__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structopen__file__t">&#9670;&nbsp;</a></span>open_file_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct open_file_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Open file handle structure. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aa78fc499e91f0a2fbfacfa7f167c8f94" name="aa78fc499e91f0a2fbfacfa7f167c8f94"></a>uint8_t</td>
<td class="fieldname">
cached_data[512]</td>
<td class="fielddoc">
Cached data to speed up small reads. <p >We want this buffer to be 8-byte aligned for DMA, but also 16-byte aligned so that it doesn't share cachelines with other members of the structure, so it's easier to handle coherency. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae0059c0f91fe71da66584470a30fd8a0" name="ae0059c0f91fe71da66584470a30fd8a0"></a>uint32_t</td>
<td class="fieldname">
cached_loc</td>
<td class="fielddoc">
location of the cached data </td></tr>
<tr><td class="fieldtype">
<a id="ad78cc43a1c22a246771e0bb868016336" name="ad78cc43a1c22a246771e0bb868016336"></a>uint32_t</td>
<td class="fieldname">
handle</td>
<td class="fielddoc">
The unique file handle to refer to this file by. </td></tr>
<tr><td class="fieldtype">
<a id="ac68ef47138956a1685d11820c9ef9869" name="ac68ef47138956a1685d11820c9ef9869"></a>uint32_t</td>
<td class="fieldname">
size</td>
<td class="fielddoc">
The size in bytes of this file. </td></tr>
<tr><td class="fieldtype">
<a id="a011176dcc2349b1415d49c33b22ff625" name="a011176dcc2349b1415d49c33b22ff625"></a>uint32_t</td>
<td class="fieldname">
loc</td>
<td class="fielddoc">
The offset of the current location in the file. </td></tr>
<tr><td class="fieldtype">
<a id="a5a6b9ed326d780740246d5b4bc61166b" name="a5a6b9ed326d780740246d5b4bc61166b"></a>uint32_t</td>
<td class="fieldname">
cart_start_loc</td>
<td class="fielddoc">
The offset within the filesystem where the file is stored. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga1d81e04e879a844f4d733a3982bf85ee" name="ga1d81e04e879a844f4d733a3982bf85ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d81e04e879a844f4d733a3982bf85ee">&#9670;&nbsp;</a></span>DFS_DEFAULT_LOCATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFS_DEFAULT_LOCATION&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default filesystem location. </p>
<p >The default value 0 instruct <a class="el" href="group__dfs.html#ga7ca0762367965bd8a6dbbe07b7ad3022" title="Initialize the filesystem.">dfs_init</a> to search for the DFS image within the rompak. </p>

</div>
</div>
<a id="gacc9794f655f61a3246ba3fd5c9c67e14" name="gacc9794f655f61a3246ba3fd5c9c67e14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc9794f655f61a3246ba3fd5c9c67e14">&#9670;&nbsp;</a></span>MAX_FILENAME_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FILENAME_LEN&#160;&#160;&#160;243</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum filename length. </p>
<p >This value is due to the direcory structure </p>

</div>
</div>
<a id="ga935cf104eafb75f357c5469f0e2e4c95" name="ga935cf104eafb75f357c5469f0e2e4c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga935cf104eafb75f357c5469f0e2e4c95">&#9670;&nbsp;</a></span>FILETYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILETYPE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;((x) &amp; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro to extract the file type from a DragonFS file flag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>File flags from DFS entry</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file type flag </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gadf764cbdea00d65edcd07bb9953ad2b7" name="gadf764cbdea00d65edcd07bb9953ad2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf764cbdea00d65edcd07bb9953ad2b7">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory walking flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggadf764cbdea00d65edcd07bb9953ad2b7aa30e5e88c091325c9384d853412526f7" name="ggadf764cbdea00d65edcd07bb9953ad2b7aa30e5e88c091325c9384d853412526f7"></a>WALK_CHDIR&#160;</td><td class="fielddoc"><p >Walk the directory structure for the purpose of changing directories. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggadf764cbdea00d65edcd07bb9953ad2b7a15241e0f0717e074c00737e79e411351" name="ggadf764cbdea00d65edcd07bb9953ad2b7a15241e0f0717e074c00737e79e411351"></a>WALK_OPEN&#160;</td><td class="fielddoc"><p >Walk the directory structure for the purpose of opening a file or directory. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga99fb83031ce9923c84392b4e92f956b5" name="ga99fb83031ce9923c84392b4e92f956b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99fb83031ce9923c84392b4e92f956b5">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory walking return flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga99fb83031ce9923c84392b4e92f956b5af173f42b16daa16262e56c2e12fb11b3" name="gga99fb83031ce9923c84392b4e92f956b5af173f42b16daa16262e56c2e12fb11b3"></a>TYPE_ANY&#160;</td><td class="fielddoc"><p >Return any file or directory found. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga99fb83031ce9923c84392b4e92f956b5a30351c278162a6e7dbdb10570ae8782e" name="gga99fb83031ce9923c84392b4e92f956b5a30351c278162a6e7dbdb10570ae8782e"></a>TYPE_FILE&#160;</td><td class="fielddoc"><p >Return a file from directory walk. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga99fb83031ce9923c84392b4e92f956b5a5b5f3036729530d8011e6f1ea2207aac" name="gga99fb83031ce9923c84392b4e92f956b5a5b5f3036729530d8011e6f1ea2207aac"></a>TYPE_DIR&#160;</td><td class="fielddoc"><p >Return a directory from a directory walk. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4acea40a2214dee556c7491e5c24e0dc" name="ga4acea40a2214dee556c7491e5c24e0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4acea40a2214dee556c7491e5c24e0dc">&#9670;&nbsp;</a></span>dfs_chdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_chdir </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change directories to the specified path. <br  />
 </p>
<p >Supports absolute and relative</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Relative or absolute path to change directories to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="ga33dacb81cbf0f03a8588ffa8d9ee86ac" name="ga33dacb81cbf0f03a8588ffa8d9ee86ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33dacb81cbf0f03a8588ffa8d9ee86ac">&#9670;&nbsp;</a></span>dfs_dir_findfirst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_dir_findfirst </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the first file or directory in a directory listing. </p>
<p >Supports absolute and relative. If the path is invalid, returns a negative DFS_errno. If a file or directory is found, returns the flags of the entry and copies the name into buf.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path to look for files in </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to place the name of the file or directory found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags (<a class="el" href="group__dfs.html#ga40f46638c929774a7c8867451487239f" title="This is a file entry.">FLAGS_FILE</a>, <a class="el" href="group__dfs.html#ga72132c67f7a158fce46a1113c0b0e7eb" title="This is a directory entry.">FLAGS_DIR</a>, <a class="el" href="group__dfs.html#ga4b6222e558984bbd372129daf4d0f6ee" title="This is the end of a directory list.">FLAGS_EOF</a>) or a negative value on error. </dd></dl>

</div>
</div>
<a id="gaaf2eb04e1d1e8e9ed8733b88e41dc7e3" name="gaaf2eb04e1d1e8e9ed8733b88e41dc7e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf2eb04e1d1e8e9ed8733b88e41dc7e3">&#9670;&nbsp;</a></span>dfs_dir_findnext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_dir_findnext </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the next file or directory in a directory listing. </p>
<dl class="section note"><dt>Note</dt><dd>Should be called after doing a <a class="el" href="group__dfs.html#ga33dacb81cbf0f03a8588ffa8d9ee86ac" title="Find the first file or directory in a directory listing.">dfs_dir_findfirst</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to place the name of the next file or directory found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags (<a class="el" href="group__dfs.html#ga40f46638c929774a7c8867451487239f" title="This is a file entry.">FLAGS_FILE</a>, <a class="el" href="group__dfs.html#ga72132c67f7a158fce46a1113c0b0e7eb" title="This is a directory entry.">FLAGS_DIR</a>, <a class="el" href="group__dfs.html#ga4b6222e558984bbd372129daf4d0f6ee" title="This is the end of a directory list.">FLAGS_EOF</a>) or a negative value on error. </dd></dl>

</div>
</div>
<a id="ga5b32978567d57be77b43b6ce537cf620" name="ga5b32978567d57be77b43b6ce537cf620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b32978567d57be77b43b6ce537cf620">&#9670;&nbsp;</a></span>dfs_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file given a path. </p>
<p >Check if we have any free file handles, and if we do, try to open the file specified. Supports absolute and relative paths</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Path of the file to open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid file handle to reference the file by or a negative error on failure. </dd></dl>

</div>
</div>
<a id="gac645811e9856f35930238d945dc48e9f" name="gac645811e9856f35930238d945dc48e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac645811e9856f35930238d945dc48e9f">&#9670;&nbsp;</a></span>dfs_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_close </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an already open file handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="ga11e474fe0dcd37e0061ad6853c7f996d" name="ga11e474fe0dcd37e0061ad6853c7f996d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11e474fe0dcd37e0061ad6853c7f996d">&#9670;&nbsp;</a></span>dfs_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_seek </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>origin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seek to an offset in the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>A byte offset from the origin to seek from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origin</td><td>An offset to seek from. Either <code>SEEK_SET</code>, <code>SEEK_CUR</code> or <code>SEEK_END</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative value on error. </dd></dl>

</div>
</div>
<a id="gab3350daf670c94a8ea241bafe2c9b6b5" name="gab3350daf670c94a8ea241bafe2c9b6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3350daf670c94a8ea241bafe2c9b6b5">&#9670;&nbsp;</a></span>dfs_tell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_tell </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current offset into a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current byte offset into a file or a negative error on failure. </dd></dl>

</div>
</div>
<a id="ga7c0acaa1af10520da638633ab73b9287" name="ga7c0acaa1af10520da638633ab73b9287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c0acaa1af10520da638633ab73b9287">&#9670;&nbsp;</a></span>dfs_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_read </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer to read into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of each element to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of elements to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The actual number of bytes read or a negative value on failure. </dd></dl>

</div>
</div>
<a id="ga16adfb1647241b51f362517c3992f05e" name="ga16adfb1647241b51f362517c3992f05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16adfb1647241b51f362517c3992f05e">&#9670;&nbsp;</a></span>dfs_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file size of an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file size in bytes or a negative value on failure. </dd></dl>

</div>
</div>
<a id="ga8b526624aebcf3d93a825edeb1ae4e63" name="ga8b526624aebcf3d93a825edeb1ae4e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b526624aebcf3d93a825edeb1ae4e63">&#9670;&nbsp;</a></span>dfs_rom_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dfs_rom_addr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the physical address of a file (in ROM space) </p>
<p >This function should be used for highly-specialized, high-performance use cases. Using dfs_open / dfs_read is generally acceptable performance-wise, and is easier to use rather than managing direct access to PI space.</p>
<p >Direct access to ROM data must go through io_read or dma_read. Do not dereference directly as the console might hang if the PI is busy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Name of the file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the physical address of the file body, or 0 if the file was not found. </dd></dl>

</div>
</div>
<a id="gaf21f4f45f32308ee7769f71224a10616" name="gaf21f4f45f32308ee7769f71224a10616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf21f4f45f32308ee7769f71224a10616">&#9670;&nbsp;</a></span>dfs_eof()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_eof </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return whether the end of file has been reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>A valid file handle as returned from <a class="el" href="group__dfs.html#ga5b32978567d57be77b43b6ce537cf620" title="Open a file given a path.">dfs_open</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the end of file is reached, 0 if not, and a negative value on error. </dd></dl>

</div>
</div>
<a id="ga7ca0762367965bd8a6dbbe07b7ad3022" name="ga7ca0762367965bd8a6dbbe07b7ad3022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ca0762367965bd8a6dbbe07b7ad3022">&#9670;&nbsp;</a></span>dfs_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfs_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>base_fs_loc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the filesystem. </p>
<p >Given a base offset where the filesystem should be found, this function will initialize the filesystem to read from cartridge space. This function will also register DragonFS with newlib so that standard POSIX/C file operations work with DragonFS, using the "rom:/" prefix".</p>
<p >The function needs to know where the DFS image is located within the cartridge space. To simplify this, you can pass <a class="el" href="group__dfs.html#ga1d81e04e879a844f4d733a3982bf85ee" title="Default filesystem location.">DFS_DEFAULT_LOCATION</a> which tells <a class="el" href="group__dfs.html#ga7ca0762367965bd8a6dbbe07b7ad3022" title="Initialize the filesystem.">dfs_init</a> to search for the DFS image by itself, using the rompak TOC (see <a class="el" href="rompak__internal_8h.html" title="ROM bundle support.">rompak_internal.h</a>). Most users should use this option.</p>
<p >Otherwise, if the ROM cannot be built with a rompak TOC for some reason, a virtual address should be passed. This is normally 0xB0000000 + the offset used when building your ROM + the size of the header file used (typically 0x1000).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">base_fs_loc</td><td>Virtual address in cartridge space at which to find the filesystem, or DFS_DEFAULT_LOCATION to automatically search for the filesystem in the cartridge (using the rompak).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DFS_ESUCCESS on success or a negative error otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 12 2024 17:20:46 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
