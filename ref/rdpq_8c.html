<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: rdpq.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_e82f31e8932771ae6769214a98ceba7f.html">rdpq</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">rdpq.c File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__display.html">Display Subsystem</a> &raquo; <a class="el" href="group__rdp.html">(Deprecated) Old RDP library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>RDP Command queue.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structrdpq__state__t" id="r_structrdpq__state__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#structrdpq__state__t">rdpq_state_t</a></td></tr>
<tr class="memdesc:structrdpq__state__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">State of the rdpq ucode overlay (partial).  <a href="rdpq_8c.html#structrdpq__state__t">More...</a><br /></td></tr>
<tr class="separator:structrdpq__state__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a72e8ff2c18e7a23fc96f1e634e505b6c" id="r_a72e8ff2c18e7a23fc96f1e634e505b6c"><td class="memItemLeft" align="right" valign="top"><a id="a72e8ff2c18e7a23fc96f1e634e505b6c" name="a72e8ff2c18e7a23fc96f1e634e505b6c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DEFINE_RSP_UCODE</b> (rsp_rdpq,.assert_handler=rdpq_assert_handler)</td></tr>
<tr class="memdesc:a72e8ff2c18e7a23fc96f1e634e505b6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The rdpq ucode overlay. <br /></td></tr>
<tr class="separator:a72e8ff2c18e7a23fc96f1e634e505b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d884af64503534642d525082ec827cd" id="r_a7d884af64503534642d525082ec827cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a7d884af64503534642d525082ec827cd">rdpq_init</a> ()</td></tr>
<tr class="memdesc:a7d884af64503534642d525082ec827cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the RDPQ library.  <br /></td></tr>
<tr class="separator:a7d884af64503534642d525082ec827cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3a78a498699343d8ae2965853b67a0" id="r_aaf3a78a498699343d8ae2965853b67a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aaf3a78a498699343d8ae2965853b67a0">rdpq_close</a> ()</td></tr>
<tr class="memdesc:aaf3a78a498699343d8ae2965853b67a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown the RDPQ library.  <br /></td></tr>
<tr class="separator:aaf3a78a498699343d8ae2965853b67a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3951964fc692a7b56f1e250c45d6713" id="r_af3951964fc692a7b56f1e250c45d6713"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#af3951964fc692a7b56f1e250c45d6713">rdpq_config_set</a> (uint32_t cfg)</td></tr>
<tr class="memdesc:af3951964fc692a7b56f1e250c45d6713"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the configuration of the RDPQ module.  <br /></td></tr>
<tr class="separator:af3951964fc692a7b56f1e250c45d6713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded7b5a770a9a0598410cb2f9de758c8" id="r_aded7b5a770a9a0598410cb2f9de758c8"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aded7b5a770a9a0598410cb2f9de758c8">rdpq_config_enable</a> (uint32_t cfg)</td></tr>
<tr class="memdesc:aded7b5a770a9a0598410cb2f9de758c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable a specific set of configuration flags.  <br /></td></tr>
<tr class="separator:aded7b5a770a9a0598410cb2f9de758c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9da183a4a282f68fb27dffa709dcfd" id="r_a2f9da183a4a282f68fb27dffa709dcfd"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a2f9da183a4a282f68fb27dffa709dcfd">rdpq_config_disable</a> (uint32_t cfg)</td></tr>
<tr class="memdesc:a2f9da183a4a282f68fb27dffa709dcfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable a specific set of configuration flags.  <br /></td></tr>
<tr class="separator:a2f9da183a4a282f68fb27dffa709dcfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb872b5dba9db3ba975bf2b3b8282e71" id="r_aeb872b5dba9db3ba975bf2b3b8282e71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aeb872b5dba9db3ba975bf2b3b8282e71">rdpq_fence</a> (void)</td></tr>
<tr class="memdesc:aeb872b5dba9db3ba975bf2b3b8282e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public rdpq_fence API, redefined it.  <br /></td></tr>
<tr class="separator:aeb872b5dba9db3ba975bf2b3b8282e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e49b28516eb6855e1f4c5bd35fe12ad" id="r_a4e49b28516eb6855e1f4c5bd35fe12ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a4e49b28516eb6855e1f4c5bd35fe12ad">rdpq_exec</a> (void *buffer, int size)</td></tr>
<tr class="memdesc:a4e49b28516eb6855e1f4c5bd35fe12ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send to the RDP a buffer of RDP commands from RDRAM.  <br /></td></tr>
<tr class="separator:a4e49b28516eb6855e1f4c5bd35fe12ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b29465b8849ddd6164c82e5136d9fc" id="r_a28b29465b8849ddd6164c82e5136d9fc"><td class="memItemLeft" align="right" valign="top"><a id="a28b29465b8849ddd6164c82e5136d9fc" name="a28b29465b8849ddd6164c82e5136d9fc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_autosync_use</b> (uint32_t res)</td></tr>
<tr class="memdesc:a28b29465b8849ddd6164c82e5136d9fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Autosync engine: mark certain resources as in use. <br /></td></tr>
<tr class="separator:a28b29465b8849ddd6164c82e5136d9fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a160540e0fbb288415a097fdbde5b8812" id="r_a160540e0fbb288415a097fdbde5b8812"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a160540e0fbb288415a097fdbde5b8812">__rdpq_autosync_change</a> (uint32_t res)</td></tr>
<tr class="memdesc:a160540e0fbb288415a097fdbde5b8812"><td class="mdescLeft">&#160;</td><td class="mdescRight">Autosync engine: mark certain resources as being changed.  <br /></td></tr>
<tr class="separator:a160540e0fbb288415a097fdbde5b8812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a6556d7d088ca2b745fa145e3aeee3" id="r_a70a6556d7d088ca2b745fa145e3aeee3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3">rdpq_set_fill_color</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color)</td></tr>
<tr class="memdesc:a70a6556d7d088ca2b745fa145e3aeee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue a SET_FILL_COLOR RDP command.  <br /></td></tr>
<tr class="separator:a70a6556d7d088ca2b745fa145e3aeee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0d25e9f693aa1a288381c5a09ba8e1" id="r_aba0d25e9f693aa1a288381c5a09ba8e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aba0d25e9f693aa1a288381c5a09ba8e1">rdpq_set_fill_color_stripes</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color1, <a class="el" href="group__graphics.html#structcolor__t">color_t</a> color2)</td></tr>
<tr class="memdesc:aba0d25e9f693aa1a288381c5a09ba8e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue a SET_FILL_COLOR RDP command to draw a striped pattern.  <br /></td></tr>
<tr class="separator:aba0d25e9f693aa1a288381c5a09ba8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffd0e373836f8500094bdcbe85ce530" id="r_a7ffd0e373836f8500094bdcbe85ce530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a7ffd0e373836f8500094bdcbe85ce530">rdpq_set_fog_color</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color)</td></tr>
<tr class="memdesc:a7ffd0e373836f8500094bdcbe85ce530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP FOG blender register.  <br /></td></tr>
<tr class="separator:a7ffd0e373836f8500094bdcbe85ce530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6300356555382c0aa75967aa8c15640" id="r_ae6300356555382c0aa75967aa8c15640"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ae6300356555382c0aa75967aa8c15640">rdpq_set_blend_color</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color)</td></tr>
<tr class="memdesc:ae6300356555382c0aa75967aa8c15640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP BLEND blender register.  <br /></td></tr>
<tr class="separator:ae6300356555382c0aa75967aa8c15640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25a8b6c5eb35fb2253f601c3be24867" id="r_ad25a8b6c5eb35fb2253f601c3be24867"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ad25a8b6c5eb35fb2253f601c3be24867">rdpq_set_prim_color</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color)</td></tr>
<tr class="memdesc:ad25a8b6c5eb35fb2253f601c3be24867"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR)  <br /></td></tr>
<tr class="separator:ad25a8b6c5eb35fb2253f601c3be24867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9507264b7ca4898df8ae9913890185c7" id="r_a9507264b7ca4898df8ae9913890185c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a9507264b7ca4898df8ae9913890185c7">rdpq_set_detail_factor</a> (float value)</td></tr>
<tr class="memdesc:a9507264b7ca4898df8ae9913890185c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))  <br /></td></tr>
<tr class="separator:a9507264b7ca4898df8ae9913890185c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37ff624a53a01a69564738ee0862480f" id="r_a37ff624a53a01a69564738ee0862480f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a37ff624a53a01a69564738ee0862480f">rdpq_set_prim_lod_frac</a> (uint8_t value)</td></tr>
<tr class="memdesc:a37ff624a53a01a69564738ee0862480f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))  <br /></td></tr>
<tr class="separator:a37ff624a53a01a69564738ee0862480f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad2689041d0f8d70fc4a82c3330c064" id="r_a7ad2689041d0f8d70fc4a82c3330c064"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a7ad2689041d0f8d70fc4a82c3330c064">rdpq_set_prim_register_raw</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color, uint8_t minlod, uint8_t primlod)</td></tr>
<tr class="memdesc:a7ad2689041d0f8d70fc4a82c3330c064"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP PRIM combiner register (raw version) (RDP command: SET_PRIM_COLOR)  <br /></td></tr>
<tr class="separator:a7ad2689041d0f8d70fc4a82c3330c064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289f1c0c4e92d66d71c55bd6c8103e3e" id="r_a289f1c0c4e92d66d71c55bd6c8103e3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a289f1c0c4e92d66d71c55bd6c8103e3e">rdpq_set_env_color</a> (<a class="el" href="group__graphics.html#structcolor__t">color_t</a> color)</td></tr>
<tr class="memdesc:a289f1c0c4e92d66d71c55bd6c8103e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR)  <br /></td></tr>
<tr class="separator:a289f1c0c4e92d66d71c55bd6c8103e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd5aa2fa09bcda9659c83dc67b896c9" id="r_a0dd5aa2fa09bcda9659c83dc67b896c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a0dd5aa2fa09bcda9659c83dc67b896c9">rdpq_set_prim_depth_raw</a> (uint16_t primitive_z, int16_t primitive_delta_z)</td></tr>
<tr class="memdesc:a0dd5aa2fa09bcda9659c83dc67b896c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a fixed Z value to be used instead of a per-pixel value (RDP command; SET_PRIM_DEPTH)  <br /></td></tr>
<tr class="separator:a0dd5aa2fa09bcda9659c83dc67b896c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd1c19d6574f3d3cd6819d235d5413f" id="r_afdd1c19d6574f3d3cd6819d235d5413f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#afdd1c19d6574f3d3cd6819d235d5413f">rdpq_load_tlut_raw</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, int first_color, int num_colors)</td></tr>
<tr class="memdesc:afdd1c19d6574f3d3cd6819d235d5413f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a palette of colors into TMEM (RDP command: LOAD_TLUT)  <br /></td></tr>
<tr class="separator:afdd1c19d6574f3d3cd6819d235d5413f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d58ba9ae6ea05e8576b7735420f0b6" id="r_aa2d58ba9ae6ea05e8576b7735420f0b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aa2d58ba9ae6ea05e8576b7735420f0b6">rdpq_set_tile_size_fx</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, uint16_t s0, uint16_t t0, uint16_t s1, uint16_t t1)</td></tr>
<tr class="memdesc:aa2d58ba9ae6ea05e8576b7735420f0b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the extents of a tile descriptor &ndash; fixed point version (RDP command: SET_TILE_SIZE)  <br /></td></tr>
<tr class="separator:aa2d58ba9ae6ea05e8576b7735420f0b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b37267136cf8b04374eb3ac668046f2" id="r_a9b37267136cf8b04374eb3ac668046f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2">rdpq_load_block</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, uint16_t s0, uint16_t t0, uint16_t num_texels, uint16_t tmem_pitch)</td></tr>
<tr class="memdesc:a9b37267136cf8b04374eb3ac668046f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)  <br /></td></tr>
<tr class="separator:a9b37267136cf8b04374eb3ac668046f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027eb77bf55b7b56501147815f8fd13e" id="r_a027eb77bf55b7b56501147815f8fd13e"><td class="memItemLeft" align="right" valign="top"><a id="a027eb77bf55b7b56501147815f8fd13e" name="a027eb77bf55b7b56501147815f8fd13e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>rdpq_load_block_fx</b> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, uint16_t s0, uint16_t t0, uint16_t num_texels, uint16_t dxt)</td></tr>
<tr class="memdesc:a027eb77bf55b7b56501147815f8fd13e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low level function to load a texture image into TMEM in a single memory transfer. <br /></td></tr>
<tr class="separator:a027eb77bf55b7b56501147815f8fd13e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b4d13e0d4ce86f251cfbf5e9a53b85" id="r_ad8b4d13e0d4ce86f251cfbf5e9a53b85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ad8b4d13e0d4ce86f251cfbf5e9a53b85">rdpq_load_tile_fx</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, uint16_t s0, uint16_t t0, uint16_t s1, uint16_t t1)</td></tr>
<tr class="memdesc:ad8b4d13e0d4ce86f251cfbf5e9a53b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a portion of a texture into TMEM &ndash; fixed point version (RDP command: LOAD_TILE)  <br /></td></tr>
<tr class="separator:ad8b4d13e0d4ce86f251cfbf5e9a53b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963a84865cb85ba90aa0aaa10ef248ab" id="r_a963a84865cb85ba90aa0aaa10ef248ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a963a84865cb85ba90aa0aaa10ef248ab">rdpq_set_combiner_raw</a> (uint64_t cc)</td></tr>
<tr class="memdesc:a963a84865cb85ba90aa0aaa10ef248ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to change the RDP combiner.  <br /></td></tr>
<tr class="separator:a963a84865cb85ba90aa0aaa10ef248ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d2a9819765d53a5128f279a7ea0ccb" id="r_af8d2a9819765d53a5128f279a7ea0ccb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#af8d2a9819765d53a5128f279a7ea0ccb">rdpq_set_other_modes_raw</a> (uint64_t mode)</td></tr>
<tr class="memdesc:af8d2a9819765d53a5128f279a7ea0ccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to set the rendering mode register.  <br /></td></tr>
<tr class="separator:af8d2a9819765d53a5128f279a7ea0ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63486735278da233229c6cf5fb3b3aaf" id="r_a63486735278da233229c6cf5fb3b3aaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a63486735278da233229c6cf5fb3b3aaf">rdpq_change_other_modes_raw</a> (uint64_t mask, uint64_t val)</td></tr>
<tr class="memdesc:a63486735278da233229c6cf5fb3b3aaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to partly change the rendering mode register.  <br /></td></tr>
<tr class="separator:a63486735278da233229c6cf5fb3b3aaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124ae765728993ad1207ca1410edaee2" id="r_a124ae765728993ad1207ca1410edaee2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a124ae765728993ad1207ca1410edaee2">rdpq_set_color_image_raw</a> (uint8_t index, uint32_t offset, <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a> format, uint32_t width, uint32_t height, uint32_t stride)</td></tr>
<tr class="memdesc:a124ae765728993ad1207ca1410edaee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level version of <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a>, with address lookup capability.  <br /></td></tr>
<tr class="separator:a124ae765728993ad1207ca1410edaee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9e033b79ec7e92a3038e4e2bde7094f" id="r_ae9e033b79ec7e92a3038e4e2bde7094f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ae9e033b79ec7e92a3038e4e2bde7094f">rdpq_set_z_image_raw</a> (uint8_t index, uint32_t offset)</td></tr>
<tr class="memdesc:ae9e033b79ec7e92a3038e4e2bde7094f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level version of <a class="el" href="rdpq_8h.html#a8a540c568fae4b371828e0b62a9a67ec" title="Configure the Z-buffer to use (RDP command: SET_Z_IMAGE)">rdpq_set_z_image</a>, with address lookup capability.  <br /></td></tr>
<tr class="separator:ae9e033b79ec7e92a3038e4e2bde7094f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf80d096c730fa3aa29fc8a48154249c" id="r_aaf80d096c730fa3aa29fc8a48154249c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aaf80d096c730fa3aa29fc8a48154249c">rdpq_set_texture_image_raw</a> (uint8_t index, uint32_t offset, <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a> format, uint16_t width, uint16_t height)</td></tr>
<tr class="memdesc:aaf80d096c730fa3aa29fc8a48154249c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level version of <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>, with address lookup capability.  <br /></td></tr>
<tr class="separator:aaf80d096c730fa3aa29fc8a48154249c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a157dcfb511e567251d69ba2272287" id="r_ac3a157dcfb511e567251d69ba2272287"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ac3a157dcfb511e567251d69ba2272287">rdpq_set_lookup_address</a> (uint8_t index, void *rdram_addr)</td></tr>
<tr class="memdesc:ac3a157dcfb511e567251d69ba2272287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an address into the rdpq lookup table.  <br /></td></tr>
<tr class="separator:ac3a157dcfb511e567251d69ba2272287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa3f0ce08b370d70ff7dcc81efba69c" id="r_a3aa3f0ce08b370d70ff7dcc81efba69c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a3aa3f0ce08b370d70ff7dcc81efba69c">rdpq_set_tile</a> (<a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a> tile, <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a> format, int32_t tmem_addr, uint16_t tmem_pitch, const <a class="el" href="rdpq_8h.html#structrdpq__tileparms__t">rdpq_tileparms_t</a> *parms)</td></tr>
<tr class="memdesc:a3aa3f0ce08b370d70ff7dcc81efba69c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue a RDP SET_TILE command (full version)  <br /></td></tr>
<tr class="separator:a3aa3f0ce08b370d70ff7dcc81efba69c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">RDP block management functions.</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>All the functions in this group are called in the context of creation of a RDP block (part of a rspq block). See the top-level documentation for a general overview of how RDP blocks work. </p>
</div></td></tr>
<tr class="memitem:a5e7cc732c607a8a3182c510e6c643fc6" id="r_a5e7cc732c607a8a3182c510e6c643fc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a5e7cc732c607a8a3182c510e6c643fc6">__rdpq_block_begin</a> ()</td></tr>
<tr class="memdesc:a5e7cc732c607a8a3182c510e6c643fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize RDP block mangament.  <br /></td></tr>
<tr class="separator:a5e7cc732c607a8a3182c510e6c643fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0187e0dcc3e6ef22ec15a36eabe1102" id="r_ab0187e0dcc3e6ef22ec15a36eabe1102"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#ab0187e0dcc3e6ef22ec15a36eabe1102">__rdpq_block_next_buffer</a> (void)</td></tr>
<tr class="memdesc:ab0187e0dcc3e6ef22ec15a36eabe1102"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new RDP block buffer, chaining it to the current one (if any)  <br /></td></tr>
<tr class="separator:ab0187e0dcc3e6ef22ec15a36eabe1102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e87bea5a505bd42b36b0bd750b8c9c2" id="r_a0e87bea5a505bd42b36b0bd750b8c9c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rdpq__internal_8h.html#structrdpq__block__t">rdpq_block_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a0e87bea5a505bd42b36b0bd750b8c9c2">__rdpq_block_end</a> ()</td></tr>
<tr class="memdesc:a0e87bea5a505bd42b36b0bd750b8c9c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish creation of a RDP block.  <br /></td></tr>
<tr class="separator:a0e87bea5a505bd42b36b0bd750b8c9c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9fde5a3babeec454eb8ea92f390601" id="r_a7e9fde5a3babeec454eb8ea92f390601"><td class="memItemLeft" align="right" valign="top"><a id="a7e9fde5a3babeec454eb8ea92f390601" name="a7e9fde5a3babeec454eb8ea92f390601"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_block_run</b> (<a class="el" href="rdpq__internal_8h.html#structrdpq__block__t">rdpq_block_t</a> *block)</td></tr>
<tr class="memdesc:a7e9fde5a3babeec454eb8ea92f390601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify that a rspq block was run (called by <a class="el" href="rspq_8c.html#ad078c001303a1b2153ba99f3184194f3" title="Add to the RSP queue a command that runs a block.">rspq_block_run</a>). <br /></td></tr>
<tr class="separator:a7e9fde5a3babeec454eb8ea92f390601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f193ed65ef91d46599c3ca7edb1cc6" id="r_a95f193ed65ef91d46599c3ca7edb1cc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a95f193ed65ef91d46599c3ca7edb1cc6">__rdpq_block_free</a> (<a class="el" href="rdpq__internal_8h.html#structrdpq__block__t">rdpq_block_t</a> *block)</td></tr>
<tr class="memdesc:a95f193ed65ef91d46599c3ca7edb1cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a block.  <br /></td></tr>
<tr class="separator:a95f193ed65ef91d46599c3ca7edb1cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f78d017798b8072f8006423f506e5f" id="r_aa6f78d017798b8072f8006423f506e5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aa6f78d017798b8072f8006423f506e5f">__rdpq_block_reserve</a> (int num_rdp_commands)</td></tr>
<tr class="memdesc:aa6f78d017798b8072f8006423f506e5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve space in the RDP static buffer for a number of RDP commands.  <br /></td></tr>
<tr class="separator:aa6f78d017798b8072f8006423f506e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af94e0a9672c6ee667c9da808183cee7b" id="r_af94e0a9672c6ee667c9da808183cee7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#af94e0a9672c6ee667c9da808183cee7b">__rdpq_block_update</a> (volatile uint32_t *wptr)</td></tr>
<tr class="memdesc:af94e0a9672c6ee667c9da808183cee7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new RDP write pointer, and enqueue a RSP command to run the buffer until there.  <br /></td></tr>
<tr class="separator:af94e0a9672c6ee667c9da808183cee7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Helpers to write generic RDP commands</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>All the functions in this group are wrappers around <a class="el" href="rdpq__internal_8h.html#a2ea7458c96e94aa5fe7481e3f679a4c4" title="Write a passthrough RDP command into the rspq queue.">rdpq_passthrough_write</a> to help generating RDP commands. They are called by inlined functions in <a class="el" href="rdpq_8h.html" title="RDP Command queue.">rdpq.h</a>. See the top-level documentation about inline functions to understand the reason of this split. </p>
</div></td></tr>
<tr class="memitem:aee535835045a8c36477418f77240effe" id="r_aee535835045a8c36477418f77240effe"><td class="memItemLeft" align="right" valign="top"><a id="aee535835045a8c36477418f77240effe" name="aee535835045a8c36477418f77240effe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write8</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1)</td></tr>
<tr class="memdesc:aee535835045a8c36477418f77240effe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 8-byte RDP command. <br /></td></tr>
<tr class="separator:aee535835045a8c36477418f77240effe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b402721d5123a8b4e9fa603f845dec" id="r_ad2b402721d5123a8b4e9fa603f845dec"><td class="memItemLeft" align="right" valign="top"><a id="ad2b402721d5123a8b4e9fa603f845dec" name="ad2b402721d5123a8b4e9fa603f845dec"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write8_syncchange</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1, uint32_t autosync)</td></tr>
<tr class="memdesc:ad2b402721d5123a8b4e9fa603f845dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 8-byte RDP command, which changes some autosync resources <br  />
 <br /></td></tr>
<tr class="separator:ad2b402721d5123a8b4e9fa603f845dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a327df0dcf2b5efe68dcb4101dfab97" id="r_a1a327df0dcf2b5efe68dcb4101dfab97"><td class="memItemLeft" align="right" valign="top"><a id="a1a327df0dcf2b5efe68dcb4101dfab97" name="a1a327df0dcf2b5efe68dcb4101dfab97"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write8_syncuse</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1, uint32_t autosync)</td></tr>
<tr class="memdesc:a1a327df0dcf2b5efe68dcb4101dfab97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 8-byte RDP command, which uses some autosync resources <br  />
 <br /></td></tr>
<tr class="separator:a1a327df0dcf2b5efe68dcb4101dfab97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b50637660bc96993efcd4a8cfd8e12" id="r_a89b50637660bc96993efcd4a8cfd8e12"><td class="memItemLeft" align="right" valign="top"><a id="a89b50637660bc96993efcd4a8cfd8e12" name="a89b50637660bc96993efcd4a8cfd8e12"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write8_syncchangeuse</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1, uint32_t autosync_c, uint32_t autosync_u)</td></tr>
<tr class="memdesc:a89b50637660bc96993efcd4a8cfd8e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 8-byte RDP command, which changes some autosync resources and uses others. <br /></td></tr>
<tr class="separator:a89b50637660bc96993efcd4a8cfd8e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b69979da879d66599898b973d2932d4" id="r_a8b69979da879d66599898b973d2932d4"><td class="memItemLeft" align="right" valign="top"><a id="a8b69979da879d66599898b973d2932d4" name="a8b69979da879d66599898b973d2932d4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write16</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1, uint32_t arg2, uint32_t arg3)</td></tr>
<tr class="memdesc:a8b69979da879d66599898b973d2932d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 16-byte RDP command <br  />
 <br /></td></tr>
<tr class="separator:a8b69979da879d66599898b973d2932d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570d8fd6e1f449d8a8682f3c0d48956a" id="r_a570d8fd6e1f449d8a8682f3c0d48956a"><td class="memItemLeft" align="right" valign="top"><a id="a570d8fd6e1f449d8a8682f3c0d48956a" name="a570d8fd6e1f449d8a8682f3c0d48956a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_write16_syncuse</b> (uint32_t cmd_id, uint32_t arg0, uint32_t arg1, uint32_t arg2, uint32_t arg3, uint32_t autosync)</td></tr>
<tr class="memdesc:a570d8fd6e1f449d8a8682f3c0d48956a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a standard 16-byte RDP command, which uses some autosync resources <br  />
 <br /></td></tr>
<tr class="separator:a570d8fd6e1f449d8a8682f3c0d48956a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab944f035051c22f15ae263482d74883e" id="r_ab944f035051c22f15ae263482d74883e"><td class="memItemLeft" align="right" valign="top"><a id="ab944f035051c22f15ae263482d74883e" name="ab944f035051c22f15ae263482d74883e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_fixup_write8_syncchange</b> (uint32_t cmd_id, uint32_t w0, uint32_t w1, uint32_t autosync)</td></tr>
<tr class="memdesc:ab944f035051c22f15ae263482d74883e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a 8-byte RDP command fixup. <br /></td></tr>
<tr class="separator:ab944f035051c22f15ae263482d74883e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">RDP fixups out-of-line implementations</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These are the out-of line implementations of RDP commands which needs specific logic, mostly because they are fixups. </p>
</div></td></tr>
<tr class="memitem:a25829986a163ef2d44f49143f31dd0ff" id="r_a25829986a163ef2d44f49143f31dd0ff"><td class="memItemLeft" align="right" valign="top"><a id="a25829986a163ef2d44f49143f31dd0ff" name="a25829986a163ef2d44f49143f31dd0ff"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_set_scissor</b> (uint32_t w0, uint32_t w1)</td></tr>
<tr class="memdesc:a25829986a163ef2d44f49143f31dd0ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-line implementation of <a class="el" href="rdpq_8h.html#ac5a643cb5e908bbc0a34ea3c5f02dcf3" title="Configure a scissoring rectangle in screen coordinates (RDP command: SET_SCISSOR)">rdpq_set_scissor</a>. <br /></td></tr>
<tr class="separator:a25829986a163ef2d44f49143f31dd0ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687180ca506edd932b38307b9f73071b" id="r_a687180ca506edd932b38307b9f73071b"><td class="memItemLeft" align="right" valign="top"><a id="a687180ca506edd932b38307b9f73071b" name="a687180ca506edd932b38307b9f73071b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_set_fill_color</b> (uint32_t w1)</td></tr>
<tr class="memdesc:a687180ca506edd932b38307b9f73071b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-line implementation of <a class="el" href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3" title="Enqueue a SET_FILL_COLOR RDP command.">rdpq_set_fill_color</a>. <br /></td></tr>
<tr class="separator:a687180ca506edd932b38307b9f73071b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7dd6167dd4d487a32b32e445aff319f" id="r_ab7dd6167dd4d487a32b32e445aff319f"><td class="memItemLeft" align="right" valign="top"><a id="ab7dd6167dd4d487a32b32e445aff319f" name="ab7dd6167dd4d487a32b32e445aff319f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_set_color_image</b> (uint32_t w0, uint32_t w1, uint32_t sw0, uint32_t sw1)</td></tr>
<tr class="memdesc:ab7dd6167dd4d487a32b32e445aff319f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-line implementation of <a class="el" href="rdpq_8c.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a>. <br /></td></tr>
<tr class="separator:ab7dd6167dd4d487a32b32e445aff319f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9020360dcb7a05b4270d8a66e8dad6b7" id="r_a9020360dcb7a05b4270d8a66e8dad6b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a9020360dcb7a05b4270d8a66e8dad6b7">rdpq_set_color_image</a> (const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *surface)</td></tr>
<tr class="memdesc:a9020360dcb7a05b4270d8a66e8dad6b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)  <br /></td></tr>
<tr class="separator:a9020360dcb7a05b4270d8a66e8dad6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a540c568fae4b371828e0b62a9a67ec" id="r_a8a540c568fae4b371828e0b62a9a67ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a8a540c568fae4b371828e0b62a9a67ec">rdpq_set_z_image</a> (const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *surface)</td></tr>
<tr class="memdesc:a8a540c568fae4b371828e0b62a9a67ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the Z-buffer to use (RDP command: SET_Z_IMAGE)  <br /></td></tr>
<tr class="separator:a8a540c568fae4b371828e0b62a9a67ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243f6adec109fcf042273b5e6402f83c" id="r_a243f6adec109fcf042273b5e6402f83c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a243f6adec109fcf042273b5e6402f83c">rdpq_set_texture_image</a> (const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *surface)</td></tr>
<tr class="memdesc:a243f6adec109fcf042273b5e6402f83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the texture to use (RDP command: SET_TEX_IMAGE)  <br /></td></tr>
<tr class="separator:a243f6adec109fcf042273b5e6402f83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95aef1ad3d83a977414e2046b3ae7208" id="r_a95aef1ad3d83a977414e2046b3ae7208"><td class="memItemLeft" align="right" valign="top"><a id="a95aef1ad3d83a977414e2046b3ae7208" name="a95aef1ad3d83a977414e2046b3ae7208"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_set_other_modes</b> (uint32_t w0, uint32_t w1)</td></tr>
<tr class="memdesc:a95aef1ad3d83a977414e2046b3ae7208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-line implementation of <a class="el" href="rdpq_8c.html#af8d2a9819765d53a5128f279a7ea0ccb" title="Low-level function to set the rendering mode register.">rdpq_set_other_modes_raw</a>. <br /></td></tr>
<tr class="separator:a95aef1ad3d83a977414e2046b3ae7208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bfe6bf84d390a3fa13b2af080b009e4" id="r_a7bfe6bf84d390a3fa13b2af080b009e4"><td class="memItemLeft" align="right" valign="top"><a id="a7bfe6bf84d390a3fa13b2af080b009e4" name="a7bfe6bf84d390a3fa13b2af080b009e4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__rdpq_change_other_modes</b> (uint32_t w0, uint32_t w1, uint32_t w2)</td></tr>
<tr class="memdesc:a7bfe6bf84d390a3fa13b2af080b009e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-line implementation of <a class="el" href="rdpq_8c.html#a63486735278da233229c6cf5fb3b3aaf" title="Low-level function to partly change the rendering mode register.">rdpq_change_other_modes_raw</a>. <br /></td></tr>
<tr class="separator:a7bfe6bf84d390a3fa13b2af080b009e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6d2bfda322d1ed6bd17f79f7b9a9bb" id="r_aca6d2bfda322d1ed6bd17f79f7b9a9bb"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aca6d2bfda322d1ed6bd17f79f7b9a9bb">rdpq_get_other_modes_raw</a> (void)</td></tr>
<tr class="memdesc:aca6d2bfda322d1ed6bd17f79f7b9a9bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current render mode register.  <br /></td></tr>
<tr class="separator:aca6d2bfda322d1ed6bd17f79f7b9a9bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73b4dfd32dafc97cceee676eeffeb23" id="r_af73b4dfd32dafc97cceee676eeffeb23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#af73b4dfd32dafc97cceee676eeffeb23">rdpq_set_tile_autotmem</a> (int16_t tmem_bytes)</td></tr>
<tr class="memdesc:af73b4dfd32dafc97cceee676eeffeb23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the auto-TMEM feature of <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>.  <br /></td></tr>
<tr class="separator:af73b4dfd32dafc97cceee676eeffeb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa667aafb95c47fac38f4fa2c2c13f1fb" id="r_aa667aafb95c47fac38f4fa2c2c13f1fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aa667aafb95c47fac38f4fa2c2c13f1fb">rdpq_sync_full</a> (void(*callback)(void *), void *arg)</td></tr>
<tr class="memdesc:aa667aafb95c47fac38f4fa2c2c13f1fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a RDP SYNC_FULL command and register a callback when it is done.  <br /></td></tr>
<tr class="separator:aa667aafb95c47fac38f4fa2c2c13f1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca4a301ee784902b39850d428be41ff0" id="r_aca4a301ee784902b39850d428be41ff0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aca4a301ee784902b39850d428be41ff0">rdpq_sync_pipe</a> (void)</td></tr>
<tr class="memdesc:aca4a301ee784902b39850d428be41ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a RDP SYNC_PIPE command.  <br /></td></tr>
<tr class="separator:aca4a301ee784902b39850d428be41ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec179fe71bba635005595cf356242f6" id="r_aaec179fe71bba635005595cf356242f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#aaec179fe71bba635005595cf356242f6">rdpq_sync_tile</a> (void)</td></tr>
<tr class="memdesc:aaec179fe71bba635005595cf356242f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a RDP SYNC_TILE command.  <br /></td></tr>
<tr class="separator:aaec179fe71bba635005595cf356242f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73feb6e400573369c356d2043ff6deda" id="r_a73feb6e400573369c356d2043ff6deda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a73feb6e400573369c356d2043ff6deda">rdpq_sync_load</a> (void)</td></tr>
<tr class="memdesc:a73feb6e400573369c356d2043ff6deda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a RDP SYNC_LOAD command.  <br /></td></tr>
<tr class="separator:a73feb6e400573369c356d2043ff6deda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a31b230c610daa5f50adaa7323ea2698b" id="r_a31b230c610daa5f50adaa7323ea2698b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdpq_8c.html#a31b230c610daa5f50adaa7323ea2698b">__rdpq_inited</a> = false</td></tr>
<tr class="memdesc:a31b230c610daa5f50adaa7323ea2698b"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if <a class="el" href="rdpq_8c.html#a7d884af64503534642d525082ec827cd" title="Initialize the RDPQ library.">rdpq_init</a> was called.  <br /></td></tr>
<tr class="separator:a31b230c610daa5f50adaa7323ea2698b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3dcb0d950a85ac9a4df53028d3eb44" id="r_a3c3dcb0d950a85ac9a4df53028d3eb44"><td class="memItemLeft" align="right" valign="top"><a id="a3c3dcb0d950a85ac9a4df53028d3eb44" name="a3c3dcb0d950a85ac9a4df53028d3eb44"></a>
<a class="el" href="rdpq__internal_8h.html#structrdpq__block__state__t">rdpq_block_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rdpq_block_state</b></td></tr>
<tr class="memdesc:a3c3dcb0d950a85ac9a4df53028d3eb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">RDP block management state. <br /></td></tr>
<tr class="separator:a3c3dcb0d950a85ac9a4df53028d3eb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8056a83469cbf54042ddf897d474c7cc" id="r_a8056a83469cbf54042ddf897d474c7cc"><td class="memItemLeft" align="right" valign="top"><a id="a8056a83469cbf54042ddf897d474c7cc" name="a8056a83469cbf54042ddf897d474c7cc"></a>
<a class="el" href="rdpq__internal_8h.html#structrdpq__tracking__t">rdpq_tracking_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rdpq_tracking</b></td></tr>
<tr class="memdesc:a8056a83469cbf54042ddf897d474c7cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracking state of RDP. <br /></td></tr>
<tr class="separator:a8056a83469cbf54042ddf897d474c7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RDP Command queue. </p>
<h1><a class="anchor" id="autotoc_md11"></a>
RDP Queue: implementation details</h1>
<p>This documentation block describes the internal workings of the RDP Queue. This is useful to understand the implementation, but it is not required to read or understand this to use rdpq.</p>
<p>For description of the API of the RDP queue, see <a class="el" href="rdpq_8h.html" title="RDP Command queue.">rdpq.h</a></p>
<h2><a class="anchor" id="autotoc_md12"></a>
Improvements over raw hardware programming</h2>
<p>RDPQ provides a very low-level API over the RDP graphics chips, exposing all its settings and most of its limits. Still, rdpq tries to hide a few low-level hardware details to make programming the RDP less surprising and more orthogonal. To do so, it "patches" some RDP commands, typically via RSP code and depending on the current RDP state. We called these improvements "fixups".</p>
<p>The documentation of the public rdpq API does not explicitly mention which behavior has been adjusted via fixups. Instead, this section explains in details all the fixups performed by rdpq. Reading this section is not necessary to understand and use rdpq, but it might be useful for people that are familiar with RDP outside of libdragon (eg: libultra programmers), to avoid getting confused in places where rdpq deviates from RDP (even if for the better).</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Scissoring and texrects: consistent coordinates</h3>
<p>The RDP SET_SCISSOR and TEXTURE_RECTANGLE commands accept a rectangle whose major bounds (bottom and right) are either inclusive or exclusive, depending on the current RDP cycle type (fill/copy: exclusive, 1cyc/2cyc: inclusive). <a class="el" href="rdpq_8h.html#ac5a643cb5e908bbc0a34ea3c5f02dcf3" title="Configure a scissoring rectangle in screen coordinates (RDP command: SET_SCISSOR)">rdpq_set_scissor</a> and <a class="el" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743" title="Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)">rdpq_texture_rectangle</a>, instead, always use exclusive major bounds, and automatically adjust them depending on the current RDP cycle type.</p>
<p>Moreover, any time the RDP cycle type changes, the current scissoring is adjusted to guarantee consistent results. This is especially important where the scissoring covers the whole framebuffer, because otherwise the RDP might overflow the buffer while drawing.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Avoid color image buffer overflows with auto-scissoring</h3>
<p>The RDP SET_COLOR_IMAGE command only contains a memory pointer and a pitch: the RDP is not aware of the actual size of the buffer in terms of width/height, and expects commands to be correctly clipped, or scissoring to be configured. To avoid mistakes leading to memory corruption, <a class="el" href="rdpq_8c.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a> always reconfigures scissoring to respect the actual buffer size.</p>
<p>Note also that when the RDP is cold-booted, the internal scissoring register contains random data. This means that this auto-scissoring fixup also provides a workaround to this, by making sure scissoring is always configured at least once. In fact, by forgetting to configure scissoring, the RDP can happily draw outside the framebuffer, or draw nothing, or even freeze.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
Autosync</h3>
<p>The RDP has different internal parallel units and exposes three different syncing primitives to stall and avoid write-during-use bugs: SYNC_PIPE, SYNC_LOAD and SYNC_TILE. Correct usage of these commands is not complicated but it can be complex to get right, and require extensive hardware testing because emulators do not implement the bugs caused by the absence of RDP stalls.</p>
<p>rdpq implements a smart auto-syncing engine that tracks the commands sent to RDP (on the CPU) and automatically inserts syncing whenever necessary. Insertion of syncing primitives is optimal for SYNC_PIPE and SYNC_TILE, and conservative for SYNC_LOAD (it does not currently handle partial TMEM updates).</p>
<p>Autosync also works within blocks, but since it is not possible to know the context in which a block will be run, it has to be conservative and might issue more stalls than necessary.</p>
<p>More details on the autosync engine are below.</p>
<h3><a class="anchor" id="autotoc_md16"></a>
Partial render mode changes</h3>
<p>The RDP command SET_OTHER_MODES contains most the RDP mode settings. Unfortunately the command does not allow to change only some settings, but all of them must be reconfigured. This is in contrast with most graphics APIs that allow to configure each render mode setting by itself (eg: it is possible to just change the dithering algorithm).</p>
<p>rdpq instead tracks the current render mode on the RSP, and allows to do partial updates via either the low-level <a class="el" href="rdpq_8c.html#a63486735278da233229c6cf5fb3b3aaf" title="Low-level function to partly change the rendering mode register.">rdpq_change_other_modes_raw</a> function (where it is possible to change only a subset of the 56 bits), or via the high-level rdpq_mode_* APIs (eg: <a class="el" href="rdpq__mode_8c.html#a9635e378432a4422d25953bf5e0425c4" title="Change dithering mode.">rdpq_mode_dithering</a>), which mostly build upon <a class="el" href="rdpq_8c.html#a63486735278da233229c6cf5fb3b3aaf" title="Low-level function to partly change the rendering mode register.">rdpq_change_other_modes_raw</a> in their implementation.</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Automatic 1/2 cycle type selection</h3>
<p>The RDP has two main operating modes: 1 cycle per pixel and 2 cycles per pixel. The latter is twice as slow, as the name implies, but it allows more complex color combiners and/or blenders. Moreover, 2-cycles mode also allows for multi-texturing.</p>
<p>At the hardware level, it is up to the programmer to explicitly activate either 1-cycle or 2-cycle mode. The problem with this is that there are specific rules to follow for either mode, which does not compose cleanly with partial mode changes. For instance, fogging is typically implemented using the 2-cycle mode as it requires two passes in the blender. If the user disables fogging for some meshes, it might be more performant to switch back to 1-cycle mode, but that requires also reconfiguring the combiner.</p>
<p>To solve this problem, the higher level rdpq mode APIs (rdpq_mode_*) automatically select the best cycle type depending on the current settings. More specifically, 1-cycle mode is preferred as it is faster, but 2-cycle mode is activated whenever one of the following conditions is true:</p>
<ul>
<li>A two-pass blender is configured.</li>
<li>A two-pass combiner is configured.</li>
</ul>
<p>The correct cycle-type is automatically reconfigured any time that either the blender or the combiner settings are changed. Notice that this means that rdpq also transparently handles a few more details for the user, to make it for an easier API:</p>
<ul>
<li>In 1 cycle mode, rdpq makes sure that the second pass of the combiner and the second pass of the blender are configured exactly like the respective first passes, because the RDP hardware requires this to operate correctly.</li>
<li>In 2 cycles mode, if a one-pass combiner was configured by the user, the second pass is automatically configured as a simple passthrough (equivalent to <code>((ZERO, ZERO, ZERO, COMBINED), (ZERO, ZERO, ZERO, COMBINED))</code>).</li>
<li>In 2 cycles mode, if a one-pass blender was configured by the user, it is configured in the second pass, while the first pass is defined as a passthrough (equivalent to <code>((PIXEL_RGB, ZERO, PIXEL_RGB, ONE))</code>). Notice that this is required because there is no pure passthrough in second step of the blender.</li>
<li>RDPQ_COMBINER2 macro transparently handles the texture index swap in the second cycle. So while using the macro, TEX0 always refers to the first texture and TEX1 always refers to the second texture. Moreover, uses of TEX0/TEX1 in passes where they are not allowed would cause compilation errors, to avoid triggering undefined behaviours in RDP hardware.</li>
</ul>
<h3><a class="anchor" id="autotoc_md18"></a>
Fill color as standard 32-bit color</h3>
<p>The RDP command SET_FILL_COLOR (used to configure the color register to be used in fill cycle type) has a very low-level interface: its argument is basically a 32-bit value which is copied to the framebuffer as-is, irrespective of the framebuffer color depth. For a 16-bit buffer, then, it must be programmed with two copies of the same 16-bit color.</p>
<p><a class="el" href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3" title="Enqueue a SET_FILL_COLOR RDP command.">rdpq_set_fill_color</a>, instead, accepts a <a class="el" href="group__graphics.html#structcolor__t" title="Generic color structure.">color_t</a> argument and does the conversion to the "packed" format internally, depending on the current framebuffer's color depth.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Usage of inline functions vs no-inline</h2>
<p>Most of the rdpq APIs are defined as inline functions in the header <a class="el" href="rdpq_8h.html" title="RDP Command queue.">rdpq.h</a>, but they then internally call some non-public function to do emit the command. So basically the actual function is split in tow parts: an inlined part and a non-inlined part.</p>
<p>The reason for this split is to help the compiler generate better code. In fact, it is extremely common to call rdpq functions using many constant parameters, and we want those constants to be propagated into the various bit shifts and masks to be assembled into single words. Once the (often constant) arguments have been handled, the rest of the operation can normally be performed in a separate out-of-line function.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Sending commands to RDP</h2>
<p>This section describes in general how the commands flow from CPU to RDP via RSP. There are several different code-paths here depending on whether the command has a fixup or not, and it is part of a block.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
RDRAM vs XBUS</h3>
<p>In general, the rdpq library sends the commands to RDP using a buffer in RDRAM. The hardware feature called XBUS (which allows to send commands from RSP DMEM to RDP directly) is not used or supported. There are a few reasons for this architectural choice:</p>
<ul>
<li>DMEM is limited (4K), RSP is fast and RDP is slow. Using XBUS means that you need to create a buffer in DMEM to hold the commands; as the buffer fills, RSP can trigger RDP to fetch from it, but in general RSP will generally be faster at filling it than RDP at executing it. At that point, as the buffer can't grow too much, the RSP will have to stall, slowing down the rspq queue, which in turns could also cause stalls on the CPU. The back-pressure from RDP would basically propagate to RSP and then CPU.</li>
<li>One of the main advantages of using XBUS is that there is no need to copy data from RSP to RDRAM, saving memory bandwidth. To partially cope up with it, rdpq has some other tricks up its sleeve to save memory bandwidth (specifically how it works in block mode, see below).</li>
</ul>
<p>The buffer in RDRAM where RDP commands are enqueued by RSP is called "RDP dynamic buffer". It is used as a ring buffer, so once full, it is recycled, making sure not to overwrite commands that the RDP has not executed yet.</p>
<h3><a class="anchor" id="autotoc_md22"></a>
RDP commands in standard mode</h3>
<p>Let's check the workflow for a standard RDP command, that is one for which rdpq provides no fixups:</p>
<ul>
<li>CPU (application code): a call to a rdpq function is made (eg: <a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>).</li>
<li>CPU (rdpq code): the implementation of <a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a> enqueues a rspq command for the rdpq overlay. This command has the same binary encoding of a real RDP LOAD_BLOCK command, while still being a valid rspq command following the rspq structure of overlay ID + command ID. In fact, the rdpq overlay is registered to cover 4 overlay IDs (0xC - 0xF), so that the whole RDP command space can be represented by it. In our example, the command is <code>0xF3</code>.</li>
<li>RSP (rspq code): later at some point, in parallel, the rspq engine will read the command <code>0xF3</code>, and dispatch it to the rdpq overlay.</li>
<li>RSP (rdpq code): the implementation for command <code>0xF3</code> is the same for all non-fixup commands: it writes the 8 bytes of the command into a temporary buffer in DMEM, and then sends it via DMA to the RDP dynamic buffer in RDRAM. This act of forwarding a command through CPU -&gt; RSP -&gt; RDP is called "passthrough", and is implemented by <code>RDPQCmd_Passthrough8</code> and <code>RDPQCmd_Passthrough16</code> in the ucode (rsp_rdpq.S), and <code>RSPQ_RdpSend</code> in rsp_queue.inc.</li>
<li>RSP (rdpq code): after the DMA is finished, the RSP tells the RDP that a new command has been added to the dynamic buffer and can be executed whenever the RDP is ready. This is easily done by advancing the RDP <code>DP_END</code> register. When the buffer is finished, recycling it requires instead to write both <code>DP_START</code> and <code>DP_END</code>. See <code>RSPQCmd_RdpAppendBuffer</code> and <code>RSPQCmd_RdpSetBuffer</code> respectively.</li>
</ul>
<h3><a class="anchor" id="autotoc_md23"></a>
RDP fixups in standard mode</h3>
<p>Now let's see the workflow for a RDP fixup: these are the RDP commands which are modified/tweaked by RSP to provide a more sane programming interface to the programmer.</p>
<ul>
<li>CPU (application code): a calls to a rdpq function is made (eg: <a class="el" href="rdpq_8h.html#ac5a643cb5e908bbc0a34ea3c5f02dcf3" title="Configure a scissoring rectangle in screen coordinates (RDP command: SET_SCISSOR)">rdpq_set_scissor</a>).</li>
<li>CPU (rdpq code): the implementation of <a class="el" href="rdpq_8h.html#ac5a643cb5e908bbc0a34ea3c5f02dcf3" title="Configure a scissoring rectangle in screen coordinates (RDP command: SET_SCISSOR)">rdpq_set_scissor</a> enqueues a rspq command for the rdpq overlay. This command does not need to have the same encoding of a real RDP command, but it is usually similar (to simplify work on the RSP). For instance, in our example the rdpq command is 0xD2, which is meaningless if sent to RDP, but has otherwise the same encoding of a real SET_SCISSOR (whose ID would be 0xED).</li>
<li>RSP (rspq code): later at some point, in parallel, the rspq engine will read the command <code>0xD2</code>, and dispatch it to the rdpq overlay.</li>
<li>RSP (rdpq code): the implementation for command <code>0xD2</code> is a RSP function called <code>RDPQCmd_SetScissorEx</code>. It inspects the RDP state to check the current cycle type and adapts the scissoring bounds if required. Then, it assembles a real SET_SCISSOR (with ID 0xD2) and calls <code>RSPQ_RdpSend</code> to send it to the RDP dynamic buffer.</li>
<li>RSP (rdpq code): after the DMA is finished, the RSP tells the RDP that a new command has been added to the dynamic buffer and can be executed whenever the RDP is ready.</li>
</ul>
<p>The overall workflow is similar to the passthrough, but the command is tweaked by RSP in the process.</p>
<h3><a class="anchor" id="autotoc_md24"></a>
RDP commands in block mode</h3>
<p>In block mode, rdpq completely changes its way of operating.</p>
<p>A rspq block (as described in <a class="el" href="rspq_8c.html" title="RSP Command queue.">rspq.c</a>) is a buffer containing a sequence of rspq commands that can be played back by RSP itself, with the CPU just triggering it via <a class="el" href="rspq_8c.html#ad078c001303a1b2153ba99f3184194f3" title="Add to the RSP queue a command that runs a block.">rspq_block_run</a>. When using rdpq, the rspq block contains one additional buffer: a "RDP static buffer", which contains RDP commands.</p>
<p>At block creation time, in fact, RDP commands are not enqueued as rspq commands, but are rather written into this separate buffer. The goal is to avoid the passthrough overhead: since RDP commands don't change during the block execution, they can be sent directly to RDP by RSP, referencing the RDP static buffer, without ever transferring them into RSP DMEM and back.</p>
<p>Let's check the sequence at block compilation time:</p>
<ul>
<li>CPU (application code): a call to</li>
<li>CPU (application code): a call to a rdpq function is made (eg: <a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>), while compiling a block.</li>
<li>CPU (rdpq code): the implementation of <a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a> detects that a block, is being compiled and does two things 1) Append the RDP LOAD_BLOCK command to the RDP static buffer associated with the block. 2) Write the <a class="el" href="rspq__internal_8h.html#aba01db17f4a2bfbc3db60dc172972a25abe06e92ff0ad671b894d7406f36caf6a" title="RSPQ Command: send more data to RDP (appended to the end of the current buffer)">RSPQ_CMD_RDP_APPEND_BUFFER</a> command to the rspq block, containing the address of the just-written LOAD_BLOCK command.</li>
</ul>
<p>And now at block run time:</p>
<ul>
<li>RSP (rspq code): the RSP reads the <a class="el" href="rspq__internal_8h.html#aba01db17f4a2bfbc3db60dc172972a25abe06e92ff0ad671b894d7406f36caf6a" title="RSPQ Command: send more data to RDP (appended to the end of the current buffer)">RSPQ_CMD_RDP_APPEND_BUFFER</a> command and</li>
</ul>
<p>enqueues a rspq command for the rdpq overlay. This command does not need to have the same encoding of a real RDP command, but it is usually similar (to simplify work on the RSP). For instance, in our example the rdpq command is 0xD2, which is meaningless if sent to RDP, but has otherwise the same encoding of a real SET_SCISSOR (whose ID would be 0xED).</p><ul>
<li>RSP (rspq code): later at some point, in parallel, the rspq engine will read the command <code>0xD2</code>, and dispatch it to the rdpq overlay.</li>
<li>RSP (rdpq code): the implementation for command <code>0xD2</code> is a RSP function called <code>RDPQCmd_SetScissorEx</code>. It inspects the RDP state to check the current cycle type and adapts the scissoring bounds if required. Then, it assembles a real SET_SCISSOR (with ID 0xD2) and calls <code>RSPQ_RdpSend</code> to send it to the RDP dynamic buffer.</li>
<li>RSP (rdpq code): after the DMA is finished, the RSP tells the RDP that a new command has been added to the dynamic buffer and can be executed whenever the RDP is ready.</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
Autosync engine</h2>
<p>As explained above, the autosync engine is able to emit sync commands (SYNC_PIPE, SYNC_TILE, SYNC_LOAD) automatically when necessary, liberating the developer from this additional task. This section describes how it works.</p>
<p>The autosync engine works around one simple abstraction and logic. There are "hardware resources" that can be either "used" or "changed" (aka configured) by RDP commands. If a resource is in use, a command changing it requires a sync before. Each resource is tracked by one bit in a single 32-bit word called the "autosync state".</p>
<p>The following resources are tracked:</p>
<ul>
<li>Pipe. This is a generic resource encompassing all render mode and hardware register changes. It maps to a single bit (<code>AUTOSYNC_PIPE</code>). All render mode commands "change" this bit (eg: <a class="el" href="rdpq_8c.html#af8d2a9819765d53a5128f279a7ea0ccb" title="Low-level function to set the rendering mode register.">rdpq_set_other_modes_raw</a> or <a class="el" href="rdpq_8h.html#a4c01abdb675fd847a8f35164857db4a2" title="Low level functions to set the matrix coefficients for texture format conversion.">rdpq_set_yuv_parms</a>). All draw commands "use" this bit (eg: <a class="el" href="rdpq__tri_8c.html#afb11d915a7ce8903b2b3e5ed9ef7936e" title="Draw a triangle (RDP command: TRI_*)">rdpq_triangle</a>). So for instance, if you draw a triangle, next <a class="el" href="rdpq__mode_8c.html#ac3c29578703de424bea9548ad86bb4af" title="Reset render mode to standard.">rdpq_set_mode_standard</a> call will automatically issue a <code>SYNC_PIPE</code>.</li>
<li>Tiles. These are 8 resources (8 bits) mapping to the 8 tile descriptors in RDP hardware, used to describe textures. There is one bit per each descriptor (<code>AUTOSYNC_TILE(n)</code>) so that tracking is actually done at the single tile granularity. Commands modifying the tile descriptor (such as <a class="el" href="rdpq_8c.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a> or <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a>) will "change" the resource corresponding for the affect tile. Commands drawing textured primitives (eg: <a class="el" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743" title="Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)">rdpq_texture_rectangle</a>) will "use" the resource. For instance, calling <a class="el" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743" title="Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)">rdpq_texture_rectangle</a> using <a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931ea1ef734aa501cdfd04e4c0f02691d1da5" title="Tile #4 (for code readability)">TILE4</a>, and later calling <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> on <a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931ea1ef734aa501cdfd04e4c0f02691d1da5" title="Tile #4 (for code readability)">TILE4</a> will cause a <code>SYNC_TILE</code> to be issued just before the <code>LOAD_TILE</code> command. Notice that if <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> used <a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931ea1c02a9d0d4f1d1b326fff44360d21858" title="Tile #5 (for code readability)">TILE5</a> instead, no <code>SYNC_TILE</code> would have been issued, assuming <a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931ea1c02a9d0d4f1d1b326fff44360d21858" title="Tile #5 (for code readability)">TILE5</a> was never used before. This means that having a logic to cycle through tile descriptors (instead of always using the same) will reduce the number of <code>SYNC_TILE</code> commands.</li>
<li>TMEM. Currently, the whole TMEM is tracking as a single resource (using the bit defined by <code>AUTOSYNC_TMEM(0)</code>. Any command that writes to TMEM (eg: <a class="el" href="rdpq_8c.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>) will "change" the resource. Any command that reads from TMEM (eg: <a class="el" href="rdpq__tri_8c.html#afb11d915a7ce8903b2b3e5ed9ef7936e" title="Draw a triangle (RDP command: TRI_*)">rdpq_triangle</a> with a texture) will "use" the resource. Writing to TMEM while something is reading requires a <code>SYNC_LOAD</code> command to be issued.</li>
</ul>
<p>Note that there is a limit with the current implementation: the RDP can use multiple tiles with a single command (eg: when using multi-texturing or LODs), but we are not able to track that correctly: all drawing commands for now assume that a single tile will be used. If this proves to be a problem, it is always possible to call <a class="el" href="rdpq_8c.html#aaec179fe71bba635005595cf356242f6" title="Schedule a RDP SYNC_TILE command.">rdpq_sync_tile</a> to manually issue a sync.</p>
<p>Autosync also works with blocks, albeit conservatively. When recording a block, it is not possible to know what the autosync state will be at the point of call (and obviously, it could be called in different situations with different states). The engine thus handles the worst case: at the beginning of a block, it assumes that all resources are "in use". This might cause some sync commands to be run in situations where it would not be strictly required, but the performance impact is unlikely to be noticeable.</p>
<p>Autosync engine can be enabled or disabled via <a class="el" href="rdpq_8c.html#aded7b5a770a9a0598410cb2f9de758c8" title="Enable a specific set of configuration flags.">rdpq_config_enable</a> / <a class="el" href="rdpq_8c.html#a2f9da183a4a282f68fb27dffa709dcfd" title="Disable a specific set of configuration flags.">rdpq_config_disable</a>. Remember that manually issuing sync commands require careful debugging on real hardware, as no emulator today is able to reproduce the effects of a missing sync command. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structrdpq__state__t" id="structrdpq__state__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrdpq__state__t">&#9670;&#160;</a></span>rdpq_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rdpq_state_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>State of the rdpq ucode overlay (partial). </p>
<p>This must be kept in sync with rsp_rdpq.S.</p>
<p>We don't map the whole state here as we don't need to access it from C in whole. We just map the initial part of the state, which is what we need. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a26b9e275a6dc2d0f3a8903a78d9e68f0" name="a26b9e275a6dc2d0f3a8903a78d9e68f0"></a>uint64_t</td>
<td class="fieldname">
sync_full</td>
<td class="fielddoc">
Last SYNC_FULL command. </td></tr>
<tr><td class="fieldtype">
<a id="a4966cb9c556597aa63ca1a8bf2554ce4" name="a4966cb9c556597aa63ca1a8bf2554ce4"></a>uint32_t</td>
<td class="fieldname">
rspq_syncpoint_id</td>
<td class="fielddoc">
Syncpoint ID at the time of the last SYNC_FULL command. </td></tr>
<tr><td class="fieldtype">
<a id="a80c0828b899176efd3822724cb79dd07" name="a80c0828b899176efd3822724cb79dd07"></a>uint32_t</td>
<td class="fieldname">
padding</td>
<td class="fielddoc">
Padding. </td></tr>
<tr><td class="fieldtype">
<a id="a9c2820055ca9c76d3bbb703e8c93446e" name="a9c2820055ca9c76d3bbb703e8c93446e"></a>uint32_t</td>
<td class="fieldname">
rdram_state_address</td>
<td class="fielddoc">
Address of this state structure in RDRAM. </td></tr>
<tr><td class="fieldtype">
<a id="a55701a2e678917743415b9011a9b4c9f" name="a55701a2e678917743415b9011a9b4c9f"></a>uint32_t</td>
<td class="fieldname">
rdram_syncpoint_id</td>
<td class="fielddoc">
Address of the syncpoint ID in RDRAM. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7d884af64503534642d525082ec827cd" name="a7d884af64503534642d525082ec827cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d884af64503534642d525082ec827cd">&#9670;&#160;</a></span>rdpq_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the RDPQ library. </p>
<p>This should be called by the initialization functions of the higher-level libraries using RDPQ to emit RDP commands, and/or by the application main if the application itself calls rdpq functions.</p>
<p>It is safe to call this function multiple times (it does nothing), so that multiple independent libraries using rdpq can call <a class="el" href="rdpq_8h.html#a568b75da730c69457404cf6dd0c1da15" title="Initialize the RDPQ library.">rdpq_init</a> with no side effects. </p>

</div>
</div>
<a id="aaf3a78a498699343d8ae2965853b67a0" name="aaf3a78a498699343d8ae2965853b67a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3a78a498699343d8ae2965853b67a0">&#9670;&#160;</a></span>rdpq_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown the RDPQ library. </p>
<p>This is mainly used for testing. </p>

</div>
</div>
<a id="af3951964fc692a7b56f1e250c45d6713" name="af3951964fc692a7b56f1e250c45d6713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3951964fc692a7b56f1e250c45d6713">&#9670;&#160;</a></span>rdpq_config_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rdpq_config_set </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the configuration of the RDPQ module. </p>
<p>This function allows you to change the configuration of rdpq to enable/disable features. This is useful mainly for advanced users that want to manually tune RDP programming, disabling some automatisms performed by rdpq.</p>
<p>The configuration is a bitmask that can be composed using the <code>RDPQ_CFG_*</code> macros.</p>
<p>To enable or disable specific configuration options use <a class="el" href="rdpq_8h.html#aefd8ecfd5bc7a5b577a927defecd99ae" title="Enable a specific set of configuration flags.">rdpq_config_enable</a> or <a class="el" href="rdpq_8h.html#aebf00c8f210cea9013d9690ea4594efd" title="Disable a specific set of configuration flags.">rdpq_config_disable</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>The new configuration to set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous configuration</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#aefd8ecfd5bc7a5b577a927defecd99ae" title="Enable a specific set of configuration flags.">rdpq_config_enable</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#aebf00c8f210cea9013d9690ea4594efd" title="Disable a specific set of configuration flags.">rdpq_config_disable</a> </dd></dl>

</div>
</div>
<a id="aded7b5a770a9a0598410cb2f9de758c8" name="aded7b5a770a9a0598410cb2f9de758c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aded7b5a770a9a0598410cb2f9de758c8">&#9670;&#160;</a></span>rdpq_config_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rdpq_config_enable </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cfg_enable_bits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable a specific set of configuration flags. </p>
<p>This function allows you to modify the configuration of rdpq activating a specific set of features. It can be useful to temporarily modify the configuration and then restore it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg_enable_bits</td><td>Configuration flags to enable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous configuration</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#af3951964fc692a7b56f1e250c45d6713" title="Set the configuration of the RDPQ module.">rdpq_config_set</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#aebf00c8f210cea9013d9690ea4594efd" title="Disable a specific set of configuration flags.">rdpq_config_disable</a> </dd></dl>

</div>
</div>
<a id="a2f9da183a4a282f68fb27dffa709dcfd" name="a2f9da183a4a282f68fb27dffa709dcfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f9da183a4a282f68fb27dffa709dcfd">&#9670;&#160;</a></span>rdpq_config_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rdpq_config_disable </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cfg_disable_bits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable a specific set of configuration flags. </p>
<p>This function allows you to modify the configuration of rdpq disabling a specific set of features. It can be useful to temporarily modify the configuration and then restore it.</p>
<div class="fragment"><div class="line"><span class="comment">// Disable automatic scissor generation</span></div>
<div class="line">uint32_t old_cfg = <a class="code hl_function" href="rdpq_8c.html#a2f9da183a4a282f68fb27dffa709dcfd">rdpq_config_disable</a>(<a class="code hl_define" href="rdpq_8h.html#a87db603433fa7334d885bbf80205ab3e">RDPQ_CFG_AUTOSCISSOR</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This will change the render target but will NOT issue a corresponding SET_SCISSOR.</span></div>
<div class="line"><span class="comment">// This is dangerous as the currently-configured scissor might allow to draw outside of</span></div>
<div class="line"><span class="comment">// the surface boundary, but an advanced user will know if this is correct.</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#a9020360dcb7a05b4270d8a66e8dad6b7">rdpq_set_color_image</a>(surface);</div>
<div class="line"> </div>
<div class="line">[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Restore the previous configuration</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#af3951964fc692a7b56f1e250c45d6713">rdpq_config_set</a>(old_cfg);</div>
<div class="ttc" id="ardpq_8c_html_a2f9da183a4a282f68fb27dffa709dcfd"><div class="ttname"><a href="rdpq_8c.html#a2f9da183a4a282f68fb27dffa709dcfd">rdpq_config_disable</a></div><div class="ttdeci">uint32_t rdpq_config_disable(uint32_t cfg)</div><div class="ttdoc">Disable a specific set of configuration flags.</div><div class="ttdef"><b>Definition</b> rdpq.c:512</div></div>
<div class="ttc" id="ardpq_8c_html_a9020360dcb7a05b4270d8a66e8dad6b7"><div class="ttname"><a href="rdpq_8c.html#a9020360dcb7a05b4270d8a66e8dad6b7">rdpq_set_color_image</a></div><div class="ttdeci">void rdpq_set_color_image(const surface_t *surface)</div><div class="ttdoc">Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)</div><div class="ttdef"><b>Definition</b> rdpq.c:1001</div></div>
<div class="ttc" id="ardpq_8c_html_af3951964fc692a7b56f1e250c45d6713"><div class="ttname"><a href="rdpq_8c.html#af3951964fc692a7b56f1e250c45d6713">rdpq_config_set</a></div><div class="ttdeci">uint32_t rdpq_config_set(uint32_t cfg)</div><div class="ttdoc">Set the configuration of the RDPQ module.</div><div class="ttdef"><b>Definition</b> rdpq.c:500</div></div>
<div class="ttc" id="ardpq_8h_html_a87db603433fa7334d885bbf80205ab3e"><div class="ttname"><a href="rdpq_8h.html#a87db603433fa7334d885bbf80205ab3e">RDPQ_CFG_AUTOSCISSOR</a></div><div class="ttdeci">#define RDPQ_CFG_AUTOSCISSOR</div><div class="ttdoc">Configuration flag: enable automatic generation of SET_SCISSOR commands on render target change.</div><div class="ttdef"><b>Definition</b> rdpq.h:227</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg_disable_bits</td><td>Configuration flags to disable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous configuration</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#af3951964fc692a7b56f1e250c45d6713" title="Set the configuration of the RDPQ module.">rdpq_config_set</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#aefd8ecfd5bc7a5b577a927defecd99ae" title="Enable a specific set of configuration flags.">rdpq_config_enable</a> </dd></dl>

</div>
</div>
<a id="aeb872b5dba9db3ba975bf2b3b8282e71" name="aeb872b5dba9db3ba975bf2b3b8282e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb872b5dba9db3ba975bf2b3b8282e71">&#9670;&#160;</a></span>rdpq_fence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_fence </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Public rdpq_fence API, redefined it. </p>
<p>Add a fence to synchronize RSP with RDP commands. </p>

</div>
</div>
<a id="a4e49b28516eb6855e1f4c5bd35fe12ad" name="a4e49b28516eb6855e1f4c5bd35fe12ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e49b28516eb6855e1f4c5bd35fe12ad">&#9670;&#160;</a></span>rdpq_exec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_exec </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send to the RDP a buffer of RDP commands from RDRAM. </p>
<p>This command can be used to execute raw RDP commands from RDRAM. It is normally not necessary to call this function as normal rdpq functions will simply enqueue the commands in the RSP queue, but there can be cases where commands have been prepared in RAM somehow (especially, for compatibility with existing code that assembled RDP commands in RDRAM, or to playback RDP command lists prepared with offline tools).</p>
<p>This function fully interoperates with the rest of RDPQ, so you can freely intermix it with standard rdpq calls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the buffer containing RDP commands </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer, in bytes (must be a multiple of 8)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function cannot be called within a block. </dd></dl>

</div>
</div>
<a id="a160540e0fbb288415a097fdbde5b8812" name="a160540e0fbb288415a097fdbde5b8812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a160540e0fbb288415a097fdbde5b8812">&#9670;&#160;</a></span>__rdpq_autosync_change()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_autosync_change </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Autosync engine: mark certain resources as being changed. </p>
<p>This is the core of the autosync engine. Whenever a resource is "changed" while "in use", a SYNC command must be issued. This is a slightly conservative approach, as the RDP might already have finished using that resource, but we have no way to know it. The SYNC command will then reset the "use" status of each respective resource. </p>

</div>
</div>
<a id="a5e7cc732c607a8a3182c510e6c643fc6" name="a5e7cc732c607a8a3182c510e6c643fc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e7cc732c607a8a3182c510e6c643fc6">&#9670;&#160;</a></span>__rdpq_block_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_block_begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize RDP block mangament. </p>
<p>This is called by <a class="el" href="rspq_8c.html#a41f292fc1f7b261f84c55fc356f86acf" title="Begin creating a new block.">rspq_block_begin</a>. It resets all the block management state to default.</p>
<p>Notice that no allocation is performed. This is because we do block allocation lazily as soon as a rdpq command is issued. In fact, if the block does not contain rdpq commands, it would be a waste of time and memory to allocate a RDP buffer. The allocations will be performed by <a class="el" href="rdpq_8c.html#ab0187e0dcc3e6ef22ec15a36eabe1102" title="Allocate a new RDP block buffer, chaining it to the current one (if any)">__rdpq_block_next_buffer</a> as soon as a rdpq command is written.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rspq_8c.html#a41f292fc1f7b261f84c55fc356f86acf" title="Begin creating a new block.">rspq_block_begin</a> </dd>
<dd>
<a class="el" href="rdpq_8c.html#ab0187e0dcc3e6ef22ec15a36eabe1102" title="Allocate a new RDP block buffer, chaining it to the current one (if any)">__rdpq_block_next_buffer</a> </dd></dl>

</div>
</div>
<a id="ab0187e0dcc3e6ef22ec15a36eabe1102" name="ab0187e0dcc3e6ef22ec15a36eabe1102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0187e0dcc3e6ef22ec15a36eabe1102">&#9670;&#160;</a></span>__rdpq_block_next_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_block_next_buffer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new RDP block buffer, chaining it to the current one (if any) </p>
<p>This function is called by <a class="el" href="rdpq__internal_8h.html#a2ea7458c96e94aa5fe7481e3f679a4c4" title="Write a passthrough RDP command into the rspq queue.">rdpq_passthrough_write</a> and <a class="el" href="rdpq_8h.html#afa4205c5a6dbf58f7cb665a3c68d1991" title="Enqueue a RSP command that also generates RDP commands.">rdpq_write</a> when we are about to write a rdpq command in a block, and the current RDP buffer is full (<code>wptr + cmdsize &gt;= wend</code>). By extension, it is also called when the current RDP buffer has not been allocated yet (<code>wptr == wend == NULL</code>).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#afa4205c5a6dbf58f7cb665a3c68d1991" title="Enqueue a RSP command that also generates RDP commands.">rdpq_write</a> </dd>
<dd>
<a class="el" href="rdpq__internal_8h.html#a2ea7458c96e94aa5fe7481e3f679a4c4" title="Write a passthrough RDP command into the rspq queue.">rdpq_passthrough_write</a> </dd></dl>

</div>
</div>
<a id="a0e87bea5a505bd42b36b0bd750b8c9c2" name="a0e87bea5a505bd42b36b0bd750b8c9c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e87bea5a505bd42b36b0bd750b8c9c2">&#9670;&#160;</a></span>__rdpq_block_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rdpq__internal_8h.html#structrdpq__block__t">rdpq_block_t</a> * __rdpq_block_end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish creation of a RDP block. </p>
<p>This is called by <a class="el" href="rspq_8c.html#a81339d69802148a09829d1c6d9a9f9f6" title="Finish creating a block.">rspq_block_end</a>. It finalizes block creation and return a pointer to the first node of the block, which will be put within the <a class="el" href="rspq__internal_8h.html#structrspq__block__t" title="A rspq block: pre-recorded array of commands.">rspq_block_t</a> structure, so to be able to reference it in <a class="el" href="rdpq_8c.html#a7e9fde5a3babeec454eb8ea92f390601" title="Notify that a rspq block was run (called by rspq_block_run).">__rdpq_block_run</a> and <a class="el" href="rdpq_8c.html#a95f193ed65ef91d46599c3ca7edb1cc6" title="Free a block.">__rdpq_block_free</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>rdpq_block_t* The created block (first node)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rspq_8c.html#a81339d69802148a09829d1c6d9a9f9f6" title="Finish creating a block.">rspq_block_end</a> </dd>
<dd>
<a class="el" href="rdpq_8c.html#a7e9fde5a3babeec454eb8ea92f390601" title="Notify that a rspq block was run (called by rspq_block_run).">__rdpq_block_run</a> </dd>
<dd>
<a class="el" href="rdpq_8c.html#a95f193ed65ef91d46599c3ca7edb1cc6" title="Free a block.">__rdpq_block_free</a> </dd></dl>

</div>
</div>
<a id="a95f193ed65ef91d46599c3ca7edb1cc6" name="a95f193ed65ef91d46599c3ca7edb1cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f193ed65ef91d46599c3ca7edb1cc6">&#9670;&#160;</a></span>__rdpq_block_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_block_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq__internal_8h.html#structrdpq__block__t">rdpq_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a block. </p>
<p>This function is called when a block is freed. It is called by <a class="el" href="rspq_8c.html#aa1d3fe8768ca839b49421bf08ac5b5c2" title="Free a block that is not needed any more.">rspq_block_free</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rspq_8c.html#aa1d3fe8768ca839b49421bf08ac5b5c2" title="Free a block that is not needed any more.">rspq_block_free</a>. </dd></dl>

</div>
</div>
<a id="aa6f78d017798b8072f8006423f506e5f" name="aa6f78d017798b8072f8006423f506e5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f78d017798b8072f8006423f506e5f">&#9670;&#160;</a></span>__rdpq_block_reserve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_block_reserve </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rdp_commands</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserve space in the RDP static buffer for a number of RDP commands. </p>
<p>This is called by <a class="el" href="rdpq_8h.html#afa4205c5a6dbf58f7cb665a3c68d1991" title="Enqueue a RSP command that also generates RDP commands.">rdpq_write</a> when run within a block. It makes sure that the static buffer has enough space for the specified number of RDP commands, and also switch back to the dynamic buffer if the command is going to generate a large or unbounded number of commands. </p>

</div>
</div>
<a id="af94e0a9672c6ee667c9da808183cee7b" name="af94e0a9672c6ee667c9da808183cee7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94e0a9672c6ee667c9da808183cee7b">&#9670;&#160;</a></span>__rdpq_block_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __rdpq_block_update </td>
          <td>(</td>
          <td class="paramtype">volatile uint32_t *&#160;</td>
          <td class="paramname"><em>wptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a new RDP write pointer, and enqueue a RSP command to run the buffer until there. </p>
<p>This function is called by <a class="el" href="rdpq__internal_8h.html#a2ea7458c96e94aa5fe7481e3f679a4c4" title="Write a passthrough RDP command into the rspq queue.">rdpq_passthrough_write</a> after some RDP commands have been written into the block's RDP buffer. A rspq command <a class="el" href="rspq__internal_8h.html#aba01db17f4a2bfbc3db60dc172972a25abe06e92ff0ad671b894d7406f36caf6a" title="RSPQ Command: send more data to RDP (appended to the end of the current buffer)">RSPQ_CMD_RDP_APPEND_BUFFER</a> will be issued so that the RSP will tell the RDP to fetch and run the new commands, appended at the end of the current buffer.</p>
<p>If possible, though, this function will coalesce the command with an immediately preceding RSPQ_CMD_RDP_APPEND_BUFFER (or even RSPQ_CMD_RDP_SET_BUFFER, if we are at the start of the buffer), so that only a single RSP command is issued, which covers multiple RDP commands.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wptr</td><td>New block's RDP write pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9020360dcb7a05b4270d8a66e8dad6b7" name="a9020360dcb7a05b4270d8a66e8dad6b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9020360dcb7a05b4270d8a66e8dad6b7">&#9670;&#160;</a></span>rdpq_set_color_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_color_image </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>surface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE) </p>
<p>This command is used to specify the render target that the RDP will draw to.</p>
<p>Calling this function also automatically configures scissoring (via <a class="el" href="rdpq_8h.html#ac5a643cb5e908bbc0a34ea3c5f02dcf3" title="Configure a scissoring rectangle in screen coordinates (RDP command: SET_SCISSOR)">rdpq_set_scissor</a>), so that all draw commands are clipped within the buffer, to avoid overwriting memory around it. Use <code>rdpq_config_disable(RDPQ_CFG_AUTOSCISSOR)</code> if you need to disable this behavior.</p>
<p>If you have a raw pointer instead of a <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a>, you can use <a class="el" href="surface_8c.html#a47bd38809ff7938c1d0123d540a2851a" title="Initialize a surface_t structure with the provided buffer.">surface_make</a> to create a temporary surface structure to pass the information to <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a>.</p>
<p>If the passed surface is NULL, rdpq will be detached from the render target. If a drawing command is issued without a render target, it will be silently ignored (but the validator will flag it as an error).</p>
<p>The only valid formats for a surface to be used as a render target are: <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5" title="Format RGBA 5551 (16-bit)">FMT_RGBA16</a>, <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a0ae35df0b9a28b002380dc866dad303a" title="Format RGBA 8888 (32-bit)">FMT_RGBA32</a>, and <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a7845dc9354faccf8262e271b1026b0f2" title="Format I8: 8-bit intensity (8-bit per pixel)">FMT_I8</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">surface</td><td>Surface to set as render target</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a124ae765728993ad1207ca1410edaee2" title="Low-level version of rdpq_set_color_image, with address lookup capability.">rdpq_set_color_image_raw</a> </dd></dl>

</div>
</div>
<a id="a8a540c568fae4b371828e0b62a9a67ec" name="a8a540c568fae4b371828e0b62a9a67ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a540c568fae4b371828e0b62a9a67ec">&#9670;&#160;</a></span>rdpq_set_z_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_z_image </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>surface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the Z-buffer to use (RDP command: SET_Z_IMAGE) </p>
<p>This commands is used to specify the Z-buffer that will be used by RDP for the next rendering commands.</p>
<p>The surface must have the same width and height of the surface set as render target (via <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a> or <a class="el" href="rdpq_8h.html#a124ae765728993ad1207ca1410edaee2" title="Low-level version of rdpq_set_color_image, with address lookup capability.">rdpq_set_color_image_raw</a>). The color format should be FMT_RGBA16, even though Z values will be written to it.</p>
<p>If the passed surface is NULL, rdpq will be detached from the Z buffer. If a drawing command using Z is issued without a Z buffer, the behaviour will be undefined (but the validator will flag it as an error).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">surface</td><td>Surface to set as Z buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#ae9e033b79ec7e92a3038e4e2bde7094f" title="Low-level version of rdpq_set_z_image, with address lookup capability.">rdpq_set_z_image_raw</a> </dd></dl>

</div>
</div>
<a id="a243f6adec109fcf042273b5e6402f83c" name="a243f6adec109fcf042273b5e6402f83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a243f6adec109fcf042273b5e6402f83c">&#9670;&#160;</a></span>rdpq_set_texture_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_texture_image </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="surface_8h.html#structsurface__t">surface_t</a> *&#160;</td>
          <td class="paramname"><em>surface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the texture to use (RDP command: SET_TEX_IMAGE) </p>
<p>This commands is used to specify the texture image that will be used by RDP for the next load commands (<a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> and <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>).</p>
<p>The surface must have the same width and height of the surface set as render target (via <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a> or <a class="el" href="rdpq_8h.html#a124ae765728993ad1207ca1410edaee2" title="Low-level version of rdpq_set_color_image, with address lookup capability.">rdpq_set_color_image_raw</a>). The color format should be <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5" title="Format RGBA 5551 (16-bit)">FMT_RGBA16</a>, even though Z values will be written to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">surface</td><td>Surface to set as texture</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#aaf80d096c730fa3aa29fc8a48154249c" title="Low-level version of rdpq_set_texture_image, with address lookup capability.">rdpq_set_texture_image_raw</a> </dd></dl>

</div>
</div>
<a id="aca6d2bfda322d1ed6bd17f79f7b9a9bb" name="aca6d2bfda322d1ed6bd17f79f7b9a9bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca6d2bfda322d1ed6bd17f79f7b9a9bb">&#9670;&#160;</a></span>rdpq_get_other_modes_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t rdpq_get_other_modes_raw </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the current render mode register. </p>
<p>This function executes a full sync (<a class="el" href="rspq_8c.html#af3055d289f73a125e15b72429cfc91ed" title="Wait until all commands in the queue have been executed by RSP.">rspq_wait</a>) and then extracts the current raw render mode from the RSP state. This should be used only for debugging purposes.</p>
<dl class="section return"><dt>Returns</dt><dd>THe current value of the render mode register. </dd></dl>

</div>
</div>
<a id="af73b4dfd32dafc97cceee676eeffeb23" name="af73b4dfd32dafc97cceee676eeffeb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73b4dfd32dafc97cceee676eeffeb23">&#9670;&#160;</a></span>rdpq_set_tile_autotmem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_tile_autotmem </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>tmem_bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the auto-TMEM feature of <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>. </p>
<p>This function is used to manage the auto-TMEM allocation feature for <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>. It allows to keep track of the allocated space in TMEM, which can be a simplification. It is used by the rdpq_tex module (eg: <a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a>).</p>
<p>The feature works like this:</p><ul>
<li>First, start auto-TMEM via rdpq_set_tile_autotmem(0)</li>
<li>Load a texture and configure a tile for it. When configuring the tile, pass <a class="el" href="rdpq_8h.html#adf226fa6b9e3c1cdc2209e5dd2c0c0b4" title="Special TMEM address to pass to rdpq_set_tile to use automatic TMEM allocation.">RDPQ_AUTOTMEM</a> as tmem_addr. This will allocate the texture in the first available space.</li>
<li>Call <a class="el" href="rdpq_8h.html#af73b4dfd32dafc97cceee676eeffeb23" title="Configure the auto-TMEM feature of rdpq_set_tile.">rdpq_set_tile_autotmem</a> again passing the number of used bytes in TMEM. Notice that rdpq can't know this by itself.</li>
<li>Continue loading the other textures/mipmaps just like before, with <a class="el" href="rdpq_8h.html#adf226fa6b9e3c1cdc2209e5dd2c0c0b4" title="Special TMEM address to pass to rdpq_set_tile to use automatic TMEM allocation.">RDPQ_AUTOTMEM</a>.</li>
<li>If the TMEM is full, a RSP assertion will be triggered.</li>
<li>When you are done, call <a class="el" href="rdpq_8h.html#af73b4dfd32dafc97cceee676eeffeb23" title="Configure the auto-TMEM feature of rdpq_set_tile.">rdpq_set_tile_autotmem</a> passing -1 to finish. This allows reentrant calls to work, and also helps generating errors in case of misuses.</li>
</ul>
<p>While this API might seem as a small simplification over manually tracking TMEM allocation, it might help modularizing the code, and also allows to record rspq blocks that handle texture loading without hardcoding the TMEM position.</p>
<dl class="section note"><dt>Note</dt><dd>This function is part of the raw API. For a higher-level API on texture loading, see <a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmem_bytes</td><td>0: begin, -1: end, &gt;0: number of additional bytes that were used in TMEM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a> </dd>
<dd>
<a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd></dl>

</div>
</div>
<a id="aa667aafb95c47fac38f4fa2c2c13f1fb" name="aa667aafb95c47fac38f4fa2c2c13f1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa667aafb95c47fac38f4fa2c2c13f1fb">&#9670;&#160;</a></span>rdpq_sync_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_sync_full </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a RDP SYNC_FULL command and register a callback when it is done. </p>
<p>This function schedules a RDP SYNC_FULL command into the RSP queue. This command basically forces the RDP to finish drawing everything that has been sent to it before it, and then generate an interrupt when it is done.</p>
<p>This is normally useful at the end of the frame. For instance, it is used internally by <a class="el" href="rdpq__attach_8c.html#ac8c2f2ec501e83d6fcd4c37675c512f7" title="Detach the RDP from the current surface, and restore the previous one.">rdpq_detach</a> to make sure RDP is finished drawing on the target display before detaching it.</p>
<p>The function can be passed an optional callback that will be called when the RDP interrupt triggers. This can be useful to perform some operations asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>A callback to invoke under interrupt when the RDP is finished drawing, or NULL if no callback is necessary. </td></tr>
    <tr><td class="paramname">arg</td><td>Opaque argument that will be passed to the callback.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rspq_8c.html#af3055d289f73a125e15b72429cfc91ed" title="Wait until all commands in the queue have been executed by RSP.">rspq_wait</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#aeb872b5dba9db3ba975bf2b3b8282e71" title="Add a fence to synchronize RSP with RDP commands.">rdpq_fence</a> </dd></dl>

</div>
</div>
<a id="aca4a301ee784902b39850d428be41ff0" name="aca4a301ee784902b39850d428be41ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca4a301ee784902b39850d428be41ff0">&#9670;&#160;</a></span>rdpq_sync_pipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_sync_pipe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a RDP SYNC_PIPE command. </p>
<p>This command must be sent before changing the RDP pipeline configuration (eg: color combiner, blender, colors, etc.) if the RDP is currently drawing.</p>
<p>Normally, you do not need to call this function because rdpq automatically emits sync commands whenever necessary. You must call this function only if you have disabled autosync for SYNC_PIPE (see <a class="el" href="rdpq_8h.html#a11933b43004aa3a567407f86835b65b1" title="Configuration flag: enable automatic generation of SYNC_PIPE commands.">RDPQ_CFG_AUTOSYNCPIPE</a>).</p>
<dl class="section note"><dt>Note</dt><dd>No software emulator currently requires this command, so manually sending SYNC_PIPE should be developed on real hardware. </dd></dl>

</div>
</div>
<a id="aaec179fe71bba635005595cf356242f6" name="aaec179fe71bba635005595cf356242f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec179fe71bba635005595cf356242f6">&#9670;&#160;</a></span>rdpq_sync_tile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_sync_tile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a RDP SYNC_TILE command. </p>
<p>This command must be sent before changing a RDP tile configuration if the RDP is currently drawing using that same tile.</p>
<p>Normally, you do not need to call this function because rdpq automatically emits sync commands whenever necessary. You must call this function only if you have disabled autosync for SYNC_TILE (see <a class="el" href="rdpq_8h.html#a6c809b3b78387788051264c61c3aa808" title="Configuration flag: enable automatic generation of SYNC_TILE commands.">RDPQ_CFG_AUTOSYNCTILE</a>).</p>
<dl class="section note"><dt>Note</dt><dd>No software emulator currently requires this command, so manually sending SYNC_TILE should be developed on real hardware. </dd></dl>

</div>
</div>
<a id="a73feb6e400573369c356d2043ff6deda" name="a73feb6e400573369c356d2043ff6deda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73feb6e400573369c356d2043ff6deda">&#9670;&#160;</a></span>rdpq_sync_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_sync_load </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a RDP SYNC_LOAD command. </p>
<p>This command must be sent before loading an area of TMEM if the RDP is currently drawing using that same area.</p>
<p>Normally, you do not need to call this function because rdpq automatically emits sync commands whenever necessary. You must call this function only if you have disabled autosync for SYNC_LOAD (see <a class="el" href="rdpq_8h.html#aae8dd5392d55700ebb66d69a49e181b1" title="Configuration flag: enable automatic generation of SYNC_LOAD commands.">RDPQ_CFG_AUTOSYNCLOAD</a>).</p>
<dl class="section note"><dt>Note</dt><dd>No software emulator currently requires this command, so manually sending SYNC_LOAD should be developed on real hardware. </dd></dl>

</div>
</div>
<a id="a70a6556d7d088ca2b745fa145e3aeee3" name="a70a6556d7d088ca2b745fa145e3aeee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a6556d7d088ca2b745fa145e3aeee3">&#9670;&#160;</a></span>rdpq_set_fill_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_fill_color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enqueue a SET_FILL_COLOR RDP command. </p>
<p>This command is used to configure the color used by RDP when running in FILL mode (<a class="el" href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9" title="Reset render mode to FILL type.">rdpq_set_mode_fill</a>) and normally used by <a class="el" href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124" title="Draw a filled rectangle (RDP command: FILL_RECTANGLE)">rdpq_fill_rectangle</a>.</p>
<p>Notice that <a class="el" href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9" title="Reset render mode to FILL type.">rdpq_set_mode_fill</a> automatically calls this function, because in general it makes no sense to configure the FILL mode without also setting a FILL color.</p>
<div class="fragment"><div class="line"><span class="comment">// Fill top half of the screen in red</span></div>
<div class="line"><a class="code hl_function" href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9">rdpq_set_mode_fill</a>(<a class="code hl_define" href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a>(255, 0, 0, 0));</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a>(0, 0, 320, 120);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fill bottom half of the screen in blue.</span></div>
<div class="line"><span class="comment">// No need to change mode again (it&#39;s already in fill mode),</span></div>
<div class="line"><span class="comment">// so just change the fill color.</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3">rdpq_set_fill_color</a>(<a class="code hl_define" href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a>(0, 0, 255, 0));</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a>(0, 120, 320, 240);</div>
<div class="ttc" id="agroup__graphics_html_gae16bab5741f411ec4ef51b0295f6e705"><div class="ttname"><a href="group__graphics.html#gae16bab5741f411ec4ef51b0295f6e705">RGBA32</a></div><div class="ttdeci">#define RGBA32(rx, gx, bx, ax)</div><div class="ttdoc">Create a color_t from the R,G,B,A components in the RGBA32 range (0-255).</div><div class="ttdef"><b>Definition</b> graphics.h:74</div></div>
<div class="ttc" id="ardpq_8c_html_a70a6556d7d088ca2b745fa145e3aeee3"><div class="ttname"><a href="rdpq_8c.html#a70a6556d7d088ca2b745fa145e3aeee3">rdpq_set_fill_color</a></div><div class="ttdeci">void rdpq_set_fill_color(color_t color)</div><div class="ttdoc">Enqueue a SET_FILL_COLOR RDP command.</div><div class="ttdef"><b>Definition</b> rdpq.h:835</div></div>
<div class="ttc" id="ardpq__mode_8c_html_a99c5c398b388f6d1683e7405a6058fb9"><div class="ttname"><a href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9">rdpq_set_mode_fill</a></div><div class="ttdeci">void rdpq_set_mode_fill(color_t color)</div><div class="ttdoc">Reset render mode to FILL type.</div><div class="ttdef"><b>Definition</b> rdpq_mode.h:299</div></div>
<div class="ttc" id="ardpq__rect_8h_html_a9c6405f89d2fe70046330964c21ba124"><div class="ttname"><a href="rdpq__rect_8h.html#a9c6405f89d2fe70046330964c21ba124">rdpq_fill_rectangle</a></div><div class="ttdeci">#define rdpq_fill_rectangle(x0, y0, x1, y1)</div><div class="ttdoc">Draw a filled rectangle (RDP command: FILL_RECTANGLE)</div><div class="ttdef"><b>Definition</b> rdpq_rect.h:249</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>The color to use to fill</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__mode_8c.html#a99c5c398b388f6d1683e7405a6058fb9" title="Reset render mode to FILL type.">rdpq_set_mode_fill</a> </dd></dl>

</div>
</div>
<a id="aba0d25e9f693aa1a288381c5a09ba8e1" name="aba0d25e9f693aa1a288381c5a09ba8e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba0d25e9f693aa1a288381c5a09ba8e1">&#9670;&#160;</a></span>rdpq_set_fill_color_stripes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_fill_color_stripes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enqueue a SET_FILL_COLOR RDP command to draw a striped pattern. </p>
<p>This command is similar to <a class="el" href="rdpq_8h.html#a70a6556d7d088ca2b745fa145e3aeee3" title="Enqueue a SET_FILL_COLOR RDP command.">rdpq_set_fill_color</a>, but allows to configure two colors, and creates a fill pattern that alternates horizontally between them every 2 pixels (creating vertical stripes).</p>
<p>This command relies on a low-level hack of how RDP works in filling primitives, so there is no configuration knob: it only works with RGBA 16-bit target buffers, it only allows two colors, and the vertical stripes are exactly 2 pixel width.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color1</td><td>Color of the first vertical stripe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">color2</td><td>Color of the second vertical stripe</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a70a6556d7d088ca2b745fa145e3aeee3" title="Enqueue a SET_FILL_COLOR RDP command.">rdpq_set_fill_color</a> </dd></dl>

</div>
</div>
<a id="a7ffd0e373836f8500094bdcbe85ce530" name="a7ffd0e373836f8500094bdcbe85ce530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ffd0e373836f8500094bdcbe85ce530">&#9670;&#160;</a></span>rdpq_set_fog_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_fog_color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP FOG blender register. </p>
<p>This function sets the internal RDP FOG register, part of the blender unit. As the name implies, this register is normally used as part of fog calculation, but it is actually a generic color register that can be used in custom blender formulas.</p>
<p>Another similar blender register is the BLEND register, configured via <a class="el" href="rdpq_8h.html#ae6300356555382c0aa75967aa8c15640" title="Set the RDP BLEND blender register.">rdpq_set_blend_color</a>.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae0c65c3d742a4caf62bcd0d830793584" title="Build a 1-pass blender formula.">RDPQ_BLENDER</a> and <a class="el" href="rdpq__macros_8h.html#a58d9cd9a1b0d5c0c5b5d740ca4b970c8" title="Build a 2-pass blender formula.">RDPQ_BLENDER2</a> on how to configure the blender (typically, via <a class="el" href="rdpq__mode_8c.html#a64a153623e5985ce5c434bf52ba6efa6" title="Configure the formula to use for blending.">rdpq_mode_blender</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color to set the FOG register to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae0c65c3d742a4caf62bcd0d830793584" title="Build a 1-pass blender formula.">RDPQ_BLENDER</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a58d9cd9a1b0d5c0c5b5d740ca4b970c8" title="Build a 2-pass blender formula.">RDPQ_BLENDER2</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ae6300356555382c0aa75967aa8c15640" title="Set the RDP BLEND blender register.">rdpq_set_blend_color</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a64a153623e5985ce5c434bf52ba6efa6" title="Configure the formula to use for blending.">rdpq_mode_blender</a> </dd></dl>

</div>
</div>
<a id="ae6300356555382c0aa75967aa8c15640" name="ae6300356555382c0aa75967aa8c15640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6300356555382c0aa75967aa8c15640">&#9670;&#160;</a></span>rdpq_set_blend_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_blend_color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP BLEND blender register. </p>
<p>This function sets the internal RDP BLEND register, part of the blender unit. As the name implies, this register is normally used as part of fog calculation, but it is actually a generic color register that can be used in custom blender formulas.</p>
<p>Another similar blender register is the FOG register, configured via <a class="el" href="rdpq_8h.html#a7ffd0e373836f8500094bdcbe85ce530" title="Set the RDP FOG blender register.">rdpq_set_fog_color</a>.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae0c65c3d742a4caf62bcd0d830793584" title="Build a 1-pass blender formula.">RDPQ_BLENDER</a> and <a class="el" href="rdpq__macros_8h.html#a58d9cd9a1b0d5c0c5b5d740ca4b970c8" title="Build a 2-pass blender formula.">RDPQ_BLENDER2</a> on how to configure the blender (typically, via <a class="el" href="rdpq__mode_8c.html#a64a153623e5985ce5c434bf52ba6efa6" title="Configure the formula to use for blending.">rdpq_mode_blender</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color to set the BLEND register to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae0c65c3d742a4caf62bcd0d830793584" title="Build a 1-pass blender formula.">RDPQ_BLENDER</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a58d9cd9a1b0d5c0c5b5d740ca4b970c8" title="Build a 2-pass blender formula.">RDPQ_BLENDER2</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a7ffd0e373836f8500094bdcbe85ce530" title="Set the RDP FOG blender register.">rdpq_set_fog_color</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a64a153623e5985ce5c434bf52ba6efa6" title="Configure the formula to use for blending.">rdpq_mode_blender</a> </dd></dl>

</div>
</div>
<a id="ad25a8b6c5eb35fb2253f601c3be24867" name="ad25a8b6c5eb35fb2253f601c3be24867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25a8b6c5eb35fb2253f601c3be24867">&#9670;&#160;</a></span>rdpq_set_prim_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_prim_color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR) </p>
<p>This function sets the internal RDP PRIM register, part of the color combiner unit. Naming aside, it is a generic color register that can be used in custom color combiner formulas.</p>
<p>Another similar blender register is the ENV register, configured via <a class="el" href="rdpq_8h.html#a289f1c0c4e92d66d71c55bd6c8103e3e" title="Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR)">rdpq_set_env_color</a>.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> and <a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> on how to configure the color combiner (typicall, via <a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a>).</p>
<p>If you wish to set PRIM LOD or PRIM MIN LOD values of the PRIM register, see <a class="el" href="rdpq_8h.html#a37ff624a53a01a69564738ee0862480f" title="Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_prim_lod_frac</a>, <a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a> or <a class="el" href="rdpq_8h.html#a7ad2689041d0f8d70fc4a82c3330c064" title="Set the RDP PRIM combiner register (raw version) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_register_raw</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color to set the PRIM register to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a289f1c0c4e92d66d71c55bd6c8103e3e" title="Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR)">rdpq_set_env_color</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a37ff624a53a01a69564738ee0862480f" title="Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_prim_lod_frac</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a7ad2689041d0f8d70fc4a82c3330c064" title="Set the RDP PRIM combiner register (raw version) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_register_raw</a> </dd></dl>

</div>
</div>
<a id="a9507264b7ca4898df8ae9913890185c7" name="a9507264b7ca4898df8ae9913890185c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9507264b7ca4898df8ae9913890185c7">&#9670;&#160;</a></span>rdpq_set_detail_factor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_detail_factor </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial)) </p>
<p>This function sets the internal minimum clamp for LOD fraction, that is used for determining the interpolation blend factor of a detail or sharpen texture at high magnification.</p>
<p>Range is [0..1] where 0 means no influence, and 1 means full influence. The range is internally inverted and converted to [0..31] for the RDP hardware</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value to set the register to in range [0..1]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> </dd></dl>

</div>
</div>
<a id="a37ff624a53a01a69564738ee0862480f" name="a37ff624a53a01a69564738ee0862480f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37ff624a53a01a69564738ee0862480f">&#9670;&#160;</a></span>rdpq_set_prim_lod_frac()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_prim_lod_frac </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial)) </p>
<p>This function sets the internal Level of Detail fraction for primitive register, that is used for custom linear interpolation between any two colors in a Color Combiner.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> and <a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> on how to configure the color combiner (typicall, via <a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a>).</p>
<p>If you wish to set PRIM MIN LOD value, see <a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value to set the PRIM LOD register to in range [0..255]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a> </dd></dl>

</div>
</div>
<a id="a7ad2689041d0f8d70fc4a82c3330c064" name="a7ad2689041d0f8d70fc4a82c3330c064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad2689041d0f8d70fc4a82c3330c064">&#9670;&#160;</a></span>rdpq_set_prim_register_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_prim_register_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>minlod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>primlod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP PRIM combiner register (raw version) (RDP command: SET_PRIM_COLOR) </p>
<p>This function sets the internal RDP PRIM register, part of the color combiner unit. Naming aside, it is a generic color register that can be used in custom color combiner formulas.</p>
<p>It also sets the PRIM LOD FRAC and PRIM MIN LOD FRAC values for the PRIM register For more information, see <a class="el" href="rdpq_8h.html#a37ff624a53a01a69564738ee0862480f" title="Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_prim_lod_frac</a>, <a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a>.</p>
<p>Another similar blender register is the ENV register, configured via <a class="el" href="rdpq_8h.html#a289f1c0c4e92d66d71c55bd6c8103e3e" title="Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR)">rdpq_set_env_color</a>.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> and <a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> on how to configure the color combiner (typicall, via <a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a>).</p>
<p>If you wish to set PRIM COLOR or PRIM LOD or PRIM MIN LOD values individually, see <a class="el" href="rdpq_8h.html#a37ff624a53a01a69564738ee0862480f" title="Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_prim_lod_frac</a>, <a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a> or <a class="el" href="rdpq_8h.html#ad25a8b6c5eb35fb2253f601c3be24867" title="Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_color</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color to set the PRIM register to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minlod</td><td>Minimum LOD fraction to set the PRIM register to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">primlod</td><td>Primitive LOD fraction to set the PRIM register to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a289f1c0c4e92d66d71c55bd6c8103e3e" title="Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR)">rdpq_set_env_color</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ad25a8b6c5eb35fb2253f601c3be24867" title="Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_color</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a37ff624a53a01a69564738ee0862480f" title="Set the RDP PRIM LOD FRAC combiner register (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_prim_lod_frac</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a9507264b7ca4898df8ae9913890185c7" title="Set the detail/sharpen blending factor (RDP command: SET_PRIM_COLOR (partial))">rdpq_set_detail_factor</a> </dd></dl>

</div>
</div>
<a id="a289f1c0c4e92d66d71c55bd6c8103e3e" name="a289f1c0c4e92d66d71c55bd6c8103e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a289f1c0c4e92d66d71c55bd6c8103e3e">&#9670;&#160;</a></span>rdpq_set_env_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_env_color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__graphics.html#structcolor__t">color_t</a>&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the RDP ENV combiner register (RDP command: SET_ENV_COLOR) </p>
<p>This function sets the internal RDP ENV register, part of the color combiner unit. Naming aside, it is a generic color register that can be used in custom color combiner formulas.</p>
<p>Another similar blender register is the PRIM register, configured via <a class="el" href="rdpq_8h.html#ad25a8b6c5eb35fb2253f601c3be24867" title="Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_color</a>.</p>
<p>See <a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> and <a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> on how to configure the color combiner (typically, via <a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">color</td><td>Color to set the ENV register to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ad25a8b6c5eb35fb2253f601c3be24867" title="Set the RDP PRIM combiner register (color only) (RDP command: SET_PRIM_COLOR)">rdpq_set_prim_color</a> </dd>
<dd>
<a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> </dd></dl>

</div>
</div>
<a id="a0dd5aa2fa09bcda9659c83dc67b896c9" name="a0dd5aa2fa09bcda9659c83dc67b896c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd5aa2fa09bcda9659c83dc67b896c9">&#9670;&#160;</a></span>rdpq_set_prim_depth_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_prim_depth_raw </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>prim_z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>prim_dz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a fixed Z value to be used instead of a per-pixel value (RDP command; SET_PRIM_DEPTH) </p>
<p>When using z-buffering, normally the Z value used for z-buffering is calculated by interpolating the Z of each vertex onto each pixel. The RDP allows for usage of a fixed Z value instead, for special effects like particles or decals.</p>
<p>This function allows to configure the RDP register that holds the fixed Z value. It is then necessary to activate this special RDP mode: either manually turning on SOM_ZSOURCE_PRIM via <a class="el" href="rdpq_8h.html#a63486735278da233229c6cf5fb3b3aaf" title="Low-level function to partly change the rendering mode register.">rdpq_change_other_modes_raw</a>.</p>
<p>For beginners, it is suggested to use the mode API instead, via <a class="el" href="rdpq__mode_8c.html#ac19dea948e3d7d283a116195a9b61502" title="Set a fixed override of Z value.">rdpq_mode_zoverride</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prim_z</td><td>Fixed Z value (in range 0..0x7FFF) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prim_dz</td><td>Delta Z value (must be a signed power of two). Pass 0 initially, and increment to next power of two in case of problems with objects with the same Z.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Pending further investigation of the exact usage of this function, and specifically the prim_dz parameter, rdpq does not currently offer a higher-level function (<code>rdpq_set_prim_depth</code>). </dd></dl>

</div>
</div>
<a id="afdd1c19d6574f3d3cd6819d235d5413f" name="afdd1c19d6574f3d3cd6819d235d5413f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd1c19d6574f3d3cd6819d235d5413f">&#9670;&#160;</a></span>rdpq_load_tlut_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_load_tlut_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>color_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_colors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load a palette of colors into TMEM (RDP command: LOAD_TLUT) </p>
<p>This command is used to load a palette into TMEM. TMEM can hold up to 256 16-bit colors in total to be used as palette, and they must be stored in the upper half of TMEM. These colors are arranged as a single 256-color palette when drawing <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a1d1f3cf5eb79947c79274c2a353e86aa" title="Format CI8: color index 8-bit (paletted, 1 index per byte)">FMT_CI8</a> images, or 16 16-colors palettes when drawing <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae7c884ef15b16d8bb1fe78d46aa209c4" title="Format CI4: color index 4-bit (paletted, 2 indices per byte)">FMT_CI4</a> images.</p>
<p>Storage of colors in TMEM is a bit wasteful, as each color is replicated four times (in fact, 256 colors * 16-bit + 4 = 2048 bytes, which is in fact half of TMEM). This command should be preferred for palette loading as it automatically handles this replication.</p>
<p>Loading a palette manually is a bit involved. It requires configuring the palette in RDRAM via <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>, and also configure a tile descriptor with the TMEM destination address (via <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>). Instead, prefer using the simpler rdpq texture API (<a class="el" href="rdpq__tex_8h.html" title="RDP Command queue: high-level texture/surface loading and blitting.">rdpq_tex.h</a>), via <a class="el" href="rdpq__tex_8c.html#a30a8e20ae24686b902d5d572e158fbd6" title="Load one or more palettes into TMEM.">rdpq_tex_upload_tlut</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>Tile descriptor to use (TILE0-TILE7). This is used to extract the destination TMEM address (all other fields of the descriptor are ignored). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">color_idx</td><td>Index of the first color to load into TMEM (0-255). This is a 16-bit offset into the RDRAM buffer set via <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_colors</td><td>Number of colors to load (1-256).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8c.html#a30a8e20ae24686b902d5d572e158fbd6" title="Load one or more palettes into TMEM.">rdpq_tex_upload_tlut</a> </dd></dl>

</div>
</div>
<a id="aa2d58ba9ae6ea05e8576b7735420f0b6" name="aa2d58ba9ae6ea05e8576b7735420f0b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d58ba9ae6ea05e8576b7735420f0b6">&#9670;&#160;</a></span>rdpq_set_tile_size_fx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_tile_size_fx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>s0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>t1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure the extents of a tile descriptor &ndash; fixed point version (RDP command: SET_TILE_SIZE) </p>
<p>This function is similar to <a class="el" href="rdpq_8h.html#a59603292b209fd21a1e13722c5eedc7b" title="Configure the extents of a tile descriptor (RDP command: SET_TILE_SIZE)">rdpq_set_tile_size</a>, but coordinates must be specified using fixed point numbers (10.2).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">tile</td><td>Tile descriptor (TILE0-TILE7) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s0</td><td>Top-left X texture coordinate to store in the descriptor (fx 10.2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t0</td><td>Top-left Y texture coordinate to store in the descriptor (fx 10.2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s1</td><td>Bottom-right <em>exclusive</em> X texture coordinate to store in the descriptor (fx 10.2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t1</td><td>Bottom-right <em>exclusive</em> Y texture coordinate to store in the descriptor (fx 10.2)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a59603292b209fd21a1e13722c5eedc7b" title="Configure the extents of a tile descriptor (RDP command: SET_TILE_SIZE)">rdpq_set_tile_size</a> </dd></dl>

</div>
</div>
<a id="a9b37267136cf8b04374eb3ac668046f2" name="a9b37267136cf8b04374eb3ac668046f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b37267136cf8b04374eb3ac668046f2">&#9670;&#160;</a></span>rdpq_load_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_load_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>s0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>num_texels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>tmem_pitch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK) </p>
<p>This is a command alternative to <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> to load data from RDRAM into TMEM. It is faster than <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> but only allows to transfer a consecutive block of data; the block can cover multiple lines, but not a sub-rectangle of the texture image.</p>
<dl class="section note"><dt>Note</dt><dd>Beginners are advised to use the rdpq texture API (<a class="el" href="rdpq__tex_8h.html" title="RDP Command queue: high-level texture/surface loading and blitting.">rdpq_tex.h</a>), for instance <a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> that takes care of everything required, including using <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a> for performance whenever possible.</dd></dl>
<p>Before calling <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>, the tile must have been configured using <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a> to specify the TMEM address, and the texture in RDRAM must have been set via <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>.</p>
<dl class="section note"><dt>Note</dt><dd>It is important to notice that the RDP will interpret the tile pitch configured in the tile descriptor with a different semantic: it is used as a number of texels that must be skipped between lines in RDRAM. Normally, for a compact texture, it should then be set to zero in the call to <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>. Instead, The <em>real</em> pitch of the texture in TMEM must be provided to <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a> itself.</dd></dl>
<p>After the call to <a class="el" href="rdpq_8h.html#a9b37267136cf8b04374eb3ac668046f2" title="Load a texture image into TMEM with a single contiguous memory transfer (RDP command: LOAD_BLOCK)">rdpq_load_block</a>, it is not possible to reuse the tile descriptor for performing a draw. So a new tile descriptor should be configured from scratch using <a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a>.</p>
<p>The maximum number of texels that can be transferred by a single call is</p><ol type="1">
<li>This allows to fill the TMEM only if a 16-bit or 32-bit texture is used. If you need to load a 4-bit or 8-bit texture, consider configuring the tile descriptor as 16-bit and adjusting the number of texels accordingly. For instance, to transfer a 80x64 4-bit texture (5120 texels), do the transfer as if it was a 20x64 16-bit texture (1280 texels). It doesn't matter if you lie to the RDP during the texture load: what it matters is that the tile descriptor that you will later use for drawing is configured with the correct pixel format.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>Tile descriptor (TILE0-TILE7) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s0</td><td>Top-left X texture coordinate to load </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t0</td><td>Top-left Y texture coordinate to load </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_texels</td><td>Number of texels to load (max: 2048) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tmem_pitch</td><td>Pitch of the texture in TMEM (in bytes)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a027eb77bf55b7b56501147815f8fd13e" title="Low level function to load a texture image into TMEM in a single memory transfer.">rdpq_load_block_fx</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#a3aa3f0ce08b370d70ff7dcc81efba69c" title="Enqueue a RDP SET_TILE command (full version)">rdpq_set_tile</a> </dd>
<dd>
<a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd></dl>

</div>
</div>
<a id="ad8b4d13e0d4ce86f251cfbf5e9a53b85" name="ad8b4d13e0d4ce86f251cfbf5e9a53b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8b4d13e0d4ce86f251cfbf5e9a53b85">&#9670;&#160;</a></span>rdpq_load_tile_fx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_load_tile_fx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>s0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>t1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load a portion of a texture into TMEM &ndash; fixed point version (RDP command: LOAD_TILE) </p>
<p>This function is similar to <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a>, but coordinates can be specified in fixed point format (0.10.2). Refer to <a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> for increased performance</p>
<dl class="section note"><dt>Note</dt><dd>Beginners are advised to use the rdpq texture API (<a class="el" href="rdpq__tex_8h.html" title="RDP Command queue: high-level texture/surface loading and blitting.">rdpq_tex.h</a>), for instance <a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> that takes care of everything required.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>Tile descriptor to use (TILE0-TILE7). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s0</td><td>Upper-left X coordinate of the portion of the texture to load (fx 0.10.2). Range: 0-4096 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t0</td><td>Upper-left Y coordinate of the portion of the texture to load (fx 0.10.2), Range: 0-4096 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s1</td><td>Bottom-right X coordinate of the portion of the texture to load (fx 0.10.2), Range: 0-4096 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t1</td><td>Bottom-right Y coordinate of the portion of the texture to load (fx 0.10.2), Range: 0-4096</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6" title="Load a portion of a texture into TMEM (RDP command: LOAD_TILE)">rdpq_load_tile</a> </dd>
<dd>
<a class="el" href="rdpq__tex_8c.html#aaa36de4024b0a12f37ddfc5544bcbfa4" title="Load a texture into TMEM.">rdpq_tex_upload</a> </dd></dl>

</div>
</div>
<a id="a963a84865cb85ba90aa0aaa10ef248ab" name="a963a84865cb85ba90aa0aaa10ef248ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963a84865cb85ba90aa0aaa10ef248ab">&#9670;&#160;</a></span>rdpq_set_combiner_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_combiner_raw </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>comb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level function to change the RDP combiner. </p>
<p>This function enqueues a low-level SET_COMBINE RDP command that changes the RDP combiner, setting it to a new value. You can use <a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> and <a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> to create the combiner settings for respectively a 1-pass or 2-pass combiner.</p>
<dl class="section note"><dt>Note</dt><dd>Prefer using <a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> (part of the RDPQ mode API), as it better handles integration with other render mode changes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comb</td><td>The new combiner setting</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq__mode_8c.html#a7aaec7357eb3343339d9373b1a963a57" title="Configure the color combiner.">rdpq_mode_combiner</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#ae6316102ee9f09199c7d0c9c452915dc" title="Build a 1-pass combiner formula.">RDPQ_COMBINER1</a> </dd>
<dd>
<a class="el" href="rdpq__macros_8h.html#a6647a2b7243160974d2d2f1f0eef86bf" title="Build a 2-pass combiner formula.">RDPQ_COMBINER2</a> </dd></dl>

</div>
</div>
<a id="af8d2a9819765d53a5128f279a7ea0ccb" name="af8d2a9819765d53a5128f279a7ea0ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d2a9819765d53a5128f279a7ea0ccb">&#9670;&#160;</a></span>rdpq_set_other_modes_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_other_modes_raw </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level function to set the rendering mode register. </p>
<p>This function enqueues a low-level SET_OTHER_MODES RDP command that changes the RDP render mode, setting it to a new value</p>
<p>This function is very low level and requires very good knowledge of internal RDP state management. Moreover, it completely overwrites any existing configuration for all bits, so it must be used with caution within a block.</p>
<dl class="section note"><dt>Note</dt><dd>If possible, prefer using the RDPQ mode API (defined in <a class="el" href="rdpq__mode_8h.html" title="RDP Command queue: mode setting.">rdpq_mode.h</a>), that expose a higher level API for changing the RDP modes</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The new render mode. See the RDP_RM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63486735278da233229c6cf5fb3b3aaf" name="a63486735278da233229c6cf5fb3b3aaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63486735278da233229c6cf5fb3b3aaf">&#9670;&#160;</a></span>rdpq_change_other_modes_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_change_other_modes_raw </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level function to partly change the rendering mode register. </p>
<p>This function is very low level and requires very good knowledge of internal RDP state management.</p>
<p>It allows to partially change the RDP render mode register, enqueuing a command that will modify only the requested bits. This function is to be preferred to <a class="el" href="rdpq_8h.html#af8d2a9819765d53a5128f279a7ea0ccb" title="Low-level function to set the rendering mode register.">rdpq_set_other_modes_raw</a> as it preservers existing render mode for all the other bits, so it allows for easier composition.</p>
<dl class="section note"><dt>Note</dt><dd>If possible, prefer using the RDPQ mode API (defined in <a class="el" href="rdpq__mode_8h.html" title="RDP Command queue: mode setting.">rdpq_mode.h</a>), that expose a higher level API for changing the RDP modes</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Mask of bits of the SOM register that must be changed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td>New value for the bits selected by the mask. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a124ae765728993ad1207ca1410edaee2" name="a124ae765728993ad1207ca1410edaee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124ae765728993ad1207ca1410edaee2">&#9670;&#160;</a></span>rdpq_set_color_image_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_color_image_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>stride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level version of <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a>, with address lookup capability. </p>
<p>This is a low-level version of <a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a>, that exposes the address lookup capability. It allows to either pass a direct buffer, or to use a buffer already stored in the address lookup table, adding optionally an offset. See <a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> for more information.</p>
<p>RDP a physical constraint of 64-byte alignment for render targets, so make sure to respect that while configuring a buffer. The validator will flag such a mistake.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index in the rdpq lookup table of the buffer to set as render target. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset to add to the buffer stored in the lookup table. Notice that if index is 0, this can be a physical address to a buffer (use <a class="el" href="group__n64sys.html#ga54fca3c0f8e1be138f320b3dcce4366f" title="Return the physical memory address for a given address.">PhysicalAddr</a> to convert a C pointer to a physical address). </td></tr>
    <tr><td class="paramname">format</td><td>Format of the buffer. Only <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a0ae35df0b9a28b002380dc866dad303a" title="Format RGBA 8888 (32-bit)">FMT_RGBA32</a>, <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5" title="Format RGBA 5551 (16-bit)">FMT_RGBA16</a> or <a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1a7845dc9354faccf8262e271b1026b0f2" title="Format I8: 8-bit intensity (8-bit per pixel)">FMT_I8</a> are possible to use as a render target. </td></tr>
    <tr><td class="paramname">width</td><td>Width of the buffer in pixel </td></tr>
    <tr><td class="paramname">height</td><td>Height of the buffer in pixel </td></tr>
    <tr><td class="paramname">stride</td><td>Stride of the buffer in bytes (length of a row)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a9020360dcb7a05b4270d8a66e8dad6b7" title="Configure the framebuffer to render to (RDP command: SET_COLOR_IMAGE)">rdpq_set_color_image</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> </dd></dl>

</div>
</div>
<a id="ae9e033b79ec7e92a3038e4e2bde7094f" name="ae9e033b79ec7e92a3038e4e2bde7094f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9e033b79ec7e92a3038e4e2bde7094f">&#9670;&#160;</a></span>rdpq_set_z_image_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_z_image_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level version of <a class="el" href="rdpq_8h.html#a8a540c568fae4b371828e0b62a9a67ec" title="Configure the Z-buffer to use (RDP command: SET_Z_IMAGE)">rdpq_set_z_image</a>, with address lookup capability. </p>
<p>This is a low-level version of <a class="el" href="rdpq_8h.html#a8a540c568fae4b371828e0b62a9a67ec" title="Configure the Z-buffer to use (RDP command: SET_Z_IMAGE)">rdpq_set_z_image</a>, that exposes the address lookup capability. It allows to either pass a direct buffer, or to use a buffer already stored in the address lookup table, adding optionally an offset. See <a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> for more information.</p>
<p>RDP a physical constraint of 64-byte alignment for render targets, so make sure to respect that while configuring a buffer. The validator will flag such a mistake.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index in the rdpq lookup table of the buffer to set as render target. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset to add to the buffer stored in the lookup table. Notice that if index is 0, this can be a physical address to a buffer (use <a class="el" href="group__n64sys.html#ga54fca3c0f8e1be138f320b3dcce4366f" title="Return the physical memory address for a given address.">PhysicalAddr</a> to convert a C pointer to a physical address).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a8a540c568fae4b371828e0b62a9a67ec" title="Configure the Z-buffer to use (RDP command: SET_Z_IMAGE)">rdpq_set_z_image</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> </dd></dl>

</div>
</div>
<a id="aaf80d096c730fa3aa29fc8a48154249c" name="aaf80d096c730fa3aa29fc8a48154249c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf80d096c730fa3aa29fc8a48154249c">&#9670;&#160;</a></span>rdpq_set_texture_image_raw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_texture_image_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level version of <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>, with address lookup capability. </p>
<p>This is a low-level version of <a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a>, that exposes the address lookup capability. It allows to either pass a direct buffer, or to use a buffer already stored in the address lookup table, adding optionally an offset. See <a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> for more information.</p>
<p>RDP a physical constraint of 8-byte alignment for textures, so make sure to respect that while configuring a buffer. The validator will flag such a mistake.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index in the rdpq lookup table of the buffer to set as texture image. </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset to add to the buffer stored in the lookup table. Notice that if index is 0, this can be a physical address to a buffer (use <a class="el" href="group__n64sys.html#ga54fca3c0f8e1be138f320b3dcce4366f" title="Return the physical memory address for a given address.">PhysicalAddr</a> to convert a C pointer to a physical address). </td></tr>
    <tr><td class="paramname">format</td><td>Format of the texture (<a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1" title="Pixel format enum.">tex_format_t</a>) </td></tr>
    <tr><td class="paramname">width</td><td>Width of the texture in pixel (max 1024) </td></tr>
    <tr><td class="paramname">height</td><td>Height of the texture in pixel (max 1024)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rdpq_8h.html#a243f6adec109fcf042273b5e6402f83c" title="Configure the texture to use (RDP command: SET_TEX_IMAGE)">rdpq_set_texture_image</a> </dd>
<dd>
<a class="el" href="rdpq_8h.html#ac3a157dcfb511e567251d69ba2272287" title="Store an address into the rdpq lookup table.">rdpq_set_lookup_address</a> </dd></dl>

</div>
</div>
<a id="ac3a157dcfb511e567251d69ba2272287" name="ac3a157dcfb511e567251d69ba2272287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a157dcfb511e567251d69ba2272287">&#9670;&#160;</a></span>rdpq_set_lookup_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_lookup_address </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rdram_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store an address into the rdpq lookup table. </p>
<p>This function is for advanced usages, it is not normally required to call it.</p>
<p>This function modifies the internal RDPQ address lookup table, by storing an address into on of the available slots.</p>
<p>The lookup table is used to allow for an indirect access to surface pointers. For instance, some library code might want to record a block that manipulates several surfaces, but without saving the actual surface pointers within the block. Instead, all commands referring to a surface, will actually refer to an index into the lookup table. The caller of the block will then store the actual buffer pointers in the table, before playing back the block.</p>
<p>While recording, you can create a placeholder surface via <a class="el" href="surface_8h.html#ade63b26694a75b09506d5fd9cf35e670" title="Create a placeholder surface, that can be used during rdpq block recording.">surface_make_placeholder</a> or <a class="el" href="surface_8h.html#a72c6f76ee9f39cc668e6628cc1fb46ef" title="Create a linear placeholder surface, that can be used during rdpq block recording.">surface_make_placeholder_linear</a> that is just an "index" into the lookup table.</p>
<div class="fragment"><div class="line"><span class="comment">// Create placeholder surfaces with indices 3 and 4</span></div>
<div class="line"><a class="code hl_struct" href="surface_8h.html#structsurface__t">surface_t</a> tex1 = <a class="code hl_function" href="surface_8h.html#a72c6f76ee9f39cc668e6628cc1fb46ef">surface_make_placeholder_linear</a>(3, <a class="code hl_enumvalue" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5">FMT_RGBA16</a>, 32, 32);</div>
<div class="line"><a class="code hl_struct" href="surface_8h.html#structsurface__t">surface_t</a> tex2 = <a class="code hl_function" href="surface_8h.html#a72c6f76ee9f39cc668e6628cc1fb46ef">surface_make_placeholder_linear</a>(4, <a class="code hl_enumvalue" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5">FMT_RGBA16</a>, 32, 32);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Start recording a block.</span></div>
<div class="line"><a class="code hl_function" href="rspq_8c.html#a41f292fc1f7b261f84c55fc356f86acf">rspq_block_begin</a>();</div>
<div class="line"><a class="code hl_function" href="rdpq__mode_8c.html#ac3c29578703de424bea9548ad86bb4af">rdpq_set_mode_standard</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load texture from lookup table (slot 3) and draw it to the screen</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#a243f6adec109fcf042273b5e6402f83c">rdpq_set_texture_image</a>(&amp;tex1);</div>
<div class="line"><a class="code hl_define" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6">rdpq_load_tile</a>(0, 0, 32, 32);</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a>(0, 0, 32, 32);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load texture from lookup table (slot 4) and draw it to the screen</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#a243f6adec109fcf042273b5e6402f83c">rdpq_set_texture_image</a>(&amp;tex2);</div>
<div class="line"><a class="code hl_define" href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6">rdpq_load_tile</a>(0, 0, 32, 32);</div>
<div class="line"><a class="code hl_define" href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a>(32, 0, 64, 32);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="rspq__internal_8h.html#structrspq__block__t">rspq_block_t</a> *bl = <a class="code hl_function" href="rspq_8c.html#a81339d69802148a09829d1c6d9a9f9f6">rspq_block_end</a>();</div>
<div class="line"> </div>
<div class="line">[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set two real textures into the the lookup table and call the block</span></div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#ac3a157dcfb511e567251d69ba2272287">rdpq_set_lookup_address</a>(3, robot-&gt;buffer);</div>
<div class="line"><a class="code hl_function" href="rdpq_8c.html#ac3a157dcfb511e567251d69ba2272287">rdpq_set_lookup_address</a>(4, dragon-&gt;buffer);</div>
<div class="line"><a class="code hl_function" href="rspq_8c.html#ad078c001303a1b2153ba99f3184194f3">rspq_block_run</a>(bl);</div>
<div class="ttc" id="ardpq_8c_html_a243f6adec109fcf042273b5e6402f83c"><div class="ttname"><a href="rdpq_8c.html#a243f6adec109fcf042273b5e6402f83c">rdpq_set_texture_image</a></div><div class="ttdeci">void rdpq_set_texture_image(const surface_t *surface)</div><div class="ttdoc">Configure the texture to use (RDP command: SET_TEX_IMAGE)</div><div class="ttdef"><b>Definition</b> rdpq.c:1032</div></div>
<div class="ttc" id="ardpq_8c_html_ac3a157dcfb511e567251d69ba2272287"><div class="ttname"><a href="rdpq_8c.html#ac3a157dcfb511e567251d69ba2272287">rdpq_set_lookup_address</a></div><div class="ttdeci">void rdpq_set_lookup_address(uint8_t index, void *rdram_addr)</div><div class="ttdoc">Store an address into the rdpq lookup table.</div><div class="ttdef"><b>Definition</b> rdpq.h:1294</div></div>
<div class="ttc" id="ardpq_8h_html_a7e7757331841702b18f3e3c90a91edc6"><div class="ttname"><a href="rdpq_8h.html#a7e7757331841702b18f3e3c90a91edc6">rdpq_load_tile</a></div><div class="ttdeci">#define rdpq_load_tile(tile, s0, t0, s1, t1)</div><div class="ttdoc">Load a portion of a texture into TMEM (RDP command: LOAD_TILE)</div><div class="ttdef"><b>Definition</b> rdpq.h:517</div></div>
<div class="ttc" id="ardpq__mode_8c_html_ac3c29578703de424bea9548ad86bb4af"><div class="ttname"><a href="rdpq__mode_8c.html#ac3c29578703de424bea9548ad86bb4af">rdpq_set_mode_standard</a></div><div class="ttdeci">void rdpq_set_mode_standard(void)</div><div class="ttdoc">Reset render mode to standard.</div><div class="ttdef"><b>Definition</b> rdpq_mode.c:92</div></div>
<div class="ttc" id="ardpq__rect_8h_html_a7196362c567172a2012f414c8a412743"><div class="ttname"><a href="rdpq__rect_8h.html#a7196362c567172a2012f414c8a412743">rdpq_texture_rectangle</a></div><div class="ttdeci">#define rdpq_texture_rectangle(tile, x0, y0, x1, y1, s, t)</div><div class="ttdoc">Draw a textured rectangle (RDP command: TEXTURE_RECTANGLE)</div><div class="ttdef"><b>Definition</b> rdpq_rect.h:308</div></div>
<div class="ttc" id="arspq_8c_html_a41f292fc1f7b261f84c55fc356f86acf"><div class="ttname"><a href="rspq_8c.html#a41f292fc1f7b261f84c55fc356f86acf">rspq_block_begin</a></div><div class="ttdeci">void rspq_block_begin(void)</div><div class="ttdoc">Begin creating a new block.</div><div class="ttdef"><b>Definition</b> rspq.c:1112</div></div>
<div class="ttc" id="arspq_8c_html_a81339d69802148a09829d1c6d9a9f9f6"><div class="ttname"><a href="rspq_8c.html#a81339d69802148a09829d1c6d9a9f9f6">rspq_block_end</a></div><div class="ttdeci">rspq_block_t * rspq_block_end(void)</div><div class="ttdoc">Finish creating a block.</div><div class="ttdef"><b>Definition</b> rspq.c:1131</div></div>
<div class="ttc" id="arspq_8c_html_ad078c001303a1b2153ba99f3184194f3"><div class="ttname"><a href="rspq_8c.html#ad078c001303a1b2153ba99f3184194f3">rspq_block_run</a></div><div class="ttdeci">void rspq_block_run(rspq_block_t *block)</div><div class="ttdoc">Add to the RSP queue a command that runs a block.</div><div class="ttdef"><b>Definition</b> rspq.c:1187</div></div>
<div class="ttc" id="arspq__internal_8h_html_structrspq__block__t"><div class="ttname"><a href="rspq__internal_8h.html#structrspq__block__t">rspq_block_t</a></div><div class="ttdoc">A rspq block: pre-recorded array of commands.</div><div class="ttdef"><b>Definition</b> rspq_internal.h:160</div></div>
<div class="ttc" id="asurface_8h_html_a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5"><div class="ttname"><a href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1ae781a51949044f96a872ca8e2715bed5">FMT_RGBA16</a></div><div class="ttdeci">@ FMT_RGBA16</div><div class="ttdoc">Format RGBA 5551 (16-bit)</div><div class="ttdef"><b>Definition</b> surface.h:106</div></div>
<div class="ttc" id="asurface_8h_html_a72c6f76ee9f39cc668e6628cc1fb46ef"><div class="ttname"><a href="surface_8h.html#a72c6f76ee9f39cc668e6628cc1fb46ef">surface_make_placeholder_linear</a></div><div class="ttdeci">surface_t surface_make_placeholder_linear(int index, tex_format_t format, uint16_t width, uint16_t height)</div><div class="ttdoc">Create a linear placeholder surface, that can be used during rdpq block recording.</div><div class="ttdef"><b>Definition</b> surface.h:318</div></div>
<div class="ttc" id="asurface_8h_html_structsurface__t"><div class="ttname"><a href="surface_8h.html#structsurface__t">surface_t</a></div><div class="ttdoc">A surface buffer for graphics.</div><div class="ttdef"><b>Definition</b> surface.h:138</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>RDP has some alignment constraints: color and Z buffers must be 64-byte aligned, and textures must be 8-byte aligned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of the slot in the table. Available slots are 1-15 (slot 0 is reserved). </td></tr>
    <tr><td class="paramname">rdram_addr</td><td>Pointer of the buffer to store into the address table. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3aa3f0ce08b370d70ff7dcc81efba69c" name="a3aa3f0ce08b370d70ff7dcc81efba69c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa3f0ce08b370d70ff7dcc81efba69c">&#9670;&#160;</a></span>rdpq_set_tile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rdpq_set_tile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rdpq_8h.html#a8d34f311d2e71435652a57adb1d6931e">rdpq_tile_t</a>&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="surface_8h.html#a01f43f3d6c80a7658bf729bfaf3136e1">tex_format_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>tmem_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>tmem_pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rdpq_8h.html#structrdpq__tileparms__t">rdpq_tileparms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enqueue a RDP SET_TILE command (full version) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>Tile descriptor index (0-7) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">format</td><td>Texture format for the tile. Cannot be 0. Should correspond to X_get_format in <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a> or <a class="el" href="sprite_8h.html#structsprite__t" title="Sprite structure.">sprite_t</a>; </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tmem_addr</td><td>Address in tmem where the texture is (or will be loaded). Must be multiple of 8; </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tmem_pitch</td><td>Pitch of the texture in tmem in bytes. Must be multiple of 8. Should correspond to srtide in <a class="el" href="surface_8h.html#structsurface__t" title="A surface buffer for graphics.">surface_t</a>; <br  />
 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parms</td><td>Additional optional parameters for the tile. Can be left NULL or all 0. More information about the struct is in <a class="el" href="rdpq_8h.html#structrdpq__tileparms__t" title="Tile parameters for rdpq_set_tile.">rdpq_tileparms_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a31b230c610daa5f50adaa7323ea2698b" name="a31b230c610daa5f50adaa7323ea2698b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b230c610daa5f50adaa7323ea2698b">&#9670;&#160;</a></span>__rdpq_inited</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool __rdpq_inited = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if <a class="el" href="rdpq_8c.html#a7d884af64503534642d525082ec827cd" title="Initialize the RDPQ library.">rdpq_init</a> was called. </p>
<p>True if the rdpq module was inited. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2024 15:41:47 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
