<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: mixer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a63dedf81f1e5ea1d42bb45ef831eb8c.html">audio</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">mixer.c File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__audio.html">Audio Subsystem</a> &raquo; <a class="el" href="group__mixer.html">Audio mixer</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>RSP Audio mixer.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structmixer__channel__t" id="r_structmixer__channel__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#structmixer__channel__t">mixer_channel_t</a></td></tr>
<tr class="memdesc:structmixer__channel__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mixer channel state - CPU side.  <a href="mixer_8c.html#structmixer__channel__t">More...</a><br /></td></tr>
<tr class="separator:structmixer__channel__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structrsp__mixer__channel__t" id="r_structrsp__mixer__channel__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#structrsp__mixer__channel__t">rsp_mixer_channel_t</a></td></tr>
<tr class="memdesc:structrsp__mixer__channel__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mixer channel state - RSP side.  <a href="mixer_8c.html#structrsp__mixer__channel__t">More...</a><br /></td></tr>
<tr class="separator:structrsp__mixer__channel__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structrsp__mixer__settings__t" id="r_structrsp__mixer__settings__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#structrsp__mixer__settings__t">rsp_mixer_settings_t</a></td></tr>
<tr class="memdesc:structrsp__mixer__settings__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mixer ucode settings.  <a href="mixer_8c.html#structrsp__mixer__settings__t">More...</a><br /></td></tr>
<tr class="separator:structrsp__mixer__settings__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structchannel__limit__t" id="r_structchannel__limit__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#structchannel__limit__t">channel_limit_t</a></td></tr>
<tr class="memdesc:structchannel__limit__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configured limits of a mixer channel.  <a href="mixer_8c.html#structchannel__limit__t">More...</a><br /></td></tr>
<tr class="separator:structchannel__limit__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structmixer__event__t" id="r_structmixer__event__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#structmixer__event__t">mixer_event_t</a></td></tr>
<tr class="memdesc:structmixer__event__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">A mixer event (synchronized with sample playback)  <a href="mixer_8c.html#structmixer__event__t">More...</a><br /></td></tr>
<tr class="separator:structmixer__event__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a51055c8e74be85f62c35632ff82e869f" id="r_a51055c8e74be85f62c35632ff82e869f"><td class="memItemLeft" align="right" valign="top"><a id="a51055c8e74be85f62c35632ff82e869f" name="a51055c8e74be85f62c35632ff82e869f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_TRACE</b>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a51055c8e74be85f62c35632ff82e869f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to 1 to activate debug logs. <br /></td></tr>
<tr class="separator:a51055c8e74be85f62c35632ff82e869f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb613ddfceb7573a840c84b146f273c" id="r_a1fb613ddfceb7573a840c84b146f273c"><td class="memItemLeft" align="right" valign="top"><a id="a1fb613ddfceb7573a840c84b146f273c" name="a1fb613ddfceb7573a840c84b146f273c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>tracef</b>(fmt, ...)&#160;&#160;&#160;({ })</td></tr>
<tr class="memdesc:a1fb613ddfceb7573a840c84b146f273c"><td class="mdescLeft">&#160;</td><td class="mdescRight">like <a class="el" href="debug_8h.html#aa3e8be416ef1525cfd3230204b56d184" title="Write a message to the debugging channel.">debugf()</a>, but writes only if <a class="el" href="mixer_8c.html#a51055c8e74be85f62c35632ff82e869f" title="Set to 1 to activate debug logs.">MIXER_TRACE</a> is not 0 <br /></td></tr>
<tr class="separator:a1fb613ddfceb7573a840c84b146f273c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae42954bb8545d24e3e9dcde5920c9a0b" id="r_ae42954bb8545d24e3e9dcde5920c9a0b"><td class="memItemLeft" align="right" valign="top"><a id="ae42954bb8545d24e3e9dcde5920c9a0b" name="ae42954bb8545d24e3e9dcde5920c9a0b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_EVENTS</b>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ae42954bb8545d24e3e9dcde5920c9a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of mixer events. <br /></td></tr>
<tr class="separator:ae42954bb8545d24e3e9dcde5920c9a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf679d48fd22fa095552abc65a72b198" id="r_acf679d48fd22fa095552abc65a72b198"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#acf679d48fd22fa095552abc65a72b198">MIXER_POLL_PER_SECOND</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:acf679d48fd22fa095552abc65a72b198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of expected <a class="el" href="mixer_8c.html#ace40b3a7cefa9951fb5f956ca0afa2ac" title="Run the mixer to produce output samples.">mixer_poll</a> calls per second.  <br /></td></tr>
<tr class="separator:acf679d48fd22fa095552abc65a72b198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df3bed5fd6578afbe01235d44993b18" id="r_a5df3bed5fd6578afbe01235d44993b18"><td class="memItemLeft" align="right" valign="top"><a id="a5df3bed5fd6578afbe01235d44993b18" name="a5df3bed5fd6578afbe01235d44993b18"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_STATE_SIZE</b>&#160;&#160;&#160;128</td></tr>
<tr class="memdesc:a5df3bed5fd6578afbe01235d44993b18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the ucode state that is automatically persisted by rspq. <br /></td></tr>
<tr class="separator:a5df3bed5fd6578afbe01235d44993b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace31dad1b574b632b637a59ab3213428" id="r_ace31dad1b574b632b637a59ab3213428"><td class="memItemLeft" align="right" valign="top"><a id="ace31dad1b574b632b637a59ab3213428" name="ace31dad1b574b632b637a59ab3213428"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CH_FLAGS_BPS_SHIFT</b>&#160;&#160;&#160;(3&lt;&lt;0)</td></tr>
<tr class="memdesc:ace31dad1b574b632b637a59ab3213428"><td class="mdescLeft">&#160;</td><td class="mdescRight">BPS shift value. <br /></td></tr>
<tr class="separator:ace31dad1b574b632b637a59ab3213428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f098ef850ecb331989202ecb4bf870" id="r_af7f098ef850ecb331989202ecb4bf870"><td class="memItemLeft" align="right" valign="top"><a id="af7f098ef850ecb331989202ecb4bf870" name="af7f098ef850ecb331989202ecb4bf870"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CH_FLAGS_16BIT</b>&#160;&#160;&#160;(1&lt;&lt;2)</td></tr>
<tr class="memdesc:af7f098ef850ecb331989202ecb4bf870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set if the channel is 16 bit. <br /></td></tr>
<tr class="separator:af7f098ef850ecb331989202ecb4bf870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f265ad69eaf33d77559a98fc20d113f" id="r_a2f265ad69eaf33d77559a98fc20d113f"><td class="memItemLeft" align="right" valign="top"><a id="a2f265ad69eaf33d77559a98fc20d113f" name="a2f265ad69eaf33d77559a98fc20d113f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CH_FLAGS_STEREO</b>&#160;&#160;&#160;(1&lt;&lt;3)</td></tr>
<tr class="memdesc:a2f265ad69eaf33d77559a98fc20d113f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set if the channel is stereo (left) <br /></td></tr>
<tr class="separator:a2f265ad69eaf33d77559a98fc20d113f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3afc740f203dd8ee2c91f4bc131ba4e" id="r_ae3afc740f203dd8ee2c91f4bc131ba4e"><td class="memItemLeft" align="right" valign="top"><a id="ae3afc740f203dd8ee2c91f4bc131ba4e" name="ae3afc740f203dd8ee2c91f4bc131ba4e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CH_FLAGS_STEREO_SUB</b>&#160;&#160;&#160;(1&lt;&lt;4)</td></tr>
<tr class="memdesc:ae3afc740f203dd8ee2c91f4bc131ba4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The channel is the second half of a stereo (right) <br /></td></tr>
<tr class="separator:ae3afc740f203dd8ee2c91f4bc131ba4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ea77e91bbb1541f75bd80cf3ccd202c" id="r_a2ea77e91bbb1541f75bd80cf3ccd202c"><td class="memItemLeft" align="right" valign="top"><a id="a2ea77e91bbb1541f75bd80cf3ccd202c" name="a2ea77e91bbb1541f75bd80cf3ccd202c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX64_FRAC</b>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:a2ea77e91bbb1541f75bd80cf3ccd202c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of fractional bits in <a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c" title="Fixed point value used in waveform position calculations. This is a signed 64-bit integer with the fr...">mixer_fx64_t</a>. <br /></td></tr>
<tr class="separator:a2ea77e91bbb1541f75bd80cf3ccd202c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad443b9fce37d833c4682de4af599c4" id="r_acad443b9fce37d833c4682de4af599c4"><td class="memItemLeft" align="right" valign="top"><a id="acad443b9fce37d833c4682de4af599c4" name="acad443b9fce37d833c4682de4af599c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX64</b>(f)&#160;&#160;&#160;(int64_t)((f) * (1&lt;&lt;<a class="el" href="mixer_8c.html#a2ea77e91bbb1541f75bd80cf3ccd202c">MIXER_FX64_FRAC</a>))</td></tr>
<tr class="memdesc:acad443b9fce37d833c4682de4af599c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a floating point value to <a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c" title="Fixed point value used in waveform position calculations. This is a signed 64-bit integer with the fr...">mixer_fx64_t</a>. <br /></td></tr>
<tr class="separator:acad443b9fce37d833c4682de4af599c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb9a569b8c2be3ada1a04652f16bc526" id="r_acb9a569b8c2be3ada1a04652f16bc526"><td class="memItemLeft" align="right" valign="top"><a id="acb9a569b8c2be3ada1a04652f16bc526" name="acb9a569b8c2be3ada1a04652f16bc526"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX15_FRAC</b>&#160;&#160;&#160;15</td></tr>
<tr class="memdesc:acb9a569b8c2be3ada1a04652f16bc526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of fractional bits in <a class="el" href="mixer_8c.html#aee2190129b07ce99d0364788a0d01ba9" title="Fixed point value used for volume and panning calculations. You can use MIXER_FX15 to convert from fl...">mixer_fx15_t</a>. <br /></td></tr>
<tr class="separator:acb9a569b8c2be3ada1a04652f16bc526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5785806d49411387136c246cd40b6a" id="r_ade5785806d49411387136c246cd40b6a"><td class="memItemLeft" align="right" valign="top"><a id="ade5785806d49411387136c246cd40b6a" name="ade5785806d49411387136c246cd40b6a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX15</b>(f)&#160;&#160;&#160;(int16_t)((f) * ((1&lt;&lt;<a class="el" href="mixer_8c.html#acb9a569b8c2be3ada1a04652f16bc526">MIXER_FX15_FRAC</a>)-1))</td></tr>
<tr class="memdesc:ade5785806d49411387136c246cd40b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a floating point value to <a class="el" href="mixer_8c.html#aee2190129b07ce99d0364788a0d01ba9" title="Fixed point value used for volume and panning calculations. You can use MIXER_FX15 to convert from fl...">mixer_fx15_t</a>. <br /></td></tr>
<tr class="separator:ade5785806d49411387136c246cd40b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4497109d72b2f0afe429b875b16a4d62" id="r_a4497109d72b2f0afe429b875b16a4d62"><td class="memItemLeft" align="right" valign="top"><a id="a4497109d72b2f0afe429b875b16a4d62" name="a4497109d72b2f0afe429b875b16a4d62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX16_FRAC</b>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:a4497109d72b2f0afe429b875b16a4d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of fractional bits for a fixed 16.16 value. <br /></td></tr>
<tr class="separator:a4497109d72b2f0afe429b875b16a4d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d424238a4f69e3c75030fffdb3d7fe" id="r_ab9d424238a4f69e3c75030fffdb3d7fe"><td class="memItemLeft" align="right" valign="top"><a id="ab9d424238a4f69e3c75030fffdb3d7fe" name="ab9d424238a4f69e3c75030fffdb3d7fe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIXER_FX16</b>(f)&#160;&#160;&#160;(int16_t)((f) * ((1&lt;&lt;<a class="el" href="mixer_8c.html#a4497109d72b2f0afe429b875b16a4d62">MIXER_FX16_FRAC</a>)-1))</td></tr>
<tr class="memdesc:ab9d424238a4f69e3c75030fffdb3d7fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a floating point value to a fixed 16.16 value. <br /></td></tr>
<tr class="separator:ab9d424238a4f69e3c75030fffdb3d7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">AI Status Register Values</div></td></tr>
<tr class="memitem:a7811a8498f902f7ba4ab71ace71996ad" id="r_a7811a8498f902f7ba4ab71ace71996ad"><td class="memItemLeft" align="right" valign="top"><a id="a7811a8498f902f7ba4ab71ace71996ad" name="a7811a8498f902f7ba4ab71ace71996ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AI_STATUS_BUSY</b>&#160;&#160;&#160;( 1 &lt;&lt; 30 )</td></tr>
<tr class="memdesc:a7811a8498f902f7ba4ab71ace71996ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit representing that the AI is busy. <br /></td></tr>
<tr class="separator:a7811a8498f902f7ba4ab71ace71996ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6fa307322df53a3592ddf7379864b55" id="r_ae6fa307322df53a3592ddf7379864b55"><td class="memItemLeft" align="right" valign="top"><a id="ae6fa307322df53a3592ddf7379864b55" name="ae6fa307322df53a3592ddf7379864b55"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AI_STATUS_FULL</b>&#160;&#160;&#160;( 1 &lt;&lt; 31 )</td></tr>
<tr class="memdesc:ae6fa307322df53a3592ddf7379864b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit representing that the AI is full. <br /></td></tr>
<tr class="separator:ae6fa307322df53a3592ddf7379864b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a069b3606e77970b602abe506f449254c" id="r_a069b3606e77970b602abe506f449254c"><td class="memItemLeft" align="right" valign="top"><a id="a069b3606e77970b602abe506f449254c" name="a069b3606e77970b602abe506f449254c"></a>
typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>mixer_fx64_t</b></td></tr>
<tr class="memdesc:a069b3606e77970b602abe506f449254c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fixed point value used in waveform position calculations. This is a signed 64-bit integer with the fractional part using <a class="el" href="mixer_8c.html#a2ea77e91bbb1541f75bd80cf3ccd202c" title="Number of fractional bits in mixer_fx64_t.">MIXER_FX64_FRAC</a> bits. You can use <a class="el" href="mixer_8c.html#acad443b9fce37d833c4682de4af599c4" title="Convert a floating point value to mixer_fx64_t.">MIXER_FX64</a> to convert from float. <br /></td></tr>
<tr class="separator:a069b3606e77970b602abe506f449254c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2190129b07ce99d0364788a0d01ba9" id="r_aee2190129b07ce99d0364788a0d01ba9"><td class="memItemLeft" align="right" valign="top"><a id="aee2190129b07ce99d0364788a0d01ba9" name="aee2190129b07ce99d0364788a0d01ba9"></a>
typedef int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>mixer_fx15_t</b></td></tr>
<tr class="memdesc:aee2190129b07ce99d0364788a0d01ba9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fixed point value used for volume and panning calculations. You can use <a class="el" href="mixer_8c.html#ade5785806d49411387136c246cd40b6a" title="Convert a floating point value to mixer_fx15_t.">MIXER_FX15</a> to convert from float. <br /></td></tr>
<tr class="separator:aee2190129b07ce99d0364788a0d01ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a98f886978b2b60e04dea226db3ca084c" id="r_a98f886978b2b60e04dea226db3ca084c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a98f886978b2b60e04dea226db3ca084c">DEFINE_RSP_UCODE</a> (rsp_mixer)</td></tr>
<tr class="separator:a98f886978b2b60e04dea226db3ca084c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d0758de0074e1a44dea7cf1b8d298d5" id="r_a6d0758de0074e1a44dea7cf1b8d298d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a6d0758de0074e1a44dea7cf1b8d298d5">mixer_init</a> (int num_channels)</td></tr>
<tr class="memdesc:a6d0758de0074e1a44dea7cf1b8d298d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the mixer.  <br /></td></tr>
<tr class="separator:a6d0758de0074e1a44dea7cf1b8d298d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ed9fdb3bfcb119d56764dd401848ba" id="r_ae8ed9fdb3bfcb119d56764dd401848ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#ae8ed9fdb3bfcb119d56764dd401848ba">mixer_set_vol</a> (float vol)</td></tr>
<tr class="memdesc:ae8ed9fdb3bfcb119d56764dd401848ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set master volume.  <br /></td></tr>
<tr class="separator:ae8ed9fdb3bfcb119d56764dd401848ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969649394d89cea7b84afc67db4d41d6" id="r_a969649394d89cea7b84afc67db4d41d6"><td class="memItemLeft" align="right" valign="top"><a id="a969649394d89cea7b84afc67db4d41d6" name="a969649394d89cea7b84afc67db4d41d6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>mixer_close</b> (void)</td></tr>
<tr class="memdesc:a969649394d89cea7b84afc67db4d41d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialize the mixer. <br /></td></tr>
<tr class="separator:a969649394d89cea7b84afc67db4d41d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c01ae2bc402901e8fbf7e61e5cd9d6" id="r_af8c01ae2bc402901e8fbf7e61e5cd9d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#af8c01ae2bc402901e8fbf7e61e5cd9d6">mixer_ch_set_freq</a> (int ch, float frequency)</td></tr>
<tr class="memdesc:af8c01ae2bc402901e8fbf7e61e5cd9d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the frequency for the specified channel.  <br /></td></tr>
<tr class="separator:af8c01ae2bc402901e8fbf7e61e5cd9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bc7f412e9cd0cde06c44e8acaa85ae" id="r_a56bc7f412e9cd0cde06c44e8acaa85ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a56bc7f412e9cd0cde06c44e8acaa85ae">mixer_ch_set_vol</a> (int ch, float lvol, float rvol)</td></tr>
<tr class="memdesc:a56bc7f412e9cd0cde06c44e8acaa85ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set channel volume (as left/right).  <br /></td></tr>
<tr class="separator:a56bc7f412e9cd0cde06c44e8acaa85ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fbe88215add4d8f5cd68807616ae9b1" id="r_a5fbe88215add4d8f5cd68807616ae9b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a5fbe88215add4d8f5cd68807616ae9b1">mixer_ch_set_vol_pan</a> (int ch, float vol, float pan)</td></tr>
<tr class="memdesc:a5fbe88215add4d8f5cd68807616ae9b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set channel volume (as volume and panning).  <br /></td></tr>
<tr class="separator:a5fbe88215add4d8f5cd68807616ae9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf6854f30c27595b941525a6116c617" id="r_a9cf6854f30c27595b941525a6116c617"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a9cf6854f30c27595b941525a6116c617">mixer_ch_set_vol_dolby</a> (int ch, float fl, float fr, float c, float sl, float sr)</td></tr>
<tr class="memdesc:a9cf6854f30c27595b941525a6116c617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set channel volume with Dolby Pro Logic II encoding.  <br /></td></tr>
<tr class="separator:a9cf6854f30c27595b941525a6116c617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa94701f22d086d624fb7d938ba0062" id="r_a1aa94701f22d086d624fb7d938ba0062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a1aa94701f22d086d624fb7d938ba0062">mixer_ch_play</a> (int ch, <a class="el" href="mixer_8h.html#structwaveform__t">waveform_t</a> *wave)</td></tr>
<tr class="memdesc:a1aa94701f22d086d624fb7d938ba0062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playing the specified waveform on the specified channel.  <br /></td></tr>
<tr class="separator:a1aa94701f22d086d624fb7d938ba0062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a827e0c459c6a250ccc74b977f9c64c5e" id="r_a827e0c459c6a250ccc74b977f9c64c5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a827e0c459c6a250ccc74b977f9c64c5e">mixer_ch_set_pos</a> (int ch, float pos)</td></tr>
<tr class="memdesc:a827e0c459c6a250ccc74b977f9c64c5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current playback position within a waveform.  <br /></td></tr>
<tr class="separator:a827e0c459c6a250ccc74b977f9c64c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc8e8eb8b434ec042c44d8159648ef39" id="r_afc8e8eb8b434ec042c44d8159648ef39"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#afc8e8eb8b434ec042c44d8159648ef39">mixer_ch_get_pos</a> (int ch)</td></tr>
<tr class="separator:afc8e8eb8b434ec042c44d8159648ef39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae21b093a1283e06ede42363498c490cb" id="r_ae21b093a1283e06ede42363498c490cb"><td class="memItemLeft" align="right" valign="top"><a id="ae21b093a1283e06ede42363498c490cb" name="ae21b093a1283e06ede42363498c490cb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>mixer_ch_stop</b> (int ch)</td></tr>
<tr class="memdesc:ae21b093a1283e06ede42363498c490cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing samples on the specified channel. <br /></td></tr>
<tr class="separator:ae21b093a1283e06ede42363498c490cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1893d5fc9d44b0e37ce0ef82afb71f37" id="r_a1893d5fc9d44b0e37ce0ef82afb71f37"><td class="memItemLeft" align="right" valign="top"><a id="a1893d5fc9d44b0e37ce0ef82afb71f37" name="a1893d5fc9d44b0e37ce0ef82afb71f37"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mixer_ch_playing</b> (int ch)</td></tr>
<tr class="memdesc:a1893d5fc9d44b0e37ce0ef82afb71f37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the channel is currently playing samples. <br /></td></tr>
<tr class="separator:a1893d5fc9d44b0e37ce0ef82afb71f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6151c20fc5ddfa953c9d2dabe1da294" id="r_aa6151c20fc5ddfa953c9d2dabe1da294"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#aa6151c20fc5ddfa953c9d2dabe1da294">mixer_ch_set_limits</a> (int ch, int max_bits, float max_frequency, int max_buf_sz)</td></tr>
<tr class="memdesc:aa6151c20fc5ddfa953c9d2dabe1da294"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the limits of a channel with respect to sample bit size, and frequency.  <br /></td></tr>
<tr class="separator:aa6151c20fc5ddfa953c9d2dabe1da294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ead4fd7433fbf4a328a216dc5a56a8" id="r_a21ead4fd7433fbf4a328a216dc5a56a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#a21ead4fd7433fbf4a328a216dc5a56a8">mixer_add_event</a> (int64_t delay, <a class="el" href="mixer_8h.html#a509fb916b04893006f91d4bc5f7fc69e">MixerEvent</a> cb, void *ctx)</td></tr>
<tr class="memdesc:a21ead4fd7433fbf4a328a216dc5a56a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a time-based event into the mixer.  <br /></td></tr>
<tr class="separator:a21ead4fd7433fbf4a328a216dc5a56a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab616cf94c3df83670ca62236177b246" id="r_aab616cf94c3df83670ca62236177b246"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#aab616cf94c3df83670ca62236177b246">mixer_remove_event</a> (<a class="el" href="mixer_8h.html#a509fb916b04893006f91d4bc5f7fc69e">MixerEvent</a> cb, void *ctx)</td></tr>
<tr class="memdesc:aab616cf94c3df83670ca62236177b246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deregister a time-based event from the mixer.  <br /></td></tr>
<tr class="separator:aab616cf94c3df83670ca62236177b246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace40b3a7cefa9951fb5f956ca0afa2ac" id="r_ace40b3a7cefa9951fb5f956ca0afa2ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mixer_8c.html#ace40b3a7cefa9951fb5f956ca0afa2ac">mixer_poll</a> (int16_t *out16, int num_samples)</td></tr>
<tr class="memdesc:ace40b3a7cefa9951fb5f956ca0afa2ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the mixer to produce output samples.  <br /></td></tr>
<tr class="separator:ace40b3a7cefa9951fb5f956ca0afa2ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adb6462ba394e665c815abb852d8e341f" id="r_adb6462ba394e665c815abb852d8e341f"><td class="memItemLeft" align="right" valign="top"><a id="adb6462ba394e665c815abb852d8e341f" name="adb6462ba394e665c815abb852d8e341f"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>__mixer_profile_rsp</b> = 0</td></tr>
<tr class="memdesc:adb6462ba394e665c815abb852d8e341f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count of ticks spent in mixer RSP, used for debugging purposes. <br /></td></tr>
<tr class="separator:adb6462ba394e665c815abb852d8e341f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a728b6be978ab3d502aa747add3151db3" id="r_a728b6be978ab3d502aa747add3151db3"><td class="memItemLeft" align="right" valign="top"><a id="a728b6be978ab3d502aa747add3151db3" name="a728b6be978ab3d502aa747add3151db3"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>__mixer_overlay_id</b></td></tr>
<tr class="memdesc:a728b6be978ab3d502aa747add3151db3"><td class="mdescLeft">&#160;</td><td class="mdescRight">RSPQ overlay ID assigned to the mixer ucode. <br /></td></tr>
<tr class="separator:a728b6be978ab3d502aa747add3151db3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RSP Audio mixer. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structmixer__channel__t" id="structmixer__channel__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structmixer__channel__t">&#9670;&#160;</a></span>mixer_channel_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mixer_channel_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Mixer channel state - CPU side. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a700c6a75f9314693566a0487560d148d" name="a700c6a75f9314693566a0487560d148d"></a><a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c">mixer_fx64_t</a></td>
<td class="fieldname">
pos</td>
<td class="fielddoc">
Current position within the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="acfaf33ab47c2f024c9aab06118ecceb0" name="acfaf33ab47c2f024c9aab06118ecceb0"></a><a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c">mixer_fx64_t</a></td>
<td class="fieldname">
step</td>
<td class="fielddoc">
Step between samples (in bytes) to playback at the correct frequency. </td></tr>
<tr><td class="fieldtype">
<a id="aef320e995c34836585d6c00bfba18e86" name="aef320e995c34836585d6c00bfba18e86"></a><a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c">mixer_fx64_t</a></td>
<td class="fieldname">
len</td>
<td class="fielddoc">
Length of the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="ab0d6e84fc49e19da02a2d1659b7d5704" name="ab0d6e84fc49e19da02a2d1659b7d5704"></a><a class="el" href="mixer_8c.html#a069b3606e77970b602abe506f449254c">mixer_fx64_t</a></td>
<td class="fieldname">
loop_len</td>
<td class="fielddoc">
Length of the loop in the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="a8b74c9de55d58a7ab7fdd0e76c719538" name="a8b74c9de55d58a7ab7fdd0e76c719538"></a>void *</td>
<td class="fieldname">
ptr</td>
<td class="fielddoc">
Pointer to the waveform. </td></tr>
<tr><td class="fieldtype">
<a id="ab30009fbbf5708d9ae6a4851dcbb173d" name="ab30009fbbf5708d9ae6a4851dcbb173d"></a>uint32_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
Misc flags (see CH_FLAGS_*) </td></tr>
</table>

</div>
</div>
<a name="structrsp__mixer__channel__t" id="structrsp__mixer__channel__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrsp__mixer__channel__t">&#9670;&#160;</a></span>rsp_mixer_channel_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rsp_mixer_channel_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Mixer channel state - RSP side. </p>
<p>This structure represents the state of a mixer channel as stored in RSP DMEM. Structure-wise, it is similar to <a class="el" href="mixer_8c.html#structmixer__channel__t" title="Mixer channel state - CPU side.">mixer_channel_t</a>, but waveform-related offsets are 32-bit wide rather than 64-bit, since RSP cannot easily work with 64-bit integers. Check <a class="el" href="mixer_8c.html#ace40b3a7cefa9951fb5f956ca0afa2ac" title="Run the mixer to produce output samples.">mixer_poll</a> to see how this difference is handled. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aeba049cbcc8f2e1bd9db07a5ed7621dc" name="aeba049cbcc8f2e1bd9db07a5ed7621dc"></a>uint32_t</td>
<td class="fieldname">
pos</td>
<td class="fielddoc">
Current position within the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="a5ec038931e32199a4d310d956d42a301" name="a5ec038931e32199a4d310d956d42a301"></a>uint32_t</td>
<td class="fieldname">
step</td>
<td class="fielddoc">
Step between samples (in bytes) to playback at the correct frequency. </td></tr>
<tr><td class="fieldtype">
<a id="a9968bce758e83ee4f6ff5e7c9ecfa93c" name="a9968bce758e83ee4f6ff5e7c9ecfa93c"></a>uint32_t</td>
<td class="fieldname">
len</td>
<td class="fielddoc">
Length of the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="ad455a6924ba7ba8f41cb4d51665fde49" name="ad455a6924ba7ba8f41cb4d51665fde49"></a>uint32_t</td>
<td class="fieldname">
loop_len</td>
<td class="fielddoc">
Length of the loop in the waveform (in bytes) </td></tr>
<tr><td class="fieldtype">
<a id="a1c4438f0e2ee8a04b3a4664a88d4a25d" name="a1c4438f0e2ee8a04b3a4664a88d4a25d"></a>void *</td>
<td class="fieldname">
ptr</td>
<td class="fielddoc">
Pointer to the waveform. </td></tr>
<tr><td class="fieldtype">
<a id="a9da4f34c33e22b64029bced99af520f7" name="a9da4f34c33e22b64029bced99af520f7"></a>uint32_t</td>
<td class="fieldname">
flags</td>
<td class="fielddoc">
Misc flags (see CH_FLAGS_*) </td></tr>
</table>

</div>
</div>
<a name="structrsp__mixer__settings__t" id="structrsp__mixer__settings__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrsp__mixer__settings__t">&#9670;&#160;</a></span>rsp_mixer_settings_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rsp_mixer_settings_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Mixer ucode settings. </p>
<p>This struct reflects the settings defined in rsp_mixer.S. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a69487bdac51a2e7b0def2be0adb32ac5" name="a69487bdac51a2e7b0def2be0adb32ac5"></a>uint32_t</td>
<td class="fieldname">
lvol[<a class="el" href="mixer_8h.html#a8c4e507c0d1930fd5bd9a9d5f5ca3b13">MIXER_MAX_CHANNELS</a>/2]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0a6a3669a5477dc5353d4edbe57aded2" name="a0a6a3669a5477dc5353d4edbe57aded2"></a>uint32_t</td>
<td class="fieldname">
rvol[<a class="el" href="mixer_8h.html#a8c4e507c0d1930fd5bd9a9d5f5ca3b13">MIXER_MAX_CHANNELS</a>/2]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5cb2114bd499c9667b08bdfb5d56dd1e" name="a5cb2114bd499c9667b08bdfb5d56dd1e"></a><a class="el" href="mixer_8c.html#structrsp__mixer__channel__t">rsp_mixer_channel_t</a></td>
<td class="fieldname">
channels[<a class="el" href="mixer_8h.html#a8c4e507c0d1930fd5bd9a9d5f5ca3b13">MIXER_MAX_CHANNELS</a>]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structchannel__limit__t" id="structchannel__limit__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structchannel__limit__t">&#9670;&#160;</a></span>channel_limit_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct channel_limit_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Configured limits of a mixer channel. </p>
<p>This structure describes the playback limits for a mixer channel. The limits are used to avoid over-allocating memory via sample buffers. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aa6e7d1b329dc2ac29bfa25e420197e6b" name="aa6e7d1b329dc2ac29bfa25e420197e6b"></a>int</td>
<td class="fieldname">
max_bits</td>
<td class="fielddoc">
Maximum number of bits per channel. </td></tr>
<tr><td class="fieldtype">
<a id="ac5388bb6f30e2d0ac2a92ff25fefea3f" name="ac5388bb6f30e2d0ac2a92ff25fefea3f"></a>float</td>
<td class="fieldname">
max_frequency</td>
<td class="fielddoc">
Maximum frequency. </td></tr>
<tr><td class="fieldtype">
<a id="a0c051fe9a32c1034e2fc832b5c5b02cc" name="a0c051fe9a32c1034e2fc832b5c5b02cc"></a>int</td>
<td class="fieldname">
max_buf_sz</td>
<td class="fielddoc">
Maximum sample buffer size (bytes) </td></tr>
</table>

</div>
</div>
<a name="structmixer__event__t" id="structmixer__event__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structmixer__event__t">&#9670;&#160;</a></span>mixer_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mixer_event_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A mixer event (synchronized with sample playback) </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a41b1b1859da7670d9f0184c193d32e73" name="a41b1b1859da7670d9f0184c193d32e73"></a>int64_t</td>
<td class="fieldname">
ticks</td>
<td class="fielddoc">
Absolute time at which the event will trigger (ticks = output samples) </td></tr>
<tr><td class="fieldtype">
<a id="a96c0cae30b30d8ecec30aa5981f90352" name="a96c0cae30b30d8ecec30aa5981f90352"></a><a class="el" href="mixer_8h.html#a509fb916b04893006f91d4bc5f7fc69e">MixerEvent</a></td>
<td class="fieldname">
cb</td>
<td class="fielddoc">
Callback for the event. </td></tr>
<tr><td class="fieldtype">
<a id="acd85abb2587b1198c20859b16ef5e44b" name="acd85abb2587b1198c20859b16ef5e44b"></a>void *</td>
<td class="fieldname">
ctx</td>
<td class="fielddoc">
Opaque context pointer to pass to the callback. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acf679d48fd22fa095552abc65a72b198" name="acf679d48fd22fa095552abc65a72b198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf679d48fd22fa095552abc65a72b198">&#9670;&#160;</a></span>MIXER_POLL_PER_SECOND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIXER_POLL_PER_SECOND&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of expected <a class="el" href="mixer_8c.html#ace40b3a7cefa9951fb5f956ca0afa2ac" title="Run the mixer to produce output samples.">mixer_poll</a> calls per second. </p>
<p>This is used to allocate memory for the sample buffers according to the expected number of samples that must be calculated and held in memory. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a98f886978b2b60e04dea226db3ca084c" name="a98f886978b2b60e04dea226db3ca084c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98f886978b2b60e04dea226db3ca084c">&#9670;&#160;</a></span>DEFINE_RSP_UCODE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_RSP_UCODE </td>
          <td>(</td>
          <td class="paramtype">rsp_mixer&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>RSP mixer ucode (rsp_mixer.S) </p>

</div>
</div>
<a id="a6d0758de0074e1a44dea7cf1b8d298d5" name="a6d0758de0074e1a44dea7cf1b8d298d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d0758de0074e1a44dea7cf1b8d298d5">&#9670;&#160;</a></span>mixer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_channels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the mixer. </p>
<p>The mixer must be initialized after the audio subsystem (audio_init). The number of channels specified is the maximum number of channels used by the application. Specifying a higher number means using more memory as the mixer will allocate one sample buffer per channel, but it does not affect performance (which correlates to the actual number of simultaneously playing channels).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">num_channels</td><td>Number of channels to initialize. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae8ed9fdb3bfcb119d56764dd401848ba" name="ae8ed9fdb3bfcb119d56764dd401848ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8ed9fdb3bfcb119d56764dd401848ba">&#9670;&#160;</a></span>mixer_set_vol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_set_vol </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>vol</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set master volume. </p>
<p>This is a global attenuation factor (range [0..1]) that will be applied to all channels and simplify implementing a global volume control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vol</td><td>Master volume (range [0..1]) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af8c01ae2bc402901e8fbf7e61e5cd9d6" name="af8c01ae2bc402901e8fbf7e61e5cd9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8c01ae2bc402901e8fbf7e61e5cd9d6">&#9670;&#160;</a></span>mixer_ch_set_freq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_freq </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the frequency for the specified channel. </p>
<p>By default, the frequency is the one required by the waveform associated to the channel, but this function allows to override.</p>
<p>This function must be called after <a class="el" href="mixer_8h.html#a1aa94701f22d086d624fb7d938ba0062" title="Start playing the specified waveform on the specified channel.">mixer_ch_play</a>, as otherwise the frequency is reset to the default of the waveform.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frequency</td><td>Playback frequency (in Hz / samples per second) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a56bc7f412e9cd0cde06c44e8acaa85ae" name="a56bc7f412e9cd0cde06c44e8acaa85ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56bc7f412e9cd0cde06c44e8acaa85ae">&#9670;&#160;</a></span>mixer_ch_set_vol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_vol </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>lvol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rvol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set channel volume (as left/right). </p>
<p>Configure channel volume for the specified channel, specifying two values: one for the left output and one for the right output.</p>
<p>The volume is an attenuation (no amplification is performed). Valid volume range in [0..1], where 0 is silence and 1 is original channel sample volume (no attenuation performed).</p>
<p>Notice that it's perfectly valid to set left/right volumes even if the channel itself will play a mono waveforms, as it allows to balance a mono sample between the two final output channels.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lvol</td><td>Left volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rvol</td><td>Right volume (range [0..1]) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5fbe88215add4d8f5cd68807616ae9b1" name="a5fbe88215add4d8f5cd68807616ae9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fbe88215add4d8f5cd68807616ae9b1">&#9670;&#160;</a></span>mixer_ch_set_vol_pan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_vol_pan </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set channel volume (as volume and panning). </p>
<p>Configure the left and right channel volumes for the specified channel, Using a central volume value and a panning value to specify left/right balance.</p>
<p>Valid volume range in [0..1], where 0 is silence and 1 is maximum volume (no attenuation).</p>
<p>Valid panning range is [0..1] where 0 is 100% left, and 1 is 100% right.</p>
<p>Notice that panning 0.5 balance the sound but causes an attenuation of 50%.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vol</td><td>Central volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pan</td><td>Panning (range [0..1], center is 0.5) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9cf6854f30c27595b941525a6116c617" name="a9cf6854f30c27595b941525a6116c617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf6854f30c27595b941525a6116c617">&#9670;&#160;</a></span>mixer_ch_set_vol_dolby()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_vol_dolby </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>sr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set channel volume with Dolby Pro Logic II encoding. </p>
<p>Configure the volumes of the specified channel according to the Dolby Pro Logic II matrix encoding. This allows to encode samples with a virtual surround system, that can be decoded with a Dolby 5.1 compatible equipment.</p>
<p>The function accepts the volumes configured for the 5 channels: front left, front right, center, surround left, surround right. These values can be calculated from a 3D scene</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fl</td><td>Front left volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fr</td><td>Front right volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td>Central volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sl</td><td>Surround left volume (range [0..1]) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sr</td><td>Surround right volume (range [0..1]) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1aa94701f22d086d624fb7d938ba0062" name="a1aa94701f22d086d624fb7d938ba0062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa94701f22d086d624fb7d938ba0062">&#9670;&#160;</a></span>mixer_ch_play()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_play </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mixer_8h.html#structwaveform__t">waveform_t</a> *&#160;</td>
          <td class="paramname"><em>wave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start playing the specified waveform on the specified channel. </p>
<p>This function immediately begins playing the waveform, interrupting any other waveform that might have been reproduced on this channel.</p>
<p>Waveform settings are applied to the mixer channel; for instance, the frequency of the channel is modified to adapt to the frequency requested for correct playback of the waveform.</p>
<p>If the waveform is marked as stereo (channels == 2), the mixer will need two channels to play it back. "ch" will be used for the left samples, while "ch+1" will be used for the right samples. After this, it is forbidden to call mixer functions on "ch+1" until the stereo waveform is stopped.</p>
<p>If the same waveform (same pointer) was already being played or was the last one that was played on this channel, the channel sample buffer is retained, so that any cached samples might be reused.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wave</td><td>Waveform to playback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a827e0c459c6a250ccc74b977f9c64c5e" name="a827e0c459c6a250ccc74b977f9c64c5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a827e0c459c6a250ccc74b977f9c64c5e">&#9670;&#160;</a></span>mixer_ch_set_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_pos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current playback position within a waveform. </p>
<p>This function can be useful to seek to a specific point of the waveform. The position must be specified in number of samples (not bytes). Fractional values account for accurate resampling position.</p>
<p>This function must be called after <a class="el" href="mixer_8h.html#a1aa94701f22d086d624fb7d938ba0062" title="Start playing the specified waveform on the specified channel.">mixer_ch_play</a>, as otherwise the position is reset to the beginning of the waveform.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>Playback position (in number of samples) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afc8e8eb8b434ec042c44d8159648ef39" name="afc8e8eb8b434ec042c44d8159648ef39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc8e8eb8b434ec042c44d8159648ef39">&#9670;&#160;</a></span>mixer_ch_get_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float mixer_ch_get_pos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the current playback position of the waveform in the channel.</p>
<p>The position is returned as number of samples. Fractional values account for accurate resampling position.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Playback position (in number of samples) </dd></dl>

</div>
</div>
<a id="aa6151c20fc5ddfa953c9d2dabe1da294" name="aa6151c20fc5ddfa953c9d2dabe1da294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6151c20fc5ddfa953c9d2dabe1da294">&#9670;&#160;</a></span>mixer_ch_set_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_ch_set_limits </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_buf_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the limits of a channel with respect to sample bit size, and frequency. </p>
<p>This is an advanced function that should be used with caution, only in situations in which it is paramount to control the memory usage of the mixer.</p>
<p>By default, each channel in the mixer is capable of doing 16-bit playback with a frequency up to the mixer output sample rate (eg: 44100hz). This means that the mixer will allocate sample buffers required for this kind of capability.</p>
<p>If it is known that certain channels will use only 8-bit waveforms and/or a lower frequency, it is possible to call this function to inform the mixer of these limits. This will cause the mixer to reallocate the samplebuffers lowering its memory usage (note: multiple calls to this function for different channels will of course be batched to cause only one reallocation).</p>
<p>Note also that this function can be used to increase the maximum frequency over the mixer sample rate, in case this is required. This works correctly but since it causes downsampling, it is generally a waste of memory bandwidth and processing power.</p>
<p>"max_buf_sz" can be used to limit the maximum buffer size that will be allocated for this channel (in bytes). This is a hard cap, applied on top of the optimal buffer size that will be calculated by "max_bits" and "max_frequency", and can be used in situations where there are very strong memory constraints that must be respected. Use 0 if you don't want to impose a limit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_bits</td><td>Maximum number of bits per sample (or 0 to reset this to default, which is currently 16). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_frequency</td><td>Maximum playback frequency for this channel in Hz / samples per seconds (or 0 to reset this to default, which is the output sample rate as specified in <a class="el" href="group__audio.html#ga8ef2eb966a8552f3d19526753b98427f" title="Initialize the audio subsystem.">audio_init</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_buf_sz</td><td>Maximum buffer size in bytes (or 0 to reset this default, which is calculated using the other limits, the playback output rate, and the number of audio buffers specified in <a class="el" href="group__audio.html#ga8ef2eb966a8552f3d19526753b98427f" title="Initialize the audio subsystem.">audio_init</a>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21ead4fd7433fbf4a328a216dc5a56a8" name="a21ead4fd7433fbf4a328a216dc5a56a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ead4fd7433fbf4a328a216dc5a56a8">&#9670;&#160;</a></span>mixer_add_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_add_event </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mixer_8h.html#a509fb916b04893006f91d4bc5f7fc69e">MixerEvent</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a time-based event into the mixer. </p>
<p>Register a new event into the mixer. "delay" is the number of samples to wait before calling the event callback. "cb" is the event callback. "ctx" is an opaque pointer that will be passed to the callback when invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delay</td><td>Number of samples to wait before invoking the event. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Event callback to invoke </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>Context opaque pointer to pass to the callback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aab616cf94c3df83670ca62236177b246" name="aab616cf94c3df83670ca62236177b246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab616cf94c3df83670ca62236177b246">&#9670;&#160;</a></span>mixer_remove_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_remove_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mixer_8h.html#a509fb916b04893006f91d4bc5f7fc69e">MixerEvent</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deregister a time-based event from the mixer. </p>
<p>Deregister an event from the mixer. "cb" is the event callback, and "ctx" is the opaque context pointer. Notice that an event can also deregister itself by returning 0 when called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback that was registered via <a class="el" href="mixer_8h.html#a21ead4fd7433fbf4a328a216dc5a56a8" title="Register a time-based event into the mixer.">mixer_add_event</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>Opaque pointer that was registered with the callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ace40b3a7cefa9951fb5f956ca0afa2ac" name="ace40b3a7cefa9951fb5f956ca0afa2ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace40b3a7cefa9951fb5f956ca0afa2ac">&#9670;&#160;</a></span>mixer_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_poll </td>
          <td>(</td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nsamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the mixer to produce output samples. </p>
<p>This function will fetch the required samples from all the channels and mix them together according to each channel's settings. The output will be written into the specified buffer (out). nsamples is the number of samples that should be produced.</p>
<p>A common pattern would be to call <a class="el" href="group__audio.html#ga8aee840f13aa6903fef4c092d0ffa704" title="Start writing to the first free internal buffer.">audio_write_begin</a> to obtain an audio buffer's pointer, and pass it to mixer_poll.</p>
<p>mixer_poll performs mixing using RSP. If RSP is busy, mixer_poll will spin-wait until the RSP is free, to perform audio processing.</p>
<p>Since the N64 AI can only be fed with an even number of samples, mixer_poll does not accept odd numbers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Output buffer were samples will be written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nsamples</td><td>Number of stereo samples to generate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2024 19:58:15 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
