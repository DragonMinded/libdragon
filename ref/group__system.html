<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: newlib Interface Hooks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">newlib Interface Hooks</div></div>
</div><!--header-->
<div class="contents">

<p>System hooks to provide low level threading and filesystem functionality to newlib.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:do__ctors_8c" id="r_do__ctors_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="do__ctors_8c.html">do_ctors.c</a></td></tr>
<tr class="memdesc:do__ctors_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">C++ constructor handling. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:system_8c" id="r_system_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html">system.c</a></td></tr>
<tr class="memdesc:system_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">newlib Interface Hooks <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dir_8h" id="r_dir_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8h.html">dir.h</a></td></tr>
<tr class="memdesc:dir_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory handling. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:system_8h" id="r_system_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8h.html">system.h</a></td></tr>
<tr class="memdesc:system_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">newlib Interface Hooks <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structdir__t" id="r_structdir__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#structdir__t">dir_t</a></td></tr>
<tr class="memdesc:structdir__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory entry structure.  <a href="group__system.html#structdir__t">More...</a><br /></td></tr>
<tr class="separator:structdir__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfilesystem__t.html">filesystem_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filesystem hook structure.  <a href="structfilesystem__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstdio__t.html">stdio_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard I/O hook structure.  <a href="structstdio__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad6c0e74019637e82fd86897e2d4a2a25" id="r_gad6c0e74019637e82fd86897e2d4a2a25"><td class="memItemLeft" align="right" valign="top"><a id="gad6c0e74019637e82fd86897e2d4a2a25" name="gad6c0e74019637e82fd86897e2d4a2a25"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_FILESYSTEMS</b>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:gad6c0e74019637e82fd86897e2d4a2a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of filesystems that can be attached to the system. <br /></td></tr>
<tr class="separator:gad6c0e74019637e82fd86897e2d4a2a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc61aac6da74a8a3fb9d8e883f8c3468" id="r_gabc61aac6da74a8a3fb9d8e883f8c3468"><td class="memItemLeft" align="right" valign="top"><a id="gabc61aac6da74a8a3fb9d8e883f8c3468" name="gabc61aac6da74a8a3fb9d8e883f8c3468"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OPEN_HANDLES</b>&#160;&#160;&#160;4096</td></tr>
<tr class="memdesc:gabc61aac6da74a8a3fb9d8e883f8c3468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of open handles that can be maintained at one time. <br /></td></tr>
<tr class="separator:gabc61aac6da74a8a3fb9d8e883f8c3468"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga3c06233410074f1dbb8b3eebef3a7847" id="r_ga3c06233410074f1dbb8b3eebef3a7847"><td class="memItemLeft" align="right" valign="top"><a id="ga3c06233410074f1dbb8b3eebef3a7847" name="ga3c06233410074f1dbb8b3eebef3a7847"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>func_ptr</b>) (void)</td></tr>
<tr class="memdesc:ga3c06233410074f1dbb8b3eebef3a7847"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer. <br /></td></tr>
<tr class="separator:ga3c06233410074f1dbb8b3eebef3a7847"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0ca440485e44289536afddc8b55d415a" id="r_ga0ca440485e44289536afddc8b55d415a"><td class="memItemLeft" align="right" valign="top"><a id="ga0ca440485e44289536afddc8b55d415a" name="ga0ca440485e44289536afddc8b55d415a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__register_frame_info</b> (void *begin, uint32_t *ob)</td></tr>
<tr class="memdesc:ga0ca440485e44289536afddc8b55d415a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register exception frames This is used as a placeholder if the user does not link in libgcc. <br /></td></tr>
<tr class="separator:ga0ca440485e44289536afddc8b55d415a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d1bf5fe189639067937a3af7a0028e0" id="r_ga2d1bf5fe189639067937a3af7a0028e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga2d1bf5fe189639067937a3af7a0028e0">__do_global_ctors</a> ()</td></tr>
<tr class="memdesc:ga2d1bf5fe189639067937a3af7a0028e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute global constructors "Constructors are called in reverse order of the list".  <br /></td></tr>
<tr class="separator:ga2d1bf5fe189639067937a3af7a0028e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga685e01132ac9980e1fcf2ee620f6a724" id="r_ga685e01132ac9980e1fcf2ee620f6a724"><td class="memItemLeft" align="right" valign="top"><a id="ga685e01132ac9980e1fcf2ee620f6a724" name="ga685e01132ac9980e1fcf2ee620f6a724"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>__wrap___do_global_ctors</b> ()</td></tr>
<tr class="memdesc:ga685e01132ac9980e1fcf2ee620f6a724"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute global constructors This version is used by the new build system (n64.mk) via the &ndash;wrap linker flag. When that is provided, this version will be utilized instead. New build system always links with g++ which is not directly compatible with ld when it comes to constructors and enables that flag by default. <br /></td></tr>
<tr class="separator:ga685e01132ac9980e1fcf2ee620f6a724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacca6d970a0153055aa8c962067cdfdf1" id="r_gacca6d970a0153055aa8c962067cdfdf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#gacca6d970a0153055aa8c962067cdfdf1">attach_filesystem</a> (const char *const prefix, <a class="el" href="structfilesystem__t.html">filesystem_t</a> *filesystem)</td></tr>
<tr class="memdesc:gacca6d970a0153055aa8c962067cdfdf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a filesystem with newlib.  <br /></td></tr>
<tr class="separator:gacca6d970a0153055aa8c962067cdfdf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87492c7a75157f1aa852aedaf78e4d59" id="r_ga87492c7a75157f1aa852aedaf78e4d59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga87492c7a75157f1aa852aedaf78e4d59">detach_filesystem</a> (const char *const prefix)</td></tr>
<tr class="memdesc:ga87492c7a75157f1aa852aedaf78e4d59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a filesystem from newlib.  <br /></td></tr>
<tr class="separator:ga87492c7a75157f1aa852aedaf78e4d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a2591289aeb5ec5d9f73419533edc39" id="r_ga5a2591289aeb5ec5d9f73419533edc39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga5a2591289aeb5ec5d9f73419533edc39">hook_stdio_calls</a> (<a class="el" href="structstdio__t.html">stdio_t</a> *stdio_calls)</td></tr>
<tr class="memdesc:ga5a2591289aeb5ec5d9f73419533edc39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook into stdio for STDIN, STDOUT and STDERR callbacks.  <br /></td></tr>
<tr class="separator:ga5a2591289aeb5ec5d9f73419533edc39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ba22042b3c62d9213ac9121ce32b96f" id="r_ga6ba22042b3c62d9213ac9121ce32b96f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga6ba22042b3c62d9213ac9121ce32b96f">unhook_stdio_calls</a> (<a class="el" href="structstdio__t.html">stdio_t</a> *stdio_calls)</td></tr>
<tr class="memdesc:ga6ba22042b3c62d9213ac9121ce32b96f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unhook from stdio.  <br /></td></tr>
<tr class="separator:ga6ba22042b3c62d9213ac9121ce32b96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52ba40f92821927553a30e3c6e8c5214" id="r_ga52ba40f92821927553a30e3c6e8c5214"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga52ba40f92821927553a30e3c6e8c5214">hook_time_call</a> (time_t(*time_fn)(void))</td></tr>
<tr class="memdesc:ga52ba40f92821927553a30e3c6e8c5214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook into gettimeofday with a current time callback.  <br /></td></tr>
<tr class="separator:ga52ba40f92821927553a30e3c6e8c5214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c3a0415a3cd3586014fdc4d1a793bf1" id="r_ga7c3a0415a3cd3586014fdc4d1a793bf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga7c3a0415a3cd3586014fdc4d1a793bf1">unhook_time_call</a> (time_t(*time_fn)(void))</td></tr>
<tr class="memdesc:ga7c3a0415a3cd3586014fdc4d1a793bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unhook from gettimeofday current time callback.  <br /></td></tr>
<tr class="separator:ga7c3a0415a3cd3586014fdc4d1a793bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga85d9cd4c96818595113f38830217f2f9" id="r_ga85d9cd4c96818595113f38830217f2f9"><td class="memItemLeft" align="right" valign="top"><a id="ga85d9cd4c96818595113f38830217f2f9" name="ga85d9cd4c96818595113f38830217f2f9"></a>
<a class="el" href="group__system.html#ga3c06233410074f1dbb8b3eebef3a7847">func_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__CTOR_LIST__</b> []</td></tr>
<tr class="memdesc:ga85d9cd4c96818595113f38830217f2f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the beginning of the constructor list. <br /></td></tr>
<tr class="separator:ga85d9cd4c96818595113f38830217f2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga537f421bb42d6566f23aabcdcc0aa0f3" id="r_ga537f421bb42d6566f23aabcdcc0aa0f3"><td class="memItemLeft" align="right" valign="top"><a id="ga537f421bb42d6566f23aabcdcc0aa0f3" name="ga537f421bb42d6566f23aabcdcc0aa0f3"></a>
<a class="el" href="group__system.html#ga3c06233410074f1dbb8b3eebef3a7847">func_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__CTOR_END__</b> []</td></tr>
<tr class="memdesc:ga537f421bb42d6566f23aabcdcc0aa0f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the end of the constructor list. <br /></td></tr>
<tr class="separator:ga537f421bb42d6566f23aabcdcc0aa0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9efca5b23bc6ea3165cab5b4ebfb4c77" id="r_ga9efca5b23bc6ea3165cab5b4ebfb4c77"><td class="memItemLeft" align="right" valign="top"><a id="ga9efca5b23bc6ea3165cab5b4ebfb4c77" name="ga9efca5b23bc6ea3165cab5b4ebfb4c77"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>__EH_FRAME_BEGIN__</b> []</td></tr>
<tr class="memdesc:ga9efca5b23bc6ea3165cab5b4ebfb4c77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the beginning of exception frames. <br /></td></tr>
<tr class="separator:ga9efca5b23bc6ea3165cab5b4ebfb4c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Directory entry type definitions</h2></td></tr>
<tr class="memitem:ga9973595cf6775b1b29d7274ab4c0d623" id="r_ga9973595cf6775b1b29d7274ab4c0d623"><td class="memItemLeft" align="right" valign="top"><a id="ga9973595cf6775b1b29d7274ab4c0d623" name="ga9973595cf6775b1b29d7274ab4c0d623"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DT_REG</b>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga9973595cf6775b1b29d7274ab4c0d623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regular file. <br /></td></tr>
<tr class="separator:ga9973595cf6775b1b29d7274ab4c0d623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1dcee67486bc4238096ecb61e2d9ffd1" id="r_ga1dcee67486bc4238096ecb61e2d9ffd1"><td class="memItemLeft" align="right" valign="top"><a id="ga1dcee67486bc4238096ecb61e2d9ffd1" name="ga1dcee67486bc4238096ecb61e2d9ffd1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DT_DIR</b>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga1dcee67486bc4238096ecb61e2d9ffd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory. <br /></td></tr>
<tr class="separator:ga1dcee67486bc4238096ecb61e2d9ffd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>System hooks to provide low level threading and filesystem functionality to newlib. </p>
<p>newlib provides all of the standard C libraries for homebrew development. In addition to standard C libraries, newlib provides some additional bridging functionality to allow POSIX function calls to be tied into libdragon. Currently this is used only for filesystems. The newlib interface hooks here are mostly stubs that allow homebrew applications to compile.</p>
<p>The sbrk function is responsible for allowing newlib to find the next chunk of free space for use with malloc calls. The size of the available heap is computed using the memory size computed by the boot code (IPL3), and available via <a class="el" href="group__n64sys.html#ga4496cbe7966a01738242c1b214028eb0" title="Get amount of available memory.">get_memory_size()</a>, which is normally either 4 MiB or 8 MiB if the expansion pak is available.</p>
<p>libdragon has defined a custom callback structure for filesystems to use. Providing relevant hooks for calls that your filesystem supports and passing the resulting structure to <a class="el" href="group__system.html#gacca6d970a0153055aa8c962067cdfdf1" title="Register a filesystem with newlib.">attach_filesystem</a> will hook your filesystem into newlib. Calls to POSIX file operations will be passed on to your filesystem code if the file prefix matches, allowing code to make use of your filesystyem without being rewritten.</p>
<p>For example, your filesystem provides libdragon an interface to access a homebrew SD card interface. You register a filesystem with "sd:/" as the prefix and then attempt to open "sd://directory/file.txt". The open callback for your filesystem will be passed the file "/directory/file.txt". The file handle returned will be passed into all subsequent calls to your filesystem until the file is closed. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structdir__t" id="structdir__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structdir__t">&#9670;&#160;</a></span>dir_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dir_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Directory entry structure. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a87ce095e82c535255d901a65045dd41a" name="a87ce095e82c535255d901a65045dd41a"></a>char</td>
<td class="fieldname">
d_name[256]</td>
<td class="fielddoc">
The name of the directory entry (relative to the directory path) </td></tr>
<tr><td class="fieldtype">
<a id="ab2c5b8a974282fbcffde31b32e1e4c43" name="ab2c5b8a974282fbcffde31b32e1e4c43"></a>int</td>
<td class="fieldname">
d_type</td>
<td class="fielddoc">
The type of the directory entry. See <a class="el" href="group__system.html#ga9973595cf6775b1b29d7274ab4c0d623" title="Regular file.">DT_REG</a> and <a class="el" href="group__system.html#ga1dcee67486bc4238096ecb61e2d9ffd1" title="Directory.">DT_DIR</a>. </td></tr>
<tr><td class="fieldtype">
<a id="a8f237846d3c050fb73a91eec10e9e23c" name="a8f237846d3c050fb73a91eec10e9e23c"></a>int64_t</td>
<td class="fieldname">
d_size</td>
<td class="fielddoc">
Size of the file. <p>This value is well defined for files. For directories, the value is filesystem-dependent.</p>
<p>If negative, the filesystem does not report the size during directory walking. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a92dff3818665443f0bf52c74c93d14a2" name="a92dff3818665443f0bf52c74c93d14a2"></a>uint32_t</td>
<td class="fieldname">
d_cookie</td>
<td class="fielddoc">
Opaque cookie used to continue walking. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2d1bf5fe189639067937a3af7a0028e0" name="ga2d1bf5fe189639067937a3af7a0028e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d1bf5fe189639067937a3af7a0028e0">&#9670;&#160;</a></span>__do_global_ctors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __do_global_ctors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute global constructors "Constructors are called in reverse order of the list". </p>
<dl class="section see"><dt>See also</dt><dd><a href="https://gcc.gnu.org/onlinedocs/gccint/Initialization.html">https://gcc.gnu.org/onlinedocs/gccint/Initialization.html</a></dd></dl>
<p>This version of the function is kept for compatibility for projects not using the build system but linking directly with ld in a legacy setup. For the modern version see <a class="el" href="group__system.html#ga685e01132ac9980e1fcf2ee620f6a724" title="Execute global constructors This version is used by the new build system (n64.mk) via the â€“wrap linke...">__wrap___do_global_ctors</a> which is activated by the new build system (n64.mk) via &ndash;wrap linker flag. Do not use that flag if you are using ld so that this function is used instead. </p>

</div>
</div>
<a id="gacca6d970a0153055aa8c962067cdfdf1" name="gacca6d970a0153055aa8c962067cdfdf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacca6d970a0153055aa8c962067cdfdf1">&#9670;&#160;</a></span>attach_filesystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int attach_filesystem </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfilesystem__t.html">filesystem_t</a> *&#160;</td>
          <td class="paramname"><em>filesystem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a filesystem with newlib. </p>
<p>This function will take a prefix in the form of 'prefix:/' and a pointer to a filesystem structure of relevant callbacks and register it with newlib. Any standard open/fopen calls with the registered prefix will be passed to this filesystem. Userspace code does not need to know the underlying filesystem, only the prefix that it has been registered under.</p>
<p>The filesystem pointer passed in to this function should not go out of scope for the lifetime of the filesystem.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix</td><td>Prefix of the filesystem </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filesystem</td><td>Structure of callbacks for various functions in the filesystem. If the registered filesystem doesn't support an operation, it should leave the callback null.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if the parameters are invalid </td></tr>
    <tr><td class="paramname">-2</td><td>if the prefix is already in use </td></tr>
    <tr><td class="paramname">-3</td><td>if there are no more slots for filesystems </td></tr>
    <tr><td class="paramname">0</td><td>if the filesystem was registered successfully </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87492c7a75157f1aa852aedaf78e4d59" name="ga87492c7a75157f1aa852aedaf78e4d59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87492c7a75157f1aa852aedaf78e4d59">&#9670;&#160;</a></span>detach_filesystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int detach_filesystem </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>prefix</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a filesystem from newlib. </p>
<dl class="section note"><dt>Note</dt><dd>This function will make sure all files are closed before unregistering the filesystem.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix</td><td>The prefix that was used to register the filesystem</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if the parameters were invalid </td></tr>
    <tr><td class="paramname">-2</td><td>if the filesystem couldn't be found </td></tr>
    <tr><td class="paramname">0</td><td>if the filesystem was successfully unregistered </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5a2591289aeb5ec5d9f73419533edc39" name="ga5a2591289aeb5ec5d9f73419533edc39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a2591289aeb5ec5d9f73419533edc39">&#9670;&#160;</a></span>hook_stdio_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hook_stdio_calls </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstdio__t.html">stdio_t</a> *&#160;</td>
          <td class="paramname"><em>stdio_calls</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hook into stdio for STDIN, STDOUT and STDERR callbacks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stdio_calls</td><td>Pointer to structure containing callbacks for stdio functions</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on successful hook or a negative value on failure. </dd></dl>

</div>
</div>
<a id="ga6ba22042b3c62d9213ac9121ce32b96f" name="ga6ba22042b3c62d9213ac9121ce32b96f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ba22042b3c62d9213ac9121ce32b96f">&#9670;&#160;</a></span>unhook_stdio_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unhook_stdio_calls </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstdio__t.html">stdio_t</a> *&#160;</td>
          <td class="paramname"><em>stdio_calls</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unhook from stdio. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stdio_calls</td><td>Pointer to structure containing callbacks for stdio functions</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on successful hook or a negative value on failure. </dd></dl>

</div>
</div>
<a id="ga52ba40f92821927553a30e3c6e8c5214" name="ga52ba40f92821927553a30e3c6e8c5214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52ba40f92821927553a30e3c6e8c5214">&#9670;&#160;</a></span>hook_time_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hook_time_call </td>
          <td>(</td>
          <td class="paramtype">time_t(*)(void)&#160;</td>
          <td class="paramname"><em>time_fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hook into gettimeofday with a current time callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time_fn</td><td>Pointer to callback for the current time function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful or a negative value on failure. </dd></dl>

</div>
</div>
<a id="ga7c3a0415a3cd3586014fdc4d1a793bf1" name="ga7c3a0415a3cd3586014fdc4d1a793bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c3a0415a3cd3586014fdc4d1a793bf1">&#9670;&#160;</a></span>unhook_time_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unhook_time_call </td>
          <td>(</td>
          <td class="paramtype">time_t(*)(void)&#160;</td>
          <td class="paramname"><em>time_fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unhook from gettimeofday current time callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time_fn</td><td>Pointer to callback for the current time function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful or a negative value on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2024 21:40:45 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
