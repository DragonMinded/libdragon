<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: rsp.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rsp.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Hardware Vector Interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="libdragon_8h_source.html">libdragon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="regsinternal_8h_source.html">regsinternal.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3a09625a4dc302db558f31599a8169d"><td class="memItemLeft" align="right" valign="top"><a id="ac3a09625a4dc302db558f31599a8169d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#ac3a09625a4dc302db558f31599a8169d">rsp_init</a> (void)</td></tr>
<tr class="memdesc:ac3a09625a4dc302db558f31599a8169d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the RSP subsytem. <br /></td></tr>
<tr class="separator:ac3a09625a4dc302db558f31599a8169d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaaa649a5d63d3a901aa029f18743852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#abaaa649a5d63d3a901aa029f18743852">rsp_load</a> (<a class="el" href="rsp_8h.html#structrsp__ucode__t">rsp_ucode_t</a> *ucode)</td></tr>
<tr class="memdesc:abaaa649a5d63d3a901aa029f18743852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a RSP ucode.  <a href="rsp_8c.html#abaaa649a5d63d3a901aa029f18743852">More...</a><br /></td></tr>
<tr class="separator:abaaa649a5d63d3a901aa029f18743852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b956c645b70fecc0350a9b063b95625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a1b956c645b70fecc0350a9b063b95625">rsp_load_code</a> (void *start, unsigned long size, unsigned int imem_offset)</td></tr>
<tr class="memdesc:a1b956c645b70fecc0350a9b063b95625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of code into RSP IMEM.  <a href="rsp_8c.html#a1b956c645b70fecc0350a9b063b95625">More...</a><br /></td></tr>
<tr class="separator:a1b956c645b70fecc0350a9b063b95625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc133394a53198d11023f035d71a4f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#adcc133394a53198d11023f035d71a4f2">rsp_load_data</a> (void *start, unsigned long size, unsigned int dmem_offset)</td></tr>
<tr class="memdesc:adcc133394a53198d11023f035d71a4f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of data into RSP DMEM.  <a href="rsp_8c.html#adcc133394a53198d11023f035d71a4f2">More...</a><br /></td></tr>
<tr class="separator:adcc133394a53198d11023f035d71a4f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9679793e6baf1d20c7fb27f57cc10837"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a9679793e6baf1d20c7fb27f57cc10837">rsp_read_code</a> (void *start, unsigned long size, unsigned int imem_offset)</td></tr>
<tr class="memdesc:a9679793e6baf1d20c7fb27f57cc10837"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of code from RSP IMEM to RDRAM.  <a href="rsp_8c.html#a9679793e6baf1d20c7fb27f57cc10837">More...</a><br /></td></tr>
<tr class="separator:a9679793e6baf1d20c7fb27f57cc10837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13524caf97a386c71c050bd234129e56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a13524caf97a386c71c050bd234129e56">rsp_read_data</a> (void *start, unsigned long size, unsigned int dmem_offset)</td></tr>
<tr class="memdesc:a13524caf97a386c71c050bd234129e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of data from RSP DMEM to RDRAM.  <a href="rsp_8c.html#a13524caf97a386c71c050bd234129e56">More...</a><br /></td></tr>
<tr class="separator:a13524caf97a386c71c050bd234129e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896f4959706e9ecb62ecf2de43bcb276"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a896f4959706e9ecb62ecf2de43bcb276">rsp_run_async</a> (void)</td></tr>
<tr class="memdesc:a896f4959706e9ecb62ecf2de43bcb276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run RSP async.  <a href="rsp_8c.html#a896f4959706e9ecb62ecf2de43bcb276">More...</a><br /></td></tr>
<tr class="separator:a896f4959706e9ecb62ecf2de43bcb276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8697b67857ad9bd55885c0eb79c984"><td class="memItemLeft" align="right" valign="top"><a id="a5d8697b67857ad9bd55885c0eb79c984"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a5d8697b67857ad9bd55885c0eb79c984">rsp_wait</a> (void)</td></tr>
<tr class="memdesc:a5d8697b67857ad9bd55885c0eb79c984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until RSP has finished processing. <br /></td></tr>
<tr class="separator:a5d8697b67857ad9bd55885c0eb79c984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b06ba89506266ccb7c962872f0c783b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8c.html#a9b06ba89506266ccb7c962872f0c783b">rsp_run</a> (void)</td></tr>
<tr class="memdesc:a9b06ba89506266ccb7c962872f0c783b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run RSP ucode.  <a href="rsp_8c.html#a9b06ba89506266ccb7c962872f0c783b">More...</a><br /></td></tr>
<tr class="separator:a9b06ba89506266ccb7c962872f0c783b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware Vector Interface. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abaaa649a5d63d3a901aa029f18743852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaaa649a5d63d3a901aa029f18743852">&#9670;&nbsp;</a></span>rsp_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rsp_8h.html#structrsp__ucode__t">rsp_ucode_t</a> *&#160;</td>
          <td class="paramname"><em>ucode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a RSP ucode. </p>
<p>This function allows to load a RSP ucode into the RSP internal memory. The function executes the transfer right away, so it is responsibility of the caller making sure that it's a good time to do it.</p>
<p>The function internally keeps a pointer to the last loaded ucode. If the ucode passed is the same, it does nothing. This makes it easier to write code that optimistically switches between different ucodes, but without forcing transfers every time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ucode</td><td>Ucode to load into RSP </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b956c645b70fecc0350a9b063b95625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b956c645b70fecc0350a9b063b95625">&#9670;&nbsp;</a></span>rsp_load_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>imem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of code into RSP IMEM. </p>
<p>This is a lower-level function that actually executes a DMA transfer from RDRAM to IMEM. Prefer using <a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852" title="Load a RSP ucode.">rsp_load</a> instead.</p>
<dl class="section note"><dt>Note</dt><dd>in order for this function to be interoperable with <a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852" title="Load a RSP ucode.">rsp_load</a>, it will reset the last loaded ucode cache.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Pointer to buffer in RDRAM containing code. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the code to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imem_offset</td><td>Byte offset in IMEM where to load the code. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcc133394a53198d11023f035d71a4f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc133394a53198d11023f035d71a4f2">&#9670;&nbsp;</a></span>rsp_load_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dmem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of data into RSP DMEM. </p>
<p>This is a lower-level function that actually executes a DMA transfer from RDRAM to DMEM. Prefer using rsp_load instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to buffer in RDRAM containing data. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the data to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmem_offset</td><td>Offset in DMEM where to load the code. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9679793e6baf1d20c7fb27f57cc10837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9679793e6baf1d20c7fb27f57cc10837">&#9670;&nbsp;</a></span>rsp_read_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_read_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>imem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of code from RSP IMEM to RDRAM. </p>
<p>This is a lower-level function that actually executes a DMA transfer from IMEM to RDRAM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Pointer to buffer in RDRAM where to write code. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the code to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imem_offset</td><td>Byte offset in IMEM where where the code will be loaded from. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13524caf97a386c71c050bd234129e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13524caf97a386c71c050bd234129e56">&#9670;&nbsp;</a></span>rsp_read_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_read_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dmem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of data from RSP DMEM to RDRAM. </p>
<p>This is a lower-level function that actually executes a DMA transfer from DMEM to RDRAM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to buffer in RDRAM where to write data. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the data to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmem_offset</td><td>Byte offset in IMEM where where the data will be loaded from. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9b06ba89506266ccb7c962872f0c783b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b06ba89506266ccb7c962872f0c783b">&#9670;&nbsp;</a></span>rsp_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run RSP ucode. </p>
<p>This function starts running the RSP, and wait until the ucode is finished. </p>

</div>
</div>
<a id="a896f4959706e9ecb62ecf2de43bcb276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896f4959706e9ecb62ecf2de43bcb276">&#9670;&nbsp;</a></span>rsp_run_async()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_run_async </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run RSP async. </p>
<p>This function starts running the RSP in background. Use <a class="el" href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984" title="Wait until RSP has finished processing.">rsp_wait()</a> to synchronize later. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jan 15 2022 18:50:05 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
